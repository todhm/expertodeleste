(function() {
  /* start-dbtfy-addons */

  /* start-dbtfy-addtocart-animation */ function themeAddtocartAnimation(){ {%- if settings.dbtfy_addtocart_animation -%} function AddtocartAnimation(){const t=theme.settings.dbtfyATCAnimationType,n=1e3*theme.settings.dbtfyATCAnimationInterval,a=theme.variables.animationSlow,o=`slow ${t}`;$(".product-single__add-to-cart .btn--add-to-cart:not([disabled])").addClass("btn--addtocart_animation"),setInterval(function(){const t=$(".btn--addtocart_animation");t.addClass(o),setTimeout(function(){t.removeClass(o)},a)},n)}AddtocartAnimation(); {%- endif -%} } /* end-dbtfy-addtocart-animation */

  /* start-dbtfy-age-check */ function themeAgeCheck(){ {%- if settings.dbtfy_age_check -%} function AgeCheckPopup(){const e=document.querySelector(".dbtfy-age_check");if(!e)return;const t=+e.dataset.validAge,n=e.querySelector(".ac-modal"),c=e.querySelector(".ac-submit-birthdate"),r=e.querySelector(".ac-year-picker"),o=e.querySelector(".ac-month-picker"),i=e.querySelector(".ac-day-picker"),l=e.querySelector(".ac-adult-text"),a=e.querySelector(".ac-error-text"),u=e.querySelector(".ac-yes-option"),s=e.querySelector(".ac-no-option");function d(){l&&(l.style.display="none"),a&&(a.style.display="block")}function p(){theme.modal.close(n)}function y(e,t){const n=new Date;n.setTime(n.getTime()+6048e5);const c=`expires=${n.toGMTString()}`;document.cookie=`${e}=${t}; ${c}; path=/`}c&&c.addEventListener("click",()=>{!function(){if(!r||!i||!o)return;const e=parseInt(r.value),n=parseInt(o.value),c=parseInt(i.value),l=new Date(e+t,n,c),a=new Date;e&&n&&c?a.getTime()-l.getTime()<0?d():(y("isAnAdult",!0),p()):d()}()}),u&&u.addEventListener("click",()=>{y("isAnAdult",!0),p()}),s&&s.addEventListener("click",()=>{d()}),function(e){const t=`${e}=`,n=document.cookie.split(";");for(let e=0;e<n.length;e++){let c=n[e];for(;" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(t))return c.substring(t.length,c.length)}return null}("isAnAdult")?p():theme.modal.open(n)}AgeCheckPopup(); {%- endif -%} } function themeAgeCheckDestroy() { {%- if settings.dbtfy_age_check -%} const a=document.querySelector(".dbtfy-age_check");a&&a.remove(); {%- endif -%} } /* end-dbtfy-age-check */

  /* start-dbtfy-agree-to-terms */ function themeAgreeToTerms(){ {%- if settings.dbtfy_agree_to_terms -%} function AgreeToTerms(){if(!document.querySelectorAll(".dbtfy-agree_to_terms").length)return;const e=document.querySelectorAll(".at-terms-input"),t=document.querySelectorAll("[name='checkout']"),r=document.querySelectorAll(".at-terms-error-message");e.forEach(t=>{t.addEventListener("change",a=>{t.checked?(localStorage.setItem("agreeTerms","true"),e.length&&e.forEach(e=>{e.checked=!0}),r.length&&r.forEach(e=>{e.setAttribute("hidden","hidden")}),theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!1,isChanged:!0})):(localStorage.removeItem("agreeTerms"),e.length&&e.forEach(e=>{e.checked=!1}),theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!0,isChanged:!0}))}),localStorage.agreeTerms?(t.checked=!0,theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!1})):theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!0})}),t.forEach(e=>{e.hasAttribute("data-has-agree-click")||(e.addEventListener("click",t=>{const a=e.closest("form"),o=a?a.querySelector(".at-terms-input"):null,s=a?a.querySelector(".at-terms-error-message"):null;if(o)if(o.checked)jQuery.ajax({type:"POST",url:"/cart/update.js",data:`attributes[Accepted terms at]=${new Date}`,dataType:"json"}),theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!1,button:{element:e,event:t}}),r.forEach(e=>{e.setAttribute("hidden","hidden")});else if(theme.requiredToCheckoutAddons.update({name:"agree-to-terms",errors:!0,button:{element:e,event:t}}),s){let t;s.innerHTML=theme.strings.agreeTermsWarningMessage,s.removeAttribute("hidden"),"drawer"===theme.settings.cartType?t="#CartDrawer":"modal"===theme.settings.cartType&&(t="#CartModal");const r=$(e).closest(t),a=document.body.classList.contains("template-cart"),o=r.find(".drawer__header"),n=r.find(".drawer__inner"),d=n.find(".dbtfy-agree_to_terms"),c=n.find(".dbtfy-cart_countdown.sticky"),m=r.find(".ajaxcart-form"),i=d.offset()?d.offset().top:0,h=o.height()||0,l=m.offset()?m.offset().top:0,u=c.height()||0,f=n.scrollTop(),g=10;if(r.hasClass("js-drawer-open")||r.hasClass("js-modal-open"))n.animate({scrollTop:i-h-l-u+f-g},500);else if(a){const e=$(".header-section"),t=$("#cartForm").find(".dbtfy-agree_to_terms"),r=document.body.classList.contains("sticky-header"),a=t.offset()?t.offset().top:0,o=r?e.height():0,s=parseInt(e.css("top")),n=15;$("html, body").animate({scrollTop:a-o-s-n},500)}}}),e.setAttribute("data-has-agree-click","true"))})}AgreeToTerms(),$("body").on("ajaxCart.afterCartLoad",function(e,t){AgreeToTerms()}); {%- endif -%} } function themeAgreeToTermsDestroy() { {%- if settings.dbtfy_agree_to_terms -%} function destroyAgreeToTerms(){const e=document.querySelectorAll(".dbtfy-agree_to_terms");e.length&&e.forEach(e=>{e.remove()})}destroyAgreeToTerms(),$("body").on("ajaxCart.afterCartLoad",function(e,r){destroyAgreeToTerms()}); {%- endif -%} } /* end-dbtfy-agree-to-terms */

  /* start-dbtfy-automatic-geolocation */ function themeAutomaticGeolocation(){ {%- if settings.dbtfy_automatic_geolocation -%} async function AutomaticGeolocation(){const e=document.querySelector(".dbtfy_currency_and_locales");if(!e)return;const t=e.getAttribute("data-currencies").split(","),o=e.getAttribute("data-locales").split(","),c=document.querySelector("#localization-menu--header, #localization-menu--footer"),n=c?c.querySelector("button[type='submit']"):null,r=await theme.getUserLocationData();if(r){const e=r.currency,c=r.languages.split(",")[0].split("-")[0],s=sessionStorage.getItem("currencyCode"),l=sessionStorage.getItem("localeCode"),a=document.querySelectorAll("select[name='currency_code'], select.currency-code"),i=document.querySelectorAll("select[name='locale_code']");let u=!1;e===s||r.currencyApplied||function(){a.length&&t.includes(e)?(a.forEach(t=>{t.value=e}),u=!0,sessionStorage.setItem("currencyCode",e)):sessionStorage.setItem("currencyCode",theme.strings.shopCurrency);r.currencyApplied=!0,sessionStorage.setItem("user-location-data",JSON.stringify(r))}(),c===l||r.countryCodeApplied||function(){i.length&&o.includes(c)?(i.forEach(e=>{e.value=c}),u=!0,sessionStorage.setItem("localeCode",c)):sessionStorage.setItem("localeCode",theme.strings.shopPrimaryLocale);r.countryCodeApplied=!0,sessionStorage.setItem("user-location-data",JSON.stringify(r))}(),n&&u&&n.click()}}AutomaticGeolocation(); {%- endif -%} } /* end-dbtfy-automatic-geolocation */

  /* start-dbtfy-back-in-stock */ function themeBackInStock(){ {%- if settings.dbtfy_back_in_stock -%} function BackInStock(){const e=document.querySelector(".dbtfy-back_in_stock");if(!e)return;const t=e.querySelector("form"),o=document.querySelectorAll(".product-single__variants"),r=[];let n=!1;function i(e,t,o){if(n)return void(n=!1);const r=e.getAttribute("data-section-id"),i=e.querySelector(".product-single__meta--wrapper"),c=e.querySelector(".notify_form__label"),s=e.querySelector(".notify_form_message"),a=e.querySelector(".product-single__add-to-cart"),d=e.querySelector("[id^='MainProductSelect']"),u=e.querySelector(".notify_form__inputs"),l=e.querySelector(".notify_form__success"),p=+d.value,y=t[r]?t[r].variants:[],S=!!i&&i.classList.contains("variant-soldout");let h=null,_=!1;if($.each(y,function(e,t){p===this.id&&(h=this,_=this.available)}),l&&o&&l.setAttribute("hidden","hidden"),!_||S){const e=u.dataset.url,t=u.dataset.bodyMessage;u.removeAttribute("hidden"),c.removeAttribute("hidden"),s.setAttribute("data-body",`${t}${e}?variant=${p}`),s.setAttribute("value",`${t}${e}?variant=${p}`),a&&a.setAttribute("hidden","hidden")}else u.setAttribute("hidden","hidden"),c.setAttribute("hidden","hidden"),a&&a.removeAttribute("hidden")}o.length&&o.forEach(e=>{const t=e.closest("[data-section-type='product-template'], [data-section-type='quick-view-template']"),o=t.getAttribute("data-section-id"),c=+t.querySelector(".product-single").dataset.productId,s=t.querySelector(".product-single__meta--wrapper");if(function(e,t){const o=sessionStorage.getItem("notify_products"),r=(o?JSON.parse(o):[]).find(e=>e.id===t);if(!r)return;const i=e.dataset.productSelector,c=e.querySelector(`[id^='MainProductSelect'] option[value='${r.variantId}']`);if(!c)return;const s=[c.getAttribute("data-option-1"),c.getAttribute("data-option-2"),c.getAttribute("data-option-3")];switch(i){case"radio":s.forEach((t,o)=>{const r=e.querySelectorAll(`.single-option-selector__radio[name='option${o+1}'][value='${CSS.escape(t)}'], .input-color_swatches[data-option-position='option${o+1}'][value='${CSS.escape(t)}']`);r.forEach(e=>{e.checked=!0,e.dispatchEvent(new Event("change"))})});break;case"select":s.forEach((t,o)=>{const r=e.querySelectorAll(".single-option-selector__radio");if(!r.length)return;const n=r[o];if(!n)return;const i=n.querySelector(`option[value='${CSS.escape(t)}']`);i&&(n.value=t,n.dispatchEvent(new Event("change")))})}const a=e.querySelector(".notify_form__success"),d=e.querySelector(".notify_form__label"),u=e.querySelector(".notify_form__inputs");a.removeAttribute("hidden"),d.setAttribute("hidden","hidden"),u.setAttribute("hidden","hidden"),n=!0}(t,c),$(`#ProductJson-${o}`).length){if(r[o]=JSON.parse(document.getElementById(`ProductJson-${o}`).innerHTML),s){const e={attributes:!0,childList:!1,subtree:!1};new MutationObserver(()=>{i(t,r)}).observe(s,e)}document.body.addEventListener("change",function(e){i(t,r,!0)}),i(t,r,!0)}}),sessionStorage.removeItem("notify_products"),document.querySelectorAll(".input-color_swatches:checked").forEach(e=>{const t=e.closest(".custom_swatch_elements"),o=t?t.querySelector(".label-color_swatches"):null,r=o?o.getAttribute("data-label"):null,n=e.value;o&&r&&(o.innerHTML=`${r}: <span class="variant-label-option-value">${n}</span>`)}),t&&t.addEventListener("submit",()=>{const e=t.closest("div[data-section-type='product-template']"),o=+e.querySelector(".product-single").dataset.productId,r=e.querySelector("[id^='MainProductSelect']").querySelector("option:checked"),n=r?+r.value:null,i=sessionStorage.getItem("notify_products");let c=[];i&&(c=JSON.parse(i)),(c=c.filter(e=>e.id!==o)).push({id:o,variantId:n}),sessionStorage.setItem("notify_products",JSON.stringify(c))})}BackInStock(); {%- endif -%} } function themeBackInStockDestroy() { {%- if settings.dbtfy_back_in_stock -%} function destroyBackInStock(){const c=document.querySelectorAll(".dbtfy-back_in_stock");c.length&&c.forEach(c=>{c.remove()})}destroyBackInStock(); {%- endif -%} } /* end-dbtfy-back-in-stock */

  /* start-dbtfy-cart-discount */ function themeCartDiscount(){ {%- if settings.dbtfy_cart_discount -%} function CartDiscount(){var t=$(".dbtfy-cart_discount"),n=$(".input-cart_discount");t.length&&(n.on("keydown",function(t){13===t.keyCode&&(t.preventDefault(),""!==$(this).val()&&$(t.target).closest("form").find("button[name='checkout']").trigger("click"))}),$(document).on("click",".cd-apply",function(t){if(t.preventDefault(),""!==$(t.target).closest(".CartDiscount").find(".input-cart_discount").val()){var n=$(t.target).closest("form").find("button[name='checkout']");n.length||(n=$(t.target).closest("#CartDrawer").find("button[name='checkout']")),n.trigger("click")}}))}CartDiscount(),$("body").on("ajaxCart.afterCartLoad",function(t,n){CartDiscount()}); {%- endif -%} } function themeCartDiscountDestroy() { {%- if settings.dbtfy_cart_discount -%} function destroyCartDiscount(){const t=document.querySelectorAll(".dbtfy-cart_discount");t.length&&t.forEach(t=>{t.remove()})}destroyCartDiscount(),$("body").on("ajaxCart.afterCartLoad",function(t,o){destroyCartDiscount()}); {%- endif -%} } /* end-dbtfy-cart-discount */

  /* start-dbtfy-cart-favicon */ function themeCartFavicon(){ {%- if settings.dbtfy_cart_favicon -%} function CartFavicon(){const t=theme.settings.faviconImage,e=theme.settings.cartFaviconImage;function n(n){const a=n?n.item_count:theme.variables.cartCount,o=document.getElementById("favicon");e&&(a>0?o.setAttribute("href",e):o.setAttribute("href",t)),!e&&t&&function(e,n){if(e.classList.contains("notification-enabled")&&n>0)return;n>0?function(e,n){const a=document.createElement("img");a.crossOrigin="anonymous",a.src=t,a.onload=function(){const t=document.createElement("canvas"),n=t.getContext("2d"),o=a.width-a.width/4.5-5,c=a.width/4.5;t.width=a.width,t.height=a.height,n.clearRect(0,0,a.width,a.height),n.drawImage(a,0,0),n.fillStyle="#eb361e",n.strokeStyle="#ffffff",n.lineWidth=5,n.beginPath(),n.arc(o,25,c,0,2*Math.PI,!1),n.closePath(),n.fill(),n.stroke();const r=n.canvas.toDataURL();i(e,r,"image/x-icon","add")}}(e):i(e,t,"image/png","remove")}(o,a)}function i(t,e,n,i){const a=document.querySelector("head"),o=document.createElement("link");o.sizes="192x192",o.type="image/x-icon",o.rel="shortcut icon",o.id="favicon",o.href=e,t.remove(),a.appendChild(o),o.classList[i]("notification-enabled")}t&&(n(),$("body").on("ajaxCart.afterCartLoad",function(t,e){n(e)}))}CartFavicon(); {%- endif -%} } /* end-dbtfy-cart-favicon */

  /* start-dbtfy-cart-goal */ function themeCartGoal(){ {%- if settings.dbtfy_cart_goal -%} async function CartGoal(e){const t=document.querySelector(".dbtfy-cart_goal_list");if(!t)return;const a=t.querySelectorAll(".dbtfy-cart_goal");if(!a.length)return;const r=await theme.getUserLocationData();if(!r)return;const n=r.country_name,o={AF:"Africa",AN:"Antarctica",AS:"Asia",EU:"Europe",NA:"North america",OC:"Oceania",SA:"South america"}[r.continent_code],c=Array.from(a).find(e=>{const t=e.dataset.goalRegion,a=theme.capitalizeFirstLetter(t),r=theme.capitalizeFirstLetter(n);if(a===theme.capitalizeFirstLetter(o)||a===r||"All"===a)return e});if(a.forEach(e=>{e!==c&&e.remove()}),!c)return;const s=c.dataset.beforeAmountText,i=c.dataset.afterAmountText,l=c.dataset.goalReachedText,d=c.querySelector(".cg-wrapper"),u=c.querySelector(".cg-free-shipping-text"),m=c.querySelector(".cg-progress-bar"),p=parseInt(c.dataset.cartTotalCount);let y=parseFloat(c.dataset.goalAmount),g=parseFloat(c.dataset.cartTotalAmount);const f=document.querySelector("#currency-list-header"),h=theme.strings.shopCurrency;let A="";f&&(A=f.value,Currency.convertAll(h,A,"span.cart_goal_amount_new","money"),A!==h&&(y=100*parseFloat(c.querySelector("span.cart_goal_amount_new").innerText))),e&&(g=e.total_price/100);const _=parseFloat(y-g);let S=0,C=`<span>${l}</span>`;if(_>0){const e=theme.strings.moneyFormat;S=100*(y-_)/y,C=`<span>${s} <span class="cg-goal-amount text-money text-secondary"><span class="money">${theme.Currency.formatMoney(100*_,e)}</span></span> ${i}</span>`}else S=100;if(u.innerHTML=C,m.style.width=`${S}%`,d.hidden=!1,e?e.item_count||(d.hidden=!0):0===p&&(d.hidden=!0),document.body.classList.contains("template-cart")){const e=c.cloneNode(!0),t=document.querySelector(".page-title-wrapper"),a=t.nextElementSibling;a&&a.classList.contains("dbtfy-cart_goal")&&a.remove(),t.insertAdjacentElement("afterend",e)}const b="drawer"===theme.settings.cartType?"#CartDrawer":"#CartModal",q=document.querySelector(b),w=q&&q.querySelector(".cart-products");if(q&&w){const e=c.cloneNode(!0),t=e.querySelector(".cg-wrapper"),a=w.previousSibling;a&&a.classList.contains("dbtfy-cart_goal")&&a.remove(),e.classList.add("drawer__inner-section"),t&&!t.hasAttribute("hidden")&&w.insertAdjacentElement("beforebegin",e)}document.dispatchEvent(new CustomEvent("CartGoalLoaded"))}CartGoal(),$("body").on("ajaxCart.afterCartLoad",function(e,t){CartGoal(t)}); {%- endif -%} } function themeCartGoalDestroy() { {%- if settings.dbtfy_cart_goal -%} function destroyCartGoal(){const o=document.querySelectorAll(".dbtfy-cart_goal");o.length&&o.forEach(o=>{o.remove()})}destroyCartGoal(),$("body").on("ajaxCart.afterCartLoad",function(o,t){destroyCartGoal()}); {%- endif -%} } /* end-dbtfy-cart-goal */

  /* start-dbtfy-cart-reminder */ function themeCartReminder(){ {%- if settings.dbtfy_cart_reminder -%} function CartReminder(){function e(){const e=theme.cart.items.length;if(0===e)return;const t=theme.getRandomNumberInRange(0,e-1);!function(e){document.querySelectorAll(".notification-toast-image").forEach(t=>{e.url?t.innerHTML=`<img src="${e.url}" alt="${e.alt}">`:t.innerHTML=theme.variables.productPlaceholderSvg})}(theme.cart.items[t].featured_image)}document.querySelectorAll(".dbtfy-cart_reminder").length&&(e(),theme.NotificationToast.init(".dbtfy-cart_reminder_wrapper",e,!0))}document.addEventListener("shopify:section:load",e=>{sessionStorage.removeItem("cartReminderClosed")}),CartReminder(); {%- endif -%} } function themeCartReminderDestroy() { {%- if settings.dbtfy_cart_reminder -%} function destroyCartReminder(){const e=document.querySelectorAll(".dbtfy-cart_reminder");e.forEach(r=>{r&&e.remove()})}destroyCartReminder(); {%- endif -%} } /* end-dbtfy-cart-reminder */

  /* start-dbtfy-cart-savings */ function themeCartSavings(){ {%- if settings.dbtfy_cart_savings -%} function CartSavings(){const t={cartCurrentValues:{price:0,qt:0,compareAtPrice:0,cartSavingsValue:0,cartTotalWithDiscount:0},drawerCartCurrentValues:{price:0,qt:0,compareAtPrice:0,cartSavingsValue:0,cartTotalWithDiscount:0}};function e(e){function a(){let a="";a=e?"drawer"===e?"#CartDrawer":"modal"===e?"#CartModal":".dbtfy-cart-page-container":"#CartDrawer, .dbtfy-cart-page-container, #CartModal";const r=document.querySelectorAll(a),n=theme.strings.moneyFormat;r.forEach(e=>{const a=e.querySelector(".cart_savings-wrapper");if(!a)return;const r=e.querySelector("[data-cart-total]"),c=e.querySelector("[data-cart-total-value]"),o=a.parentElement.querySelector(".cart-discount"),s=o?+o.dataset.discountValue:0,i=a.querySelector(".cart_savings-wrapper-text"),u=+a.dataset.totalWithComparePrice,l=+a.dataset.totalSavingsByComparePrice,d=theme.Currency.formatMoney(u,n),p=!!r.querySelectorAll(".cart__subtotal-discounted").length,m=theme.cart.item_count;let y=l;if(y>0||s>0){let e=u-y;const l=a.closest(".main-content")?"cartCurrentValues":"drawerCartCurrentValues",C=t[l];if(C.qt!=m&&C.compareAtPrice===u&&p)return;if(C.qt=m,o&&(e=u-(y+=s),C.price===e&&C.compareAtPrice===u&&p))return;if(C.price===e&&C.compareAtPrice===u&&p)return;C.price=e,C.compareAtPrice=u;const h=theme.Currency.formatMoney(e,n);i.innerHTML=`<span class="money">${theme.Currency.formatMoney(y,n)}</span>`,f(r,!0,d,h),c.innerHTML=`<span class="money">${h}</span>`,a.removeAttribute("hidden")}else f(r,!1,d),c.innerHTML=`<span class="money">${d}</span>`,a.setAttribute("hidden","hidden");function f(t,e,a,r){t.querySelector(".cart__subtotal-compare-at")&&(t.innerHTML=""),t.innerHTML=e?`<span class="cart__subtotal-discounted text-sale"><span class="money">${r}</span></span> <span class="cart__subtotal-discounted text-muted text-strike"><span class="money">${a}</span></span>`:`<span class="money">${a}</span>`}})}theme.cart?a():document.addEventListener("dbtfy:cartLoaded",a)}e(),$("body").on("ajaxCart.afterCartLoad",function(t,a,r){e(r)}),document.addEventListener("dbtfy:cartDiscountSaved",()=>{e()})}CartSavings(); {%- endif -%} } function themeCartSavingsDestroy() { {%- if settings.dbtfy_cart_savings -%} function destroyCartSavings(){const a=document.querySelectorAll(".cart_savings-wrapper");a.length&&a.forEach(a=>{a.remove()})}destroyCartSavings(),$("body").on("ajaxCart.afterCartLoad",function(a,r){destroyCartSavings()}); {%- endif -%} } /* end-dbtfy-cart-savings */

  /* start-dbtfy-cart-upsell */ function themeCartUpsell(){ {%- if settings.dbtfy_cart_upsell -%} function CartUpsell(){const dbtfy=document.querySelector(".cu-wrapper");function SpecificCartUpsell(e){document.querySelectorAll(".specific-upsell").forEach(e=>{e.remove()});const t=dbtfy.querySelectorAll(".cu-specific-upsell");if(!t.length||!e)return;const r=Array.from(t).filter(t=>{const r=+t.dataset.offerId;return!e.items.some(e=>e.product_id===r)});r.length&&e.items.forEach((e,t)=>{const a=e.product_id,n=r.filter(e=>{const t=+e.dataset.triggerId;return a===t});if(!n.length)return;const c=[];n.filter(e=>{const t=+e.dataset.offerId;return!c.includes(t)&&(c.push(t),!0)}).forEach(e=>{const r=document.querySelector("#CartContainer .drawer__inner");if(r){const a=e.cloneNode(!0),n=a.querySelector("form");n&&(n.removeAttribute("data-has-submit-event"),n.removeAttribute("data-has-submit-listener"));const c=r.querySelector(`.ajaxcart_row[data-line="${t+1}"]`);if(c){c.querySelector(".specific-upsell")||c.insertAdjacentHTML("beforeend",`\n                    <div class="card-group spacer-top specific-upsell" data-line="${t+1}"></div>\n                  `);const e=r.querySelector(`.specific-upsell[data-line="${t+1}"]`);e&&e.insertAdjacentElement("beforeend",a)}}const a=document.querySelector("#cartForm .dbtfy_main_cart_container");if(a){const r=e.cloneNode(!0),n=r.querySelector("form");n&&(n.removeAttribute("data-has-submit-event"),n.removeAttribute("data-has-submit-listener"));const c=a.querySelector(`.cart__row[data-line="${t+1}"]`);if(c){c.querySelector(".specific-upsell")||c.insertAdjacentHTML("beforeend",`\n                    <div class="card-group spacer-top specific-upsell" data-line="${t+1}"></div>\n                  `);const e=a.querySelector(`.specific-upsell[data-line="${t+1}"]`);e&&e.insertAdjacentElement("beforeend",r)}}theme.ajaxCart.init({enableQtySelectors:!1})})})}function GeneralCartUpsell(e){document.querySelectorAll(".ajaxcart__general-upsell, .general-upsell").forEach(e=>{e.remove()});const t=dbtfy.querySelectorAll(".cu-general-upsell");if(!t.length||!e)return;const r=Array.from(t).filter(t=>{const r=+t.dataset.productId;return!e.items.some(e=>e.product_id===r)});r.length&&r.forEach(e=>{const t=document.querySelector("#CartContainer .drawer__inner");if(t){const r=e.cloneNode(!0),a=r.querySelector("form");a&&(a.removeAttribute("data-has-submit-event"),a.removeAttribute("data-has-submit-listener")),t.querySelector(".ajaxcart__general-upsell")||t.insertAdjacentHTML("beforeend",'\n                  <div class="ajaxcart__general-upsell drawer__inner-section card-group"></div>\n                ');const n=t.querySelector(".ajaxcart__general-upsell");n&&n.insertAdjacentElement("beforeend",r)}const r=document.querySelector("#cartForm .dbtfy_main_cart_container");if(r){const t=e.cloneNode(!0),a=t.querySelector("form");a&&(a.removeAttribute("data-has-submit-event"),a.removeAttribute("data-has-submit-listener"));const n=+t.dataset.productId;r.insertAdjacentHTML("beforeend",`\n                <div class="card-group spacer-top general-upsell" data-product-id="${n}"></div>\n              `);const c=r.querySelector(`.general-upsell[data-product-id="${n}"]`);c&&c.insertAdjacentElement("beforeend",t)}theme.ajaxCart.init({enableQtySelectors:!1})})}function addListeners(){const selects=document.querySelectorAll(".cu-select");function changeVariantImage(e){const t=e.closest(".cu-product-wrapper"),r=e.selectedOptions[0].dataset.variantImg;if(r&&t){const e=t.querySelector(".cu-variant-img");e&&e.setAttribute("src",r)}}function changeVariantUrl(e){const t=e.selectedOptions[0].dataset.variantUrl,r=e.closest(".cu-upsell"),a=e.closest(".cu-product-wrapper");if(r){const e=r.querySelector(".cu-product-name a");e&&e.setAttribute("href",t)}if(a){const e=a.querySelector(".image-link");e&&e.setAttribute("href",t)}}selects.forEach(e=>{e.hasAttribute("data-has-change-event")?e.setAttribute("data-has-change-event","true"):e.addEventListener("change",()=>{changeVariantImage(e),changeVariantUrl(e)})});const cartUpsellButtons=document.querySelectorAll(".cu-addtocart-btn"),cartType=theme.settings.cartType;cartUpsellButtons.forEach(upsellButton=>{const isEventAdded=upsellButton.hasAttribute("data-has-click-event");isEventAdded?upsellButton.setAttribute("data-has-click-event","true"):upsellButton.addEventListener("click",event=>{event.preventDefault();const button=event.target.closest(".cu-addtocart-btn"),form=button.closest(".cu-form"),upsellAddon=document.querySelector(".dbtfy-upsell_popup");if(theme.loadingState.init(button),button.classList.contains("cu-replace-offer")){const e=button.closest(".cart__row"),t=+e.dataset.line,r=e.querySelector(".cart__product-qty");let a=!1;if(r){const e=r.value,t=form.querySelector(".qty-input"),n=+form.querySelector(".cu-select").selectedOptions[0].dataset.variantQuantity;a=n>=+e,t.value=e}a&&$.ajax({type:"POST",url:"/cart/change.js",dataType:"json",async:!1,data:{line:t,quantity:0}})}ShopifyAPI.addItemFromForm(form,()=>{$("body").on("ajaxCart.afterCartLoad",function(e,t){theme.loadingState.destroy(button)}),upsellAddon?document.dispatchEvent(new CustomEvent("dbtfy:formSubmitted",{detail:{form:form}})):theme.ajaxCart.update(),document.body.classList.remove("js-modal-open")},(XMLHttpRequest,textStatus,form)=>{const data=eval(`(${XMLHttpRequest.responseText})`);if(theme.loadingState.destroy(button),data.message&&422===data.status){const e=button.nextElementSibling;e&&e.remove(),button.insertAdjacentHTML("afterend",`<div class="errors qty-error">${data.description}</div>`)}})})});const isCartPage=document.body.classList.contains("template-cart");"drawer"===cartType&&isCartPage&&theme.ajaxCart.init()}dbtfy&&($("body").on("ajaxCart.afterCartLoad",function(e,t){t.items.length&&(SpecificCartUpsell(t),GeneralCartUpsell(t),addListeners(),$("body").trigger("dbtfy:cartUpsellLoaded",t))}),$("body").hasClass("template-cart")&&ShopifyAPI.getCart(e=>{e.items.length&&(SpecificCartUpsell(e),GeneralCartUpsell(e),addListeners(),$("body").trigger("dbtfy:cartUpsellLoaded",e))}))}CartUpsell(); {%- endif -%} } function themeCartUpsellDestroy() { {%- if settings.dbtfy_cart_upsell -%} function destroyCartUpsell(){const t=document.querySelectorAll(".dbtfy-cart_upsell");t.length&&t.forEach(t=>{t.remove()})}destroyCartUpsell(),$("body").on("ajaxCart.afterCartLoad",function(){destroyCartUpsell()}); {%- endif -%} } /* end-dbtfy-cart-upsell */

  /* start-dbtfy-collection-addtocart */ function themeCollectionAddtocart(){ {%- if settings.dbtfy_collection_addtocart -%} async function CollectionAddtocart(e,t){const n=document.querySelectorAll(".dbtfy-collection_addtocart");function o(e){var t,n,o=$(e),d=o.width(),a=o.children(":selected").html(),c=d-(t=$(`<span class="tempforSize">${a}</span>`).prependTo("body"),n=t.width(),t.remove(),n);o.css("text-align-last",""),o.css("text-indent",c/2-2)}n.length&&n.forEach(function(n){const d=n.querySelector(".ca-select"),a=n.querySelector(".ca-button");if(theme.isSafariBrowser()&&d&&(o(d),window.addEventListener("resize",function(){o(d)}),window.addEventListener("orientationchange",function(){o(d)})),d&&!d.hasAttribute("data-has-change-event")){let e=document.querySelector(".ca-select-temp-generated"),t=document.querySelector(".ca-select-temp-generated option");e||(e=document.createElement("select"),t=document.createElement("option"),e.classList.add("ca-select-temp-generated","btn","btn--small","text-ellipsis"),e.setAttribute("hidden","hidden"),e.insertAdjacentElement("afterbegin",t),document.body.insertAdjacentElement("beforeend",e),e=document.querySelector(".ca-select-temp-generated"),t=document.querySelector(".ca-select-temp-generated option")),e.removeAttribute("hidden"),t.innerHTML=d.options[0].value,d.style.width=`${e.offsetWidth}px`,a.style.width=`${e.offsetWidth}px`,e.setAttribute("hidden","hidden"),d.addEventListener("change",function(){a.click()})}a&&!a.hasAttribute("data-has-click-event")&&a.addEventListener("click",function(e){if(theme.loadingState.init(a),t){e.preventDefault();const t=this.closest("form");t.setAttribute("data-has-submit-listener","true"),ShopifyAPI.addItemFromForm(t,e=>{document.querySelector(".dbtfy-upsell_popup")?document.dispatchEvent(new CustomEvent("dbtfy:formSubmitted",{detail:{form:t}})):theme.ajaxCart.update()}),$("body").on("ajaxCart.afterCartLoad",function(e,t){theme.loadingState.destroy(a),theme.modal.close(document.querySelector("#quickCompareModal"))})}}),d&&(d.classList.add("btn-outline-primary"),d.classList.remove("btn--primary"),d.selectedIndex=0,d.setAttribute("data-has-change-event","true")),a&&(e&&theme.loadingState.destroy(a),a.setAttribute("data-has-click-event","true"))})}CollectionAddtocart(),$("body").on("ajaxCart.afterCartLoad",function(e){CollectionAddtocart()}),$("body").on("ajaxCart.cartAddError",function(e){CollectionAddtocart(!0)}),$("body").on("afterRecommendationLoad",function(e){CollectionAddtocart()}),$(document).on("shopify:section:load",function(e){CollectionAddtocart()}),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{CollectionAddtocart()}),document.addEventListener("dbtfy:wishlistLoaded",()=>{CollectionAddtocart()}),document.addEventListener("dbtfy:quickCompareLoaded",e=>{CollectionAddtocart(!1,e.detail.isClickedFromQuickCompareModal)}); {%- endif -%} } function themeCollectionAddtocartDestroy() { {%- if settings.dbtfy_collection_addtocart -%} function destroyCollectionAddtocart(){const t=document.querySelectorAll(".dbtfy-collection_addtocart");t.length&&t.forEach(t=>{t.remove()})}document.body.classList.add("dbtfy-collection_addtocart-destroy"),destroyCollectionAddtocart(),$("body").on("ajaxCart.afterCartLoad",function(t,o){destroyCollectionAddtocart()}),$("body").on("afterRecommendationLoad",function(t){destroyCollectionAddtocart()}),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{destroyCollectionAddtocart()}); {%- endif -%} } /* end-dbtfy-collection-addtocart */

  /* start-dbtfy-collection-filters */ function themeCollectionFilters(){ {%- if settings.dbtfy_collection_filters -%} function CollectionFilters(){const e=document.querySelector(".collection-section"),t=document.querySelector(".filter-clear-all"),r=document.querySelector("#dbtfyCollectionFilter .drawer__footer");function n(){document.querySelectorAll(".filter-card-item input[id^='filter_group']").forEach(e=>{e.addEventListener("change",t=>{if(e.closest(".checkbox").classList.contains("disabled"))return;const r=e.value;let n=[];if(Shopify.queryParams.constraint&&(n=Shopify.queryParams.constraint.split("+")),r){const e=n.indexOf(r);e>=0?n.splice(e,1):n.push(r)}n.length?Shopify.queryParams.constraint=n.join("+"):delete Shopify.queryParams.constraint,c()})})}function o(){if(Shopify.queryParams={},location.search.length){const e=location.search.substr(1).split("&");let t="";for(let r=0;r<e.length;r++)(t=e[r].split("=")).length>1&&(Shopify.queryParams[decodeURIComponent(t[0])]=decodeURIComponent(t[1]))}}function c(e){delete Shopify.queryParams.page;const t=i(e);history.pushState({param:Shopify.queryParams},t,t),l(t)}function i(e){const t=new URLSearchParams(Object.entries(Shopify.queryParams)).toString().replace(/%2B/g,"+"),r=document.querySelector("#sortBy"),n=r?`sort_by=${r.value}`:"";return e?""!==t?e+"?"+t:e+"?"+n:t?location.pathname+"?"+t:location.pathname+"?"+n}function l(e){fetch(e).then(function(e){return e.text()}).then(function(e){const t=(new DOMParser).parseFromString(e,"text/html"),r=function(e){const t=document.querySelector(".collection-list-products"),r=e.querySelector(".collection-list-products"),n=null!==t.getAttribute("id")?".dbtfy-infinite_scroll":".pagination",o=e.querySelector(n),c=document.querySelector(n);c&&c.remove();o&&r.insertAdjacentElement("afterend",o);return e}(t);!function(e){const t=document.querySelector("#dbtfyCollectionFilter").querySelector(".drawer-left__inner"),r=e.querySelector("#dbtfyCollectionFilter").querySelector(".drawer-left__inner");t&&(t.innerHTML=r.innerHTML);s(),n(),u(),a()}(t),function(e){const t=e.querySelector(".collection-and-pagination-container"),r=document.querySelector(".collection-and-pagination-container"),n=r.querySelector(".collection-list-products");r.innerHTML=t.innerHTML,n&&null!==n.getAttribute("id")?themeInfiniteScroll():d();themeQuickView()}(r),function(e){const t=document.querySelector(".hero-container"),r=document.querySelector(".simple_collection_header"),n=e.querySelector(".hero-container"),o=e.querySelector(".hero-header-style"),c=e.querySelector(".simple_collection_header"),i=document.querySelector("#mainContent");document.title=e.title,t?(document.querySelector(".hero-header-style").remove(),t.remove()):r&&r.remove();n?(i.insertAdjacentElement("afterbegin",n),i.insertAdjacentElement("afterbegin",o)):document.querySelector(".collection-controls").insertAdjacentHTML("beforebegin",c.outerHTML)}(r),document.body.dispatchEvent(new CustomEvent("afterRecommendationLoad"))})}function a(){document.querySelectorAll(".dbtfy-filter-list-links a").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let r=e.closest("li"),n=document.querySelector(".dbtfy-filter-list-links li.active");if(!r.classList.contains("active")){let t=e.href;delete Shopify.queryParams.q,c(t),n&&n.classList.remove("active"),r.classList.add("active")}})})}function s(){const e=document.querySelectorAll(".dbtfy-filter-tags-group");let n=0;e.forEach(e=>{let t=e.querySelectorAll("input"),r=Array.from(t).filter(e=>!0===e.checked),o=e.querySelector(".filter-clear");r.length>0?(o&&(o.hidden=!1),n++):o&&(o.hidden=!0)}),n?(t&&(t.hidden=!1),r&&(r.hidden=!1)):(t&&(t.hidden=!0),r&&(r.hidden=!0))}function u(){document.querySelectorAll(".filter-clear").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();let r=[],n=e.closest(".dbtfy-filter-tags-group").querySelectorAll("input"),o=Array.from(n).filter(e=>!0===e.checked);Shopify.queryParams.constraint&&(r=Shopify.queryParams.constraint.split("+")),o.forEach(e=>{let t=e.value;if(e.checked=!1,t){let e=r.indexOf(t);e>=0&&r.splice(e,1)}}),r.length?Shopify.queryParams.constraint=r.join("+"):delete Shopify.queryParams.constraint,c()})})}function d(){const t=document.querySelector(".pagination");t&&t.querySelectorAll(".page a").forEach(t=>{t.addEventListener("click",r=>{const n=t.getAttribute("href").match(/page=\d+/g);if(n&&(Shopify.queryParams.page=parseInt(n[0].match(/\d+/g)),Shopify.queryParams.page)){const t=i();history.pushState({param:Shopify.queryParams},t,t),l(t),e.scrollIntoView({block:"start",behavior:"smooth"})}r.preventDefault()})})}e&&(window.addEventListener("popstate",e=>{history.scrollRestoration="manual",o(),c()}),o(),s(),u(),function(){const e=document.querySelectorAll(".filter-clear");t&&t.addEventListener("click",t=>{e.forEach(e=>{e.hidden=!0}),delete Shopify.queryParams.constraint,c()})}(),d(),n(),a())}document.addEventListener("shopify:section:select",e=>{"dbtfy-collection-filters"===e.detail.sectionId&&timber.FilterDrawer.open(e)}),document.addEventListener("shopify:section:deselect",e=>{"dbtfy-collection-filters"===e.detail.sectionId&&timber.FilterDrawer.close(e)}),CollectionFilters(); {%- endif -%} } function themeCollectionFiltersDestroy() { {%- if settings.dbtfy_collection_filters -%} function CollectionFiltersDestroy(){const e=document.querySelector("#shopify-section-dbtfy-collection-filters"),o=document.querySelector(".collection-filters-btn"),t=o?o.closest("div"):null;e&&e.remove(),t&&t.remove()}document.body.classList.add("dbtfy-collection-filters-destroy"),CollectionFiltersDestroy(); {%- endif -%} } /* end-dbtfy-collection-filters */

  /* start-dbtfy-color-swatches */ function themeColorSwatches(){ {%- if settings.dbtfy_color_swatches -%} function ColorSwatches(){const e=theme.strings;document.querySelectorAll(".input-color_swatches").forEach(e=>{e.hasAttribute("data-has-change-event")||(e.addEventListener("change",()=>{const t=e.closest(".custom_swatch_elements"),r=t?t.querySelector(".label-color_swatches"):null,n=r?r.getAttribute("data-label"):null,o=e.dataset.sectionId,a=document.getElementById(`AddToCartForm--${o}`);if(!a)return;const c=e.dataset.index,s=e.value;r&&n&&(r.innerHTML=`${n}: <span class="variant-label-option-value">${s}</span>`);const l=a.querySelector(`.single-option-selector__radio[data-index="option${c}"][value="${CSS.escape(s)}"]`);if(l)return l.checked=!0,void l.dispatchEvent(new Event("change"));const i=a.querySelector(`select.single-option-selector__radio[data-index="option${c}"]`);i&&(i.value=s,i.dispatchEvent(new Event("change")))}),e.setAttribute("data-has-change-event","true"))}),document.querySelectorAll(".input-color_swatches--product-grid").forEach(t=>{t.addEventListener("change",()=>{const r=t.getAttribute("value"),n=t.dataset.productId,o=document.getElementById(`ProductSelect-${n}`).querySelectorAll("option"),a=Array.from(o).find(e=>{const t=e.dataset.option1,n=e.dataset.option2,o=e.dataset.option3;return t===r||n===r||o===r});if(!a)return;const c=a.getAttribute("value"),s=a.dataset.image,l=a.dataset.price,i=a.dataset.compareAtPrice;document.querySelectorAll(`.input-color_swatches--product-grid[data-product-id="${n}"][value="${r}"]`).forEach(t=>{const r=t.closest(".grid-product, .list-product"),n=r?r.querySelector(".product--image"):null,o=r?r.querySelector(".product-hover-image img"):null,a=r?r.querySelectorAll(".grid-product__image-link, .grid-product__meta, .list-product__image-link, .list-product__title-link"):null,d=r?r.querySelector(".grid-product__price-wrap, .list-product__price-wrap"):null,u=d?d.querySelector(".price-regular"):null,p=d?d.querySelector(".price-compare"):null,m=r.querySelector(".grid-product__badge, .list-product__badge");if(r&&r.classList.add("cs-active"),n&&s&&(n.removeAttribute("srcset"),n.src=s,o&&(o.src=s,o.removeAttribute("srcset"))),a&&a.length&&a.forEach(e=>{const t=e.getAttribute("href");e.href=`${t.split("?variant=")[0]}?variant=${c}`}),(u||p)&&(u&&(u.innerHTML=`<span class="money">${theme.Currency.formatMoney(+l,theme.strings.moneyFormat)}</span>`,i&&p?(u.classList.add("on-sale","text-sale"),u.setAttribute("aria-label",e.salePrice)):(u.classList.remove("on-sale","text-sale"),u.setAttribute("aria-label",e.regularPrice))),i&&p?(p.classList.remove("hide"),p.innerHTML=`<span class="money">${theme.Currency.formatMoney(+i,theme.strings.moneyFormat)}</span>`):(p.classList.add("hide"),p.innerHTML=" ")),i&&l){if(i>l){const e=m.querySelector(".product-badge-discount");if(m.classList.remove("hide"),"amount"===theme.settings.saleType){const t=i-l;e&&(e.innerHTML=`<span class="money">${theme.Currency.formatMoney(+t,theme.strings.moneyFormat)}</span>`)}else if("percentage"===theme.settings.saleType){const t=Math.floor(100*(i-l)/i);e&&(e.innerText=`${t}%`)}}}else m.classList.add("hide");var h=$("#currency-list-header[name='dbtfy-custom-currencies']"),y=theme.strings.shopCurrency;h.length&&y&&Currency.currentCurrency&&Currency.convertAll(y,Currency.currentCurrency)})})})}ColorSwatches(),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{ColorSwatches()}),$(document).on("shopify:section:load",function(){ColorSwatches()}),$("body").on("afterRecommendationLoad",function(){ColorSwatches()}); {%- endif -%} } function themeColorSwatchesDestroy() { {%- if settings.dbtfy_color_swatches -%} function destroyColorSwatches(){const o=document.querySelectorAll(".dbtfy-color_swatches"),e=document.querySelectorAll(".product-form__item");o.length&&o.forEach(o=>{o.remove()}),e.length&&e.forEach(o=>{o.removeAttribute("hidden")})}document.body.classList.add("dbtfy-color_swatches-destroy"),destroyColorSwatches(),$(document).on("shopify:section:load",function(){destroyColorSwatches()}),$("body").on("afterRecommendationLoad",function(o){destroyColorSwatches()}); {%- endif -%} } /* end-dbtfy-color-swatches */

  /* start-dbtfy-cookie-box */ function themeCookieBox(){ {%- if settings.dbtfy_cookie_box -%} async function CookieBox(){if(!document.querySelector(".dbtfy-cookie_box"))return;const o=theme.settings.dbtfyCookieBoxEUOnly,e=await theme.getUserLocationData();if(!o||!e||e.in_eu){var t=$("#CookieBox"),i=$(".cb-btn, .cb-btn-close");localStorage.cookieboxClosed||t.show(),i.click(function(){theme.closeTransition({elementToTransition:t},function(){t.hide(),localStorage.setItem("cookieboxClosed","true")})})}}CookieBox(); {%- endif -%} } function themeCookieBoxDestroy() { {%- if settings.dbtfy_cookie_box -%} function destroyCookieBox(){const o=document.querySelector(".dbtfy-cookie_box");o&&o.remove()}document.body.classList.add("dbtfy-cookie_box-destroy"),destroyCookieBox(); {%- endif -%} } /* end-dbtfy-cookie-box */

  /* start-dbtfy-custom-currencies */ function themeCustomCurrencies(){ {%- if settings.dbtfy_custom_currencies and settings.show_currency_selector -%} function CustomCurrencies(r){var e=$("[name='dbtfy-custom-currencies']"),n=$("select[name='id']"),t=$(".Cart_currencyinfo"),c=theme.strings.shopCurrency,u=theme.strings.shopCurrency,o=sessionStorage.getItem("currencyCode");function a(){Currency.convertAll(c,e.val()),o===c&&$("#ajaxCartForm .Cart_currencyinfo, #cartForm .Cart_currencyinfo").hide(),$(".selected-currency").text(Currency.currentCurrency)}e&&(Currency.format=theme.strings.currencyFormat,null==o?c!==u?Currency.convertAll(c,u,r):Currency.currentCurrency=u:e.size()&&0===$(`[name='dbtfy-custom-currencies'] option[value=${o}]`).size()?(Currency.currentCurrency=c,sessionStorage.setItem("currencyCode",c)):o===c?(Currency.currentCurrency=c,Currency.convertAll(c,o,r),t.hide()):(Currency.currentCurrency=o,setTimeout(function(){Currency.convertAll(c,o,r)},1600)),e.val(Currency.currentCurrency).change(function(){var r=$(this).val();sessionStorage.setItem("currencyCode",r)}),setTimeout(function(){n.length&&n.each(function(){$(this).find("option").each(function(){var r=$(this).data("variant-title"),e=parseFloat($(this).data("variant-price"));if(!isNaN(e)){var n=Currency.convert(e,c,Currency.currentCurrency);switch(theme.strings.currencyFormat){case"money_format":var t=Currency.formatMoney(n,Currency.moneyFormats[Currency.currentCurrency].money_format);break;case"money_with_currency_format":t=Currency.formatMoney(n,Currency.moneyFormats[Currency.currentCurrency].money_with_currency_format);break;case"money_without_trailing_zeros":t=Currency.formatMoney(n,Currency.moneyFormats[Currency.currentCurrency].money_without_trailing_zeros);break;case"money_without_trailing_zeros_with_currency":t=Currency.formatMoney(n,Currency.moneyFormats[Currency.currentCurrency].money_without_trailing_zeros_with_currency);break;case"money_without_sign_and_with_currency":t=Currency.formatMoney(n,Currency.moneyFormats[Currency.currentCurrency].money_without_sign_and_with_currency);break;case"money_without_sign_and_with_decimal":t=Currency.formatMoney(n,Currency.moneyFormats[Currency.currentCurrency].money_without_sign_and_with_decimal)}$(this).html(`${r} - ${t}`)}})})},1500),$("body").on("ajaxCart.afterCartLoad",function(r,e){a();const n=document.querySelectorAll(".cart__subtotal"),t={attributes:!0,childList:!0,subtree:!0};n.forEach(r=>{new MutationObserver(a).observe(r,t)})}),a())}$("body").on("dbtfy:cartUpsellLoaded",function(r,e){CustomCurrencies()}),document.addEventListener("CartGoalLoaded",()=>{CustomCurrencies(".cg-goal-amount span.money")}),document.addEventListener("QuickViewLoaded",()=>{CustomCurrencies()}),document.addEventListener("dbtfy:upsellPopupMarkupLoaded",()=>{CustomCurrencies()}),document.addEventListener("dbtfy:wishlistLoaded",()=>{CustomCurrencies()}),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{CustomCurrencies()}),CustomCurrencies(); {%- endif -%} } function themeCustomCurrenciesDestroy() { {%- if settings.dbtfy_custom_currencies and settings.show_currency_selector -%} function destroyCustomCurrencies(){const e=document.querySelectorAll(".dbtfy-custom_currencies"),r=document.querySelectorAll(".Cart_currencyinfo"),o=document.querySelector("#currency-list-header");e.length&&e.forEach(e=>{e.remove()}),r.length&&r.forEach(e=>{e.remove()}),o&&(o.previousElementSibling.remove(),o.remove())}destroyCustomCurrencies(),$("body").on("ajaxCart.afterCartLoad",function(e,r){destroyCustomCurrencies()}); {%- endif -%} } /* end-dbtfy-custom-currencies */

  /* start-dbtfy-customizable-products */ function themeCustomizableProducts() { {%- if settings.dbtfy_customizable_products -%} function CustomizableProducts(){const e=document.querySelector(".dbtfy-customizable_products");if(!e)return;if(!e.querySelectorAll(".line-item-property__field").length)return;const t=theme.visibilitySettings.sortVisibilityTypes(e,".line-item-property__field"),r=document.querySelectorAll(".featured-product-section, .product-section");for(let[e,c]of t)c.forEach(e=>{const t={visibility:e.dataset.visibilityType,tags:e.dataset.tags,types:e.dataset.types,productId:e.dataset.productId,collection:e.dataset.collection,template:e.cloneNode(!0)};r.forEach(e=>{const r=e.querySelector(".mainProductJson");if(!r)return;const c=JSON.parse(r.innerHTML);theme.visibilitySettings.checkForVisibility(c,t,function(){o(e,t)})})});function o(e,t){const r=t.template.cloneNode(!0),o=e.querySelector(".product-single__add-to-cart"),c=e.querySelector(".dbtfy-list-property-fields");if(c)c.insertAdjacentElement("beforeend",r);else{const e=document.createElement("div");e.classList.add("dbtfy-list-property-fields"),e.insertAdjacentElement("beforeend",r),o.insertAdjacentElement("beforebegin",e)}}document.querySelectorAll(".dbtfy-list-property-fields").forEach((e,t)=>{const r=e.querySelectorAll(".line-item-property__field");r.forEach((e,r)=>{const o=e.querySelectorAll("input:not([type='hidden']), textarea, select"),c=e.querySelectorAll(".cp-checkbox-group-checkbox"),i=e.querySelector(".cp-checkbox-group-hidden");c.forEach(e=>{e.addEventListener("change",()=>{const e=Array.from(c).reduce((e,t)=>t.checked?`${e}, ${t.value}`:e,"").slice(2);i.value=e})}),o.forEach((e,o)=>{const c=e.parentElement.querySelector("label");c.setAttribute("for",`${e.id}-${t}-${r}-${o}`),e.setAttribute("id",`${e.id}-${t}-${r}-${o}`)})})})}CustomizableProducts(); {%- endif -%} } function themeCustomizableProductsDestroy() { {%- if settings.dbtfy_customizable_products -%} function destroyCustomizableProducts(){const o=document.querySelector(".dbtfy-customizable_products");o&&o.remove()}destroyCustomizableProducts(); {%- endif -%} } /* end-dbtfy-customizable-products */

  /* start-dbtfy-delivery-date */  function themeDeliveryDate() { {%- if settings.dbtfy_delivery_date -%} let scriptLoaded=!1;function DeliveryDate(e){function t(){if(scriptLoaded=!0,e&&0===e.item_count&&localStorage.removeItem("deliveryDate"),!document.querySelectorAll(".dbtfy-delivery_date").length)return;const t=document.querySelectorAll(".clear-field-button"),r=document.querySelectorAll(".dd-input-date-time"),a=document.querySelectorAll(".dd-error-message"),d=document.querySelectorAll("[name='checkout']"),o={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},n=[];function i(e,t){e.length&&(t?e.forEach(e=>{e.innerHTML=theme.strings.deliveryDateWarningMessage,e.removeAttribute("hidden")}):e.forEach(e=>{e.setAttribute("hidden","hidden")}))}function l(e,t){let r=!0;return e&&!t.value&&(r=!1),r}t.forEach(e=>{e.addEventListener("click",e=>{r.forEach(e=>{const r=Boolean("true"===e.dataset.isRequiredToCheckout);e.value="",localStorage.removeItem("deliveryDate"),r&&theme.requiredToCheckoutAddons.update({name:"delivery-date",errors:!0,isChanged:!0}),t.forEach(e=>{e.setAttribute("hidden","hidden")})})})}),r.forEach(e=>{const d=Boolean("true"===e.dataset.isRequiredToCheckout),s=e&&e.dataset.excludeDays,c=s&&s.split(",").filter(e=>e).map(e=>e.trim().toLowerCase());for(const e in o)c&&c.forEach(t=>{o[e].toLowerCase().includes(t)&&n.push(+e)});!function(e,t){flatpickr(e,{enableTime:!0,minDate:"today",disable:[function(e){return t.includes(e.getDay())}]})}(e,n);let u=l(d,e);e.addEventListener("change",o=>{let n=o.target.value;u=l(d,e),n?(localStorage.setItem("deliveryDate",n),i(a),d&&theme.requiredToCheckoutAddons.update({name:"delivery-date",errors:!1,isChanged:!0}),t.forEach(e=>{e.removeAttribute("hidden")})):(localStorage.removeItem("deliveryDate"),d&&theme.requiredToCheckoutAddons.update({name:"delivery-date",errors:!0,isChanged:!0}),u||i(a,!0)),function(e){if(!r)return;r.forEach(t=>{t.value=e})}(n)}),localStorage.deliveryDate?(e.value=localStorage.deliveryDate,d&&theme.requiredToCheckoutAddons.update({name:"delivery-date",errors:!1}),t.forEach(e=>{e.removeAttribute("hidden")})):d&&theme.requiredToCheckoutAddons.update({name:"delivery-date",errors:!0})}),d.forEach(e=>{e.hasAttribute("data-delivery-date-event")||(e.addEventListener("click",t=>{const r=e.closest("form"),a=r?r.querySelector(".dd-input-date-time"):null,d=r?r.querySelectorAll(".dd-error-message"):null,o=Boolean("true"===a.dataset.isRequiredToCheckout);a&&(l(o,a)?(o&&theme.requiredToCheckoutAddons.update({name:"delivery-date",errors:!1,button:{element:e,event:t}}),i(d),jQuery.ajax({type:"POST",url:"/cart/update.js",data:`attributes[Delivery date]=${a.value}`,dataType:"json"})):(o&&theme.requiredToCheckoutAddons.update({name:"delivery-date",errors:!0,button:{element:e,event:t}}),i(d,!0),function(e,t){let r;"drawer"===theme.settings.cartType?r="#CartDrawer":"modal"===theme.settings.cartType&&(r="#CartModal");const a=$(t).closest(r),d=document.body.classList.contains("template-cart"),o=a.find(".drawer__header"),n=a.find(".drawer__inner"),i=n.find(".dbtfy-delivery_date"),l=n.find(".dbtfy-cart_countdown.sticky"),s=a.find(".ajaxcart-form"),c=i.offset()?i.offset().top:0,u=o.height()||0,h=s.offset()?s.offset().top:0,m=l.height()||0,y=n.scrollTop();if(a.hasClass("js-drawer-open")||a.hasClass("js-modal-open"))n.animate({scrollTop:c-u-h-m+y},500);else if(d){const e=$(".header-section"),t=$("#cartForm").find(".dbtfy-delivery_date"),r=document.body.classList.contains("sticky-header"),a=t.offset()?t.offset().top:0,d=r?e.height():0,o=parseInt(e.css("top")),n=15;$("html, body").animate({scrollTop:a-d-o-n},500)}}(0,e)))}),e.setAttribute("data-delivery-date-event","true"))})}scriptLoaded?t():theme.loadScript(theme.variables.datePickerPluginLink,t)}DeliveryDate(),$("body").on("ajaxCart.afterCartLoad",function(e,t){DeliveryDate(t)}),document.addEventListener("shopify:section:load",e=>{DeliveryDate()}); {%- endif -%} } function themeDeliveryDateDestroy() { {%- if settings.dbtfy_delivery_date -%} function destroyDeliveryDate(){document.querySelectorAll(".dbtfy-delivery_date").forEach(e=>{e.remove()}),document.body.classList.add("dbtfy-delivery_date-destroy")}destroyDeliveryDate(),$(document).on("shopify:section:load",function(){destroyDeliveryDate()}); {%- endif -%} } /* end-dbtfy-delivery-date */

  /* start-dbtfy-delivery-time */  function themeDeliveryTime() { {%- if settings.dbtfy_delivery_time -%} function DeliveryTime(){const e=document.querySelector(".dbtfy-delivery_time");if(!e)return;const t=e.querySelectorAll(".dt-info");if(!t.length)return;const a=theme.visibilitySettings.sortVisibilityTypes(e,".dt-info"),r=document.querySelectorAll(".featured-product-section, .product-section");for(let[e,t]of a)t.forEach(e=>{const t={visibility:e.dataset.visibilityType,tags:e.dataset.productTags,types:e.dataset.productTypes,productId:e.dataset.product,collection:e.dataset.productCollection,template:e.cloneNode(!0),minDate:e.dataset.minDate,maxDate:e.dataset.maxDate,showAsDate:e.dataset.showAsDate,dateFormat:e.dataset.timeFormat,excludeDays:e.dataset.excludeDays,showCutOff:e.dataset.showCutOff,cutOffTime:e.dataset.cutOffTime,cutOffMessage:e.dataset.cutOffMessage,timeZone:e.dataset.timeZone};r.forEach(e=>{const a=e.querySelector(".mainProductJson");if(!a)return;const r=JSON.parse(a.innerHTML);theme.visibilitySettings.checkForVisibility(r,t,function(){o(e,t)})})});function n(e,t){const a=+e.minDate,r=+e.maxDate;theme.strings.months;return function(e,t,a,r,n){const o=function(e){const t=new Date,a=e.timeZone/60;return t.getTimezoneOffset()/60-a}(r),s=function(e,t,a,r,n){const o={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},s=Boolean("true"===e.showAsDate),d=e.excludeDays&&e.excludeDays.split(",").filter(e=>e).map(e=>e.trim().toLowerCase()),i=[];for(const e in o)d&&d.forEach(t=>{o[e].toLowerCase().includes(t)&&i.push(e)});const l=(new Date).getTime(),c=new Date(l),u=new Date(l+864e5),y=new Date(l+864e7+864e5*a),f=[],m=function(e,t,a){const r=t.querySelector(".delivery_cut_off_time"),n=Boolean("true"===e.showCutOff),o=new Date;let s=o.getDate();if(n){const t=e.cutOffTime;let n,d;if(a%1!=0){const e=(Number(t.substring(0,2))-a)%1,r=60*e;n=Number(t.substring(0,2))-a-e,d=r}else n=Number(t.substring(0,2))-a,d="00";n<0?n=24+n:n>24&&(n=Number(t.substring(0,2))-a-24,s=o.getDate()+1);const i=t.substring(6),l=`${n}:${d}:${i}`,c=new Date(`${o.getFullYear()}-${o.getMonth()+1}-${s} ${l}`);return r.innerText=l,o.getTime()>=c}return!1}(e,r,n),h=new Date(y),D=m?new Date(u):new Date(c);let g=0,p=0;a=m?a+1:a;for(let r=D;r<h;r.setDate(r.getDate()+1)){const n=r.getDay(),o=i&&i.some(e=>+e===n);if(!o&&g<t&&++g===t){const e=r.getFullYear(),a=r.getMonth()+1,n=theme.strings.months.full[a],o=theme.strings.months.short[a],d=r.getDay(),i=theme.strings.weekdays.full[d],l=theme.strings.weekdays.short[d],c=r.getDate(),u={};s?(u.startYear=e,u.startDateMonthFull=n,u.startDateMonthShort=o,u.startWeekdayFull=i,u.startWeekdayShort=l,u.startDateDay=c):u.startDateDay=t,f.push(u)}if(!o&&p<a&&++p===a){const t=r.getFullYear(),a=r.getMonth()+1,n=theme.strings.months.full[a],o=theme.strings.months.short[a],d=r.getDay(),i=theme.strings.weekdays.full[d],l=theme.strings.weekdays.short[d],c=r.getDate(),u={};s?(u.endYear=t,u.endMonthFull=n,u.endMonthShort=o,u.endWeekdayFull=i,u.endWeekdayShort=l,u.endDateDay=c):u.endDateDay=+e.maxDate,f.push(u)}}return f}(r,e,t,n,o),d=Boolean("true"===r.showAsDate),[i,l]=s,c=r.dateFormat,u={"%Y":i.startYear&&i.startYear,"%y":i.startYear&&i.startYear.toString().slice(2),"%B":i.startDateMonthFull&&i.startDateMonthFull,"%b":i.startDateMonthShort&&i.startDateMonthShort,"%A":i.startWeekdayFull&&i.startWeekdayFull,"%a":i.startWeekdayShort&&i.startWeekdayShort,"%d":i.startDateDay&&i.startDateDay},y={"%Y":l.endYear&&l.endYear,"%y":l.endYear&&l.endYear.toString().slice(2),"%B":l.endMonthFull&&l.endMonthFull,"%b":l.endMonthShort&&l.endMonthShort,"%A":l.endWeekdayFull&&l.endWeekdayFull,"%a":l.endWeekdayShort&&l.endWeekdayShort,"%d":l.endDateDay&&l.endDateDay};let f=c,m=c;if(d){for(let[e,t]of Object.entries(u))f=f.replaceAll(e,t);for(let[e,t]of Object.entries(y))m=m.replaceAll(e,t)}else f=i?i.startDateDay:"",m=l?l.endDateDay:"";return f===m?f:[f,m]}(a,r,0,e,t)}function o(a,r){const o=e.dataset.position,s=function(e,t){const a=n(e,t),r=t.querySelector(".from-text-delivery_time"),o=t.querySelector(".to-text-delivery_time"),s=t.querySelector(".delivery_time_sufix"),d=t.querySelector(".delivery_time_separator");if(Array.isArray(a)){const[e,n]=a;r.innerText=e,o.innerText=n,t.removeAttribute("hidden")}else r.innerText=a,d.setAttribute("hidden","hidden"),isNaN(a)&&s.setAttribute("hidden","hidden");return t}(r,r.template.cloneNode(!0)),d=a.querySelector(".product-single[data-product-handle]");if(a.querySelectorAll(".dt-info").forEach(e=>{e.remove()}),d)if("under-addtocart-button"===o){const e=d.querySelector(".dbtfy-live_view"),a=d.querySelector(".dbtfy-sold_items"),r=e?e.dataset.position:"",n=a?a.dataset.position:"",o=d.querySelector(".dbtfy-trust_badge"),i=d.querySelector(".product-single__meta-info"),l=document.createElement("div");l.classList.add("card","card-body","spacer-auto","spacer-top","spacer-bottom"),t.forEach(e=>{l.insertAdjacentElement("beforeend",s)}),e&&"under_add_to_cart_button"===r?t.forEach(t=>{e.insertAdjacentElement("afterend",s)}):a&&"under_add_to_cart_button"===n?t.forEach(e=>{a.insertAdjacentElement("afterend",s)}):o?o.insertAdjacentElement("afterend",l):i.insertAdjacentElement("afterend",l)}else{const e=d.querySelector(".dbtfy-live_view"),a=d.querySelector(".dbtfy-sold_items"),r=e?e.dataset.position:"",n=a?a.dataset.position:"",o=d.querySelector(".price-container"),i=document.createElement("div");i.classList.add("card","card-body","spacer-auto","spacer-bottom"),t.forEach(e=>{i.insertAdjacentElement("beforeend",s)}),e&&"under_product_price"===r?t.forEach(t=>{e.insertAdjacentElement("afterend",s)}):a&&"under_product_price"===n?t.forEach(e=>{a.insertAdjacentElement("afterend",s)}):o&&o.insertAdjacentElement("afterend",i)}}}DeliveryTime(),document.addEventListener("shopify:section:load",e=>{DeliveryTime()}); {%- endif -%} } function themeDeliveryTimeDestroy() { {%- if settings.dbtfy_delivery_time -%} function destroyDeliveryTime(){document.querySelectorAll(".dbtfy-delivery_time").forEach(e=>{e.remove()}),document.body.classList.add("dbtfy-delivery_time-destroy")}destroyDeliveryTime(),$(document).on("shopify:section:load",function(){destroyDeliveryTime()}); {%- endif -%} } /* end-dbtfy-delivery-time */

  /* start-dbtfy-discount-saved */ function themeDiscountSaved(){ {%- if settings.dbtfy_discount_saved -%} function DiscountSaved(){const e=document.querySelectorAll(".dbtfy-discount_saved");function t(e){const t=e.querySelector("[id^='MainProductSelect']");if(!t)return;e.querySelectorAll(".number-discount_saved").forEach(e=>{e.classList.add("hide")});const o=t.value;if(!o)return;const c=e.querySelector(`.discount_saved-${o}`);c&&c.classList.remove("hide")}e.length&&e.forEach(e=>{const o=e.closest("[data-section-type='product-template']");o&&(t(o),o.querySelectorAll(".product-form__input, .single-option-selector__radio").forEach(e=>{e.addEventListener("change",()=>{t(o)})}))})}DiscountSaved(); {%- endif -%} } function themeDiscountSavedDestroy() { {%- if settings.dbtfy_discount_saved -%} function destroyDiscountSaved(){const e=document.querySelectorAll(".dbtfy-discount_saved"),t=document.querySelectorAll(".dbtfy-sticky_addtocart .discount-sticky-price");e.forEach(e=>{e.remove()}),t.forEach(e=>{e.remove()})}destroyDiscountSaved(); {%- endif -%} } /* end-dbtfy-discount-saved */

  /* start-dbtfy-facebook-messenger */ function themeFacebookMessengerDestroy() { {%- if settings.dbtfy_facebook_messenger -%} function destroyFacebookMessenger(){const e=document.querySelectorAll(".dbtfy-facebook_messenger");e.length&&e.forEach(e=>{e.remove()})}destroyFacebookMessenger(); {%- endif -%} } /* end-dbtfy-facebook-messenger */

  /* start-dbtfy-faq-page */ function themeFaqPage(){ {%- if settings.dbtfy_faq_page -%} function FaqPage(){var t=$(".dbtfy-faq_page");function e(){t.each(function(){var t=$(this),e=t.find(".fq-main").data("section-id"),a=[],i=t.find(".fp-item"),n=t.find(`#FaqSearch-${e}`);i.each(function(){var t=$(this),e={label:t.attr("data-question"),value:t.attr("data-question"),index:t.attr("data-index")};a.push(e)}),n.autocomplete({maxShowItems:5,source:a,search:function(t,e){$("ul.ui-autocomplete").css("max-width",`${n.outerWidth()}px`)},select:function(e,a){const i=t.find(`.fp-item[data-index="${a.item.index}"]`).find(".tab-header");theme.tabs.scroll(i)}})})}t.length&&theme.loadScript(theme.variables.jQueryUIPluginLink,()=>{theme.loadScript(theme.variables.jQueryUIAutocompletePluginLink,e)})}FaqPage(); {%- endif -%} } function themeFaqPageDestroy() { {%- if settings.dbtfy_faq_page -%} function destroyFaqPage(){const e=document.querySelector(".dbtfy-faq_page");e&&e.remove()}document.body.classList.add("dbtfy-faq_page-destroy"),destroyFaqPage(); {%- endif -%} } /* end-dbtfy-faq-page */

  /* start-dbtfy-gift-wrap */ function themeGiftWrap(){ {%- if settings.dbtfy_gift_wrap -%} async function GiftWrap(){const t=document.querySelectorAll(".dbtfy-gift_wrap");if(!t.length)return;const e=new Headers({"Content-Type":"application/json","X-Requested-With":"xmlhttprequest"});let n=!1;function a(t){fetch("/cart/update.js",{method:"POST",headers:e,body:JSON.stringify({attributes:{"Gift wrap":t}})}).then(function(t){return t.json()}).then(function(t){})}t.forEach(t=>{const r=+t.dataset.giftWrapProductId,i=+t.dataset.giftWrapVariantId,o=t.closest(".ajaxcart-form, .cart-form"),c=o?o.querySelector(`.cart-item[data-product-id='${r}']`):null,d=c?+c.dataset.line:null,s=t.querySelector(".gw-input");s&&s.addEventListener("change",t=>{n||(!function(t){t.setAttribute("disabled","disabled"),t.parentElement.classList.add("disabled")}(s),s.checked?function(t){fetch(`${theme.routes.cart_url}/add.js`,{method:"POST",credentials:"same-origin",headers:e,body:JSON.stringify({id:t,quantity:1})}).then(function(t){return t.json()}).then(function(t){theme.ajaxCart.update(),n=!1}).catch(function(t){n=!1})}(i):function(t,r){if(!t)return void function(t){t.removeAttribute("disabled"),t.parentElement.classList.remove("disabled")}(r);fetch(`${theme.routes.cart_url}/change.js`,{method:"POST",credentials:"same-origin",headers:e,body:JSON.stringify({line:t,quantity:0})}).then(function(t){return t.json()}).then(function(t){theme.ajaxCart.update(),a(""),n=!1}).catch(function(t){n=!1})}(d),n=!0)})}),function(){const t=document.querySelectorAll(".gw-message"),e=document.querySelector(".gw-message:not(:placeholder-shown)"),n=e?e.value:null;t.length&&t.forEach(e=>{e.addEventListener("input",()=>{const n=e.value;t.forEach(t=>{t.value=n})}),e.addEventListener("change",()=>{const t=e.value;a(t)}),n&&(e.value=n)})}()}GiftWrap(),$("body").on("ajaxCart.afterCartLoad",function(t,e){GiftWrap()}); {%- endif -%} } function themeGiftWrapDestroy() { {%- if settings.dbtfy_gift_wrap -%} function destroyGiftWrap(){document.querySelectorAll(".dbtfy-gift-wrap").forEach(t=>{t.remove()})}destroyGiftWrap(),$("body").on("ajaxCart.afterCartLoad",function(t,r){destroyGiftWrap()}); {%- endif -%} } /* end-dbtfy-gift-wrap */

  /* start-dbtfy-inactive-tab-message */ function themeInactiveTabMessage(){ {%- if settings.dbtfy_inactive_tab_message -%} function InactiveTabMessage(){const e=document.title,t=theme.settings.dbtfyInactiveTabFirstMessage,n=theme.settings.dbtfyInactiveTabSecondMessage?theme.settings.dbtfyInactiveTabSecondMessage:e,i=theme.decodeString(t),s=theme.decodeString(n),a=!!theme.settings.dbtfyInactiveTabSecondMessage,c=1e3*theme.settings.dbtfyInactiveTabDelay;let d=!1,o="";i&&document.addEventListener("visibilitychange",function(t){!document.hidden?(clearInterval(o),document.title=e):a?o=setInterval(function(){document.title=d?s:i,d=!d},c):document.title=i})}InactiveTabMessage(); {%- endif -%} } /* end-dbtfy-inactive-tab-message */

  /* start-dbtfy-infinite-scroll */ function themeInfiniteScroll(){ {%- if settings.dbtfy_infinite_scroll -%} function InfiniteScroll(){const n=document.querySelector(".dbtfy-infinite_scroll");n&&theme.loadScript(theme.variables.ajaxinatePluginLink,function(){const e=n.dataset.endlessType;new Ajaxinate({container:"#infiniteScrollContainer",pagination:"#infiniteScrollPagination",method:e,callback:function(){document.body.dispatchEvent(new CustomEvent("afterRecommendationLoad"))}}),document.querySelectorAll(".pagination").forEach(n=>{n.setAttribute("hidden","hidden")})})}InfiniteScroll(); {%- endif -%} } function themeInfiniteScrollDestroy() { {%- if settings.dbtfy_infinite_scroll -%} function destroyInfiniteScroll(){const e=document.querySelector(".dbtfy-infinite_scroll");e&&(e.remove(),"undefined"!=typeof Ajaxinate&&(new Ajaxinate).destroy())}destroyInfiniteScroll(); {%- endif -%} } /* end-dbtfy-instagram-feed */

  /* start-dbtfy-instagram-feed */ function themeInstagramFeed(){ {%- if settings.dbtfy_instagram_feed -%} function InstagramFeed(){document.querySelector(".dbtfy-instagram_feed")&&$("#instafeed").each(function(){var e=$(this),a=e.data("user-id"),t=e.data("access-token"),d=e.data("limit"),n=e.data("template");new Instafeed({get:"user",userId:a,accessToken:t,clientId:"c6e4c736e82345a3898a0e299daa00fb",limit:d,template:n}).run()})}InstagramFeed(); {%- endif -%} } function themeInstagramFeedDestroy() { {%- if settings.dbtfy_instagram_feed -%} function destroyInstagramFeed(){const e=document.querySelector(".dbtfy-instagram_feed");e&&e.remove()}destroyInstagramFeed(); {%- endif -%} } /* end-dbtfy-instagram-feed */

  /* start-dbtfy-inventory-quantity */ function themeInventoryQuantity(){ {%- if settings.dbtfy_inventory_quantity -%} function InventoryQuantity(){if(!document.querySelector(".dbtfy-inventory_quantity"))return;const t=document.querySelectorAll(".dbtfy-inventory_quantity:not(.sticky_inventory_quantity)");if(!t.length)return;const e=document.body.classList.contains("template-product"),n=document.querySelector(".sticky_inventory_quantity");t.forEach(t=>{t.removeAttribute("hidden");const i=t.closest(".product-single[data-product-handle]");if(!(i?i.dataset.productHandle:""))return;document.querySelectorAll(".product-form__input, .single-option-radio, .input-color_swatches").forEach(e=>{e.addEventListener("change",function(){r(t)})});const d=document.querySelector(".select-sticky_addtocart");function r(t){function e(){if(!t)return;t.hasAttribute("data-show-random-values");const e=t.closest("[data-product-handle]");if(!e)return;const n=e.querySelector(".btn--add-to-cart, .js-add-to-cart-button"),i=t.parentElement;if(n&&n.matches(":disabled"))return t.setAttribute("hidden","hidden"),void(1===i.children.length&&i.setAttribute("hidden","hidden"));const d=t.classList.contains("sticky_inventory_quantity")?document.querySelector(".select-sticky_addtocart option:checked"):null,r=e.querySelector("[id^='MainProductSelect'] option:checked"),o=d?+d.value:r?+r.value:null,u=t.querySelectorAll(".quantity-item-inventory_quantity");if(!u.length)return t.setAttribute("hidden","hidden"),null;Array.from(u).some(t=>t.classList.contains(`quantity-item-${o}-inventory_quantity`)).length?(t.removeAttribute("hidden"),i.removeAttribute("hidden")):(t.setAttribute("hidden","hidden"),1===i.children.length&&i.setAttribute("hidden","hidden")),u.forEach(e=>{if(e.classList.contains(`quantity-item-${o}-inventory_quantity`)){const n=e.querySelector(".quantity-item-less-threshold-inventory_quantity"),i=e.querySelector(".quantity-item-more-threshold-inventory_quantity"),d=e.querySelector(".quantity-item-value-inventory_quantity"),r=theme.cart.items.reduce((t,e)=>e.id===o?t+e.quantity:t,0),a=+e.dataset.thresholdQty,c=+e.dataset.originQuantity-r;c>0?(d&&(d.innerHTML=c),e.removeAttribute("hidden"),i&&(c<=a?(n.removeAttribute("hidden"),i.setAttribute("hidden","hidden")):(n.setAttribute("hidden","hidden"),i.removeAttribute("hidden")))):(e.setAttribute("hidden","hidden"),1===u.length&&t.setAttribute("hidden","hidden"))}else e.setAttribute("hidden","hidden")})}theme.cart?(e(),function(){if(!t)return;const e=t.querySelectorAll(".quantity-item-inventory_quantity");Array.from(e).some(t=>!t.hasAttribute("hidden"))?t.removeAttribute("hidden"):t.setAttribute("hidden","hidden")}()):document.addEventListener("dbtfy:cartLoaded",e)}d&&(d.addEventListener("change",()=>{e&&n&&r(n)}),document.addEventListener("stickyATCButtonStateChanged",()=>{r(n)})),r(t),e&&n&&r(n),document.addEventListener("ProductPageBuilt",()=>{r(t)}),$("body").on("ajaxCart.afterCartLoad",function(e,n){r(t)})})}InventoryQuantity(); {%- endif -%} } function themeInventoryQuantityDestroy() { {%- if settings.dbtfy_inventory_quantity -%} function destroyInventoryQuantity(){const t=document.querySelectorAll(".dbtfy-inventory_quantity"),e=document.querySelectorAll(".product-single__quantity");t.forEach(t=>{t.remove()}),e.forEach(t=>{const e=t.hasAttribute("data-quantity-enabled"),n=t.hasAttribute("data-quantity-breaks-enabled");e||n||t.remove()})}destroyInventoryQuantity(); {%- endif -%} } /* end-dbtfy-inventory-quantity */

  /* start-dbtfy-linked-options */ function themeLinkedOptions(){ {%- if settings.dbtfy_linked_options -%} function LinkedOptions(){const e={},t=document.querySelectorAll("[data-section-type='product-template'], [id^='QuickView-']");let o=[];e.arrayIncludes=function(e,t){for(let o=0;o<e.length;o++)if(e[o]===t)return!0;return!1},e.uniq=function(t){let o=[];for(n=0;n<t.length;n++)e.arrayIncludes(o,t[n])||o.push(t[n]);return o},e.optionsMap={},e.updateOptionsInSelector=function(t,n,i){let r="root",l="",c=t.querySelector(".product-form__item:nth-child(1) select.single-option-selector__radio")?"dropdown":"button";if(t.querySelector(".product-single__form--no-variants"))return;switch(e.optionsMap=o[n],i){case 1:r="root",l=(_="dropdown"===c?t.querySelector(".product-form__item:nth-child(1) select.single-option-selector__radio"):t.querySelector(".product-form__item:nth-child(1) input.single-option-selector__radio:checked")).value;break;case 2:r=(_="dropdown"===c?t.querySelector(".product-form__item:nth-child(1) select.single-option-selector__radio"):t.querySelector(".product-form__item:nth-child(1) input.single-option-selector__radio:checked")).value,l=(_="dropdown"===c?t.querySelector(".product-form__item:nth-child(2) select.single-option-selector__radio"):t.querySelector(".product-form__item:nth-child(2) input.single-option-selector__radio:checked")).value;break;case 3:r=(_="dropdown"===c?t.querySelector(".product-form__item:nth-child(1) select.single-option-selector__radio"):t.querySelector(".product-form__item:nth-child(1) input.single-option-selector__radio:checked")).value,r+=" / "+(_="dropdown"===c?t.querySelector(".product-form__item:nth-child(2) select.single-option-selector__radio"):t.querySelector(".product-form__item:nth-child(2) input.single-option-selector__radio:checked")).value,l=(_="dropdown"===c?t.querySelector(".product-form__item:nth-child(3) select.single-option-selector__radio"):t.querySelector(".product-form__item:nth-child(3) input.single-option-selector__radio:checked")).value}let s,p=t.querySelector(`.product-form__item:nth-child(${i})`),a=p.querySelector("select.single-option-selector__radio"),d=e.optionsMap[r];a?(s=a.querySelectorAll("option"),l=a.value,s.forEach(e=>{e.style.display="none",e.disabled=!0}),d&&d.forEach(e=>{(_=a.querySelector(`[value='${CSS.escape(e)}']`)).style.display="block",_.disabled=!1})):((s=p.querySelectorAll("input.single-option-selector__radio")).forEach(e=>{e.style.display="none",e.nextElementSibling.style.display="none"}),d&&d.forEach(e=>{(_=p.querySelector(`[value='${CSS.escape(e)}']`)).style.display="block",_.nextElementSibling.style.display="inline-block"})),t.querySelectorAll(`.swatch[data-option-index="${i}"] .swatch-element`).forEach(o=>{let n=o.getAttribute("data-value"),i=t.querySelector(`.input-color_swatches[value='${CSS.escape(n)}']`);d&&e.arrayIncludes(d,n)?(o.classList.remove("soldout"),o.style.display="flex",i.removeAttribute("disabled")):(o.classList.add("soldout"),o.style.display="none",i.setAttribute("disabled","disabled"))});let u=l,h=new Event("change");if(d&&!e.arrayIncludes(d,l)&&(u=d[0]),a)a.value=u,a.dispatchEvent(h);else{var _=p.querySelector(`[value='${CSS.escape(u)}']`);_.checked=!0,_.dispatchEvent(h)}},e.linkOptionSelectors=function(t,n,i){e.optionsMap={};for(let t=0;t<i.variants.length;t++){let o=i.variants[t];if(o.available){if(e.optionsMap.root=e.optionsMap.root||[],e.optionsMap.root.push(o.option1),e.optionsMap.root=e.uniq(e.optionsMap.root),i.options.length>1){let t=o.option1;e.optionsMap[t]=e.optionsMap[t]||[],e.optionsMap[t].push(o.option2),e.optionsMap[t]=e.uniq(e.optionsMap[t])}if(3===i.options.length){let t=o.option1+" / "+o.option2;e.optionsMap[t]=e.optionsMap[t]||[],e.optionsMap[t].push(o.option3),e.optionsMap[t]=e.uniq(e.optionsMap[t])}}}o.push(e.optionsMap),e.updateOptionsInSelector(t,n,1),i.options.length>1&&e.updateOptionsInSelector(t,n,2),3===i.options.length&&e.updateOptionsInSelector(t,n,3),t.querySelectorAll(".product-form__item:nth-child(1) .single-option-selector__radio, .input-color_swatches").forEach(o=>{o.addEventListener("change",function(){i.options.length>1&&e.updateOptionsInSelector(t,n,2),3===i.options.length&&e.updateOptionsInSelector(t,n,3)})}),t.querySelectorAll(".product-form__item:nth-child(2) .single-option-selector__radio").forEach(o=>{o.addEventListener("change",function(){3===i.options.length&&e.updateOptionsInSelector(t,n,3)})})};const i=[];t.forEach((e,t)=>{e.getAttribute("data-product-id")&&i.push(e)}),i.forEach(function(t,o){const n=`#ProductJson-${t.getAttribute("data-section-id")}, .mainProductJson`,i=t.querySelector(n),r=i?i.innerHTML:null;r&&e.linkOptionSelectors(t,o,JSON.parse(r))})}LinkedOptions(),document.addEventListener("QuickViewLoaded",()=>{LinkedOptions()}); {%- endif -%} } /* end-dbtfy-linked-options */

  /* start-dbtfy-mega-menu */ function themeMegaMenu(){ {%- if settings.dbtfy_mega_menu -%} function MegaMenu(){var e=$(".mm-item");function t(e,t){const a=this.slider=e,o=$(a);if(!o.length)return;const n={dots:o.data("dots"),arrows:o.data("arrows"),autoplay:o.data("autoplay"),autoplaySpeed:o.data("autoplayspeed"),slidesToShow:t||o.data("slides-to-show"),slidesToScroll:1,speed:theme.variables.transitionSpeed,responsive:[{breakpoint:767,settings:{slidesToShow:1,centerMode:!0,autoplay:!1}}]};theme.carousel.init({slider:o,slickOptions:n})}e.length&&e.each(function(){var e=$(this),a=e.data("position"),o=$(".nav-container-menu .site-nav__item").eq(a-1),n=e.data("blockid");e.insertBefore(o),t(".mm-product-carousel__"+n),t(".mm-images-container__"+n,3)})}$(document).on("shopify:section:load",function(){MegaMenu(),theme.dropdown()}),MegaMenu(); {%- endif -%} } function themeMegaMenuDestroy() { {%- if settings.dbtfy_mega_menu -%} function destroyMegaMenu(){const e=document.querySelectorAll(".dbtfy-mega_menu");e.length&&e.forEach(e=>{e.remove()})}document.body.classList.add("dbtfy-mega_menu-destroy"),destroyMegaMenu(),$(document).on("shopify:section:load",function(){destroyMegaMenu()}); {%- endif -%} } /* end-dbtfy-mega-menu */

  /* start-dbtfy-menu-bar */ function themeMenuBarDestroy() { {%- if settings.dbtfy_menu_bar -%} function destroyMenuBars(){const e=document.querySelectorAll(".dbtfy-menu_bar");e.length&&e.forEach(e=>{e.remove()})}destroyMenuBars(); {%- endif -%} } /* end-dbtfy-menu-bar */

  /* start-dbtfy-minimum-order */ function themeMinimumOrderDestroy() { {%- if settings.dbtfy_minimum_order -%} function destroyMinimumOrder(){const e=document.querySelectorAll(".dtfy-minimum_order"),r=document.querySelectorAll(".btn--checkout");e.length&&e.forEach(e=>{e.remove()}),r.length&&r.forEach(e=>{e.disabled=!1})}destroyMinimumOrder(); {%- endif -%} } /* end-dbtfy-minimum-order */

  /* start-dbtfy-newsletter-popup */ function themeNewsletterPopup(){ {%- if settings.dbtfy_newsletter_popup -%} function NewsletterPopup(){var t=$(".dbtfy-newsletter_popup");t.length&&theme.loadScript(theme.variables.jQueryExitIntentPluginLink,function(){var e=t.data("timeout"),n=t.data("time-trigger"),o=t.data("exit-intent"),s=t.data("scroll-depth"),i=t.data("page-scroll-percentage"),a=$(".np-success")[0],c=$(".np-apply-coupon"),u=$(".np-floating-bar"),r=$("#NewsletterPopup"),d=$("#input-newsletter_popup"),l=parseInt(t.data("discount")),p=t.data("discount-code"),m=t.data("discount-type");theme.variables.bpSmall?d.removeAttr("data-focus"):d.attr("data-focus","");function f(){sessionStorage.newsletterPopupClosed||theme.modal.open(r)}function g(t){if(p&&m&&l){const e={name:p,type:m,amount:l},n=sessionStorage.getItem("discount")?JSON.parse(sessionStorage.getItem("discount")):null;if(n)switch(n.type){case"%":n.amount<l&&sessionStorage.setItem("discount",JSON.stringify(e));break;case"$":const o=t.total_price/100,s=100*n.amount/o;s<l&&sessionStorage.setItem("discount",JSON.stringify(e))}else sessionStorage.setItem("discount",JSON.stringify(e))}}if(c.click(function(){ShopifyAPI.getCart(g)}),$(r).on("modal.close",function(){sessionStorage.setItem("newsletterPopupClosed","true")}),$(window).blur(function(t){$("iframe").is(":focus")||f()}),u.on("click",function(){sessionStorage.removeItem("newsletterPopupClosed"),f()}),a){const t=$(a).find(".np-reward-apply");f(),t.on("click",function(){const t=a.dataset.discountName,e=a.dataset.discountType,n=+a.dataset.discountAmount;t&&e&&n&&(theme.discountCode.addDiscount(t,e,n),theme.discountCode.init())})}else if(n&&setTimeout(function(){f()},e),o&&($.exitIntent("enable"),$(document).bind("exitintent",function(){f()})),s){var w=$(window).height(),h=$(document).height();$(window).on("scroll",function(){var t=$(window).scrollTop(),e=h-w,n=Math.floor(t/e*100),o=parseInt(i);n>o&&f()})}})}"/challenge"!==window.location.pathname&&NewsletterPopup(); {%- endif -%} } function themeNewsletterPopupDestroy() { {%- if settings.dbtfy_newsletter_popup -%} function destroyNewsletterPopup(){const e=document.querySelectorAll(".dbtfy-newsletter_popup");e.length&&e.forEach(e=>{e.remove()})}document.body.classList.add("dbtfy-newsletter_popup-destroy"),destroyNewsletterPopup(),$(document).on("shopify:section:load",function(){destroyNewsletterPopup()}); {%- endif -%} } /* end-dbtfy-newsletter-popup */

  /* start-dbtfy-order-feedback */ function themeOrderFeedback(){ {%- if settings.dbtfy_order_feedback -%} function OrderFeedback(){const e=".dbtfy-order_feedback";if(!document.querySelectorAll(e).length)return;const t=document.querySelectorAll(".order-feedback"),r=document.querySelectorAll('[name="checkout"], [name="goto_pp"], [name="goto_gc"]'),o={feedbackSelectError:".of-error",otherInputElement:".order-feedback-other",otherInputError:".of-other-error",otherFormWrapper:".other-form-wrapper"};function a(t){let r=t.dataset.otherField;const a=t.closest(e).querySelector(o.otherFormWrapper);r&&t.value===r?a&&a.removeAttribute("hidden"):a&&a.setAttribute("hidden","hidden")}function d(t,r){let o=t.closest(e);0===t.value.length?(t.classList.add("error"),o.querySelector(r).removeAttribute("hidden")):t.classList.contains("error")&&(t.classList.remove("error"),o.querySelector(r).setAttribute("hidden","hidden"))}t.forEach(r=>{let n=r.closest(e).querySelector(o.otherInputElement);const c=r.getAttribute("name"),s=n?n.getAttribute("name"):null,u=Boolean("true"===r.dataset.selectRequired),l=r.dataset.otherField;r.addEventListener("change",function(){const e=r.value,s=r.options[r.selectedIndex];a(r),t.forEach(e=>{if(e!==r){e.selectedIndex=r.selectedIndex;let t=e.dataset.selectRequired;a(e),t&&d(e,o.feedbackSelectError)}}),u&&(d(r,o.feedbackSelectError),""===r.value||r.value===l&&n&&""===n.value?theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!0,isChanged:!0}):theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!1,isChanged:!0})),localStorage.setItem("orderFeedback",e),jQuery.ajax({type:"POST",url:"/cart/update.js",data:`${c}=${e}`,dataType:"json",success:function(e){if(!s.hasAttribute("data-is-other-option")){const e=r.querySelector("[data-is-other-option]");if(e){const t=e.dataset.name;jQuery.post("/cart/update.js",`${t}=`)}$(o.otherInputElement).val("")}}})}),n&&n.addEventListener("input",function(){d(n,o.otherInputError),0!==n.value.length&&s?(jQuery.post("/cart/update.js",`${s}=${n.value}`),u&&theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!1,isChanged:!0})):u&&theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!0,isChanged:!0})}),localStorage.orderFeedback?(r.value=localStorage.getItem("orderFeedback"),a(r),u&&(r.value===l&&n&&""===n.value?theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!0}):theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!1}))):u&&theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!0}),jQuery.post("/cart/update.js",`${c}=${r.value}`)}),$(o.otherInputElement).keyup(function(){$(o.otherInputElement).val($(this).val())}),r.forEach(function(t){t.hasAttribute("data-has-feedback-click")||(t.addEventListener("click",function(r){const a=t.closest("form"),n=a?a.querySelector(e):null;if(n&&Boolean("true"===n.dataset.selectRequired)){const n=a.querySelector(".order-feedback"),c=n.closest(e).querySelector(o.otherInputElement),s=n.dataset.otherField;let u=!0;if(0===n.value.length&&(d(n,o.feedbackSelectError),u=!1),s&&n.value===s&&c&&0===c.value.length&&(d(c,o.otherInputError),u=!1),u)theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!1,button:{element:t,event:r}});else{let o;theme.requiredToCheckoutAddons.update({name:"order-feedback",errors:!0,button:{element:t,event:r}}),"drawer"===theme.settings.cartType?o="#CartDrawer":"modal"===theme.settings.cartType&&(o="#CartModal");const a=$(t).closest(o),d=document.body.classList.contains("template-cart"),n=a.find(".drawer__header"),c=a.find(".drawer__inner"),s=c.find(e),u=c.find(".dbtfy-cart_countdown.sticky"),l=a.find(".ajaxcart-form"),i=s.offset()?s.offset().top:0,h=n.height()||0,f=l.offset()?l.offset().top:0,m=u.height()||0,p=c.scrollTop(),b=15;if(a.hasClass("js-drawer-open")||a.hasClass("js-modal-open"))c.animate({scrollTop:i-h-f-m+p-b},500);else if(d){const t=$(".header-section"),r=$("#cartForm").find(e),o=document.body.classList.contains("sticky-header"),a=r.offset()?r.offset().top:0,d=o?t.height():0,n=parseInt(t.css("top"));$("html, body").animate({scrollTop:a-d-n-b},500)}}}}),t.setAttribute("data-has-feedback-click","true"))})}OrderFeedback(),$("body").on("ajaxCart.afterCartLoad",function(e,t){OrderFeedback()}); {%- endif -%} } function themeOrderFeedbackDestroy() { {%- if settings.dbtfy_order_feedback -%} function destroyOrderFeedbacks(){document.querySelectorAll(".dbtfy-order_feedback").forEach(e=>{e.remove()})}destroyOrderFeedbacks(),$("body").on("ajaxCart.afterCartLoad",function(e,r){destroyOrderFeedbacks()}); {%- endif -%} } /* end-dbtfy-order-feedback */

  /* start-dbtfy-order-tracking */ function themeOrderTracking(){ {%- if settings.dbtfy_order_tracking -%} function OrderTracking(){const t=document.getElementById("ot-form"),e=document.getElementById("ot-num"),n=document.getElementById("ot-btn");t&&theme.loadScript(theme.variables.trackingPluginLink,function(){t.addEventListener("submit",function(t){t.preventDefault();const i=e.value;if(""===i)return alert("Enter your number."),theme.loadingState.destroy(n),void setTimeout(()=>{n.removeAttribute("disabled")},0);n.setAttribute("disabled","disabled"),n.classList.add("btn--loading");try{!function(t){YQV5.trackSingle({YQ_ContainerId:"ot-container",YQ_Height:560,YQ_Fc:"0",YQ_Lang:"en",YQ_Num:t})}(i)}finally{setTimeout(function(){n.removeAttribute("disabled"),n.classList.remove("btn--loading")},1500)}})})}OrderTracking(); {%- endif -%} } function themeOrderTrackingDestroy() { {%- if settings.dbtfy_order_tracking -%} function destroyOrderTracking(){const r=document.querySelector(".dbtfy-order_tracking");r&&r.remove()}destroyOrderTracking(); {%- endif -%} } /* end-dbtfy-order-tracking */

  /* start-dbtfy-page-transition */ function themePageTransition() { {%- if settings.dbtfy_page_transition -%} function PageTransition(){const e=document.querySelector(".dbtfy-page_transition"),t="pt-hidden";function n(){setTimeout(()=>{e.classList.add(t)},600)}e&&(e.classList.add(t),window.addEventListener("beforeunload",i=>{const s=i.target.activeElement.href;e.classList.remove(t),s&&(s.includes("mailto:")||s.includes("tel:"))&&n()}),window.addEventListener("pageshow",function(e){e.persisted&&n()}))}PageTransition(); {%- endif -%} } function themePageTransitionDestroy() { {%- if settings.dbtfy_page_transition -%} function destroyPageTransition(){const e=document.querySelector(".dbtfy-page_transition");e&&e.remove()}destroyPageTransition(); {%- endif -%} } /* end-dbtfy-page-transition */

  /* start-dbtfy-page-speed-booster */ function themePageSpeedBooster() { {%- if settings.dbtfy_page_speed_booster -%} function PageSpeedBooster(){theme.loadScript(theme.variables.speedBoosterPluginLink)}PageSpeedBooster(); {%- endif -%} } /* end-dbtfy-page-speed-booster */

  /* start-dbtfy-pricing-table */ function themePricingTableDestroy() { {%- if settings.dbtfy_pricing_table -%} function destroyPricingTable(){const e=document.querySelectorAll(".dbtfy-pricing_table");e.length&&e.forEach(e=>{e.remove()})}destroyPricingTable(); {%- endif -%} } /* end-dbtfy-pricing-table */

  /* start-dbtfy-product-bullet-points */ function themeProductBulletPoints() { {%- if settings.dbtfy_product_bullet_points -%} function ProductBulletPoints(){const t=document.querySelector(".dbtfy-product_bullet_points");if(!t)return;const e=t.querySelectorAll(".pbp-point");if(!e.length)return;const n=document.querySelectorAll(".product-single[data-product-handle]"),i={};if(n.length&&n.forEach(t=>{const n=t.querySelector(".pbp-points"),o=t.querySelector(".product-info-JSON"),c=o?JSON.parse(o.innerHTML):null;if(n&&n.remove(),!c)return;const r=c.handle;e.forEach(t=>{const e={visibility:t.dataset.visibilityType,tags:t.dataset.visibilityProductTags,types:t.dataset.visibilityProductTypes,productId:t.dataset.visibilityProduct,collection:t.dataset.visibilityCollection};theme.visibilitySettings.checkForVisibility(c,e,function(){!function(t,e){i[t]?i[t].includes(e)||i[t].push(e):i[t]=[e]}(r,t)})})}),!Object.keys(i).length)return;const o=t.dataset.position,c=t.dataset.alignment,r=t.dataset.displayType;for(const[t,e]of Object.entries(i)){const n=document.querySelector(`.product-single[data-product-handle="${t}"]`),i=n.querySelector(".product-wl-qc-buttons-wrapper");if(!n)return;let s=null;const l=[];switch(o){case"under-product-price":s=i||n.querySelector(".price-container");break;case"under-addtocart-button":s=n.querySelector(".product-single__add-to-cart")}if(!s)return;const d=document.createElement("ul");d.classList.add("pbp-points","inline-list",...l),"left"===c?d.classList.add("text-left"):d.classList.add("text-center"),"newline"===r&&(d.style.display="grid"),e.forEach(t=>{d.insertAdjacentElement("beforeend",t.cloneNode(!0))}),s.insertAdjacentElement("afterend",d)}}ProductBulletPoints(),document.addEventListener("shopify:section:load",t=>{ProductBulletPoints()}); {%- endif -%} } function themeProductBulletPointsDestroy() { {%- if settings.dbtfy_product_bullet_points -%} function destroyProductBulletPoints(){const t=document.querySelector(".dbtfy-product_bullet_points");t&&t.remove()}destroyProductBulletPoints(); {%- endif -%} } /* end-dbtfy-product-bullet-points */

  /* start-dbtfy-product-image-crop */ function themeProductImageCropDestroy() { {%- if settings.dbtfy_product_image_crop -%} document.body.classList.add("dbtfy-product_image_crop-destroy"); {%- endif -%} } /* end-dbtfy-product-image-crop */

  /* start-dbtfy-product-swatches */ function themeProductSwatches() { {%- if settings.dbtfy_product_swatches -%} function ProductSwatches(){const e=document.querySelector(".dbtfy-product_swatches");if(!e)return;const t=e.dataset.showInProductGrid;document.querySelectorAll(".product-section, .featured-product-section").forEach(t=>{const c=+t.querySelector(".product-single").dataset.productId,r=e.cloneNode(!0),n=r.querySelectorAll(".ps-group"),d=theme.settings.enableHistoryState;if(o(n,c,r,t,!1),!d){const e=window.location.pathname.split("?");window.history.replaceState({},"",e[0])}});const c=document.querySelectorAll(".grid-product, .list-product");function o(e,t,c,o,r,n){if(e.length){e.forEach(e=>{const c=e.querySelectorAll("li");let o=!1;c.forEach(e=>{if(+e.dataset.productId===t){const t=e.dataset.productOption,c=e.closest(".ps-group").querySelector(".variant-label-option-value");o=!0,e.classList.add("active"),c&&(c.innerHTML=t)}}),(!o||c.length<=1)&&e.remove()}),(o?o.querySelectorAll(".product_swatches_container"):[]).forEach(e=>{e.remove()});const d=o?o.querySelector(".pbp-points"):null,s=o?o.querySelector(".price-container"):null,a=document.createElement("div");if(a.classList.add("product_swatches_container"),a.insertAdjacentElement("afterbegin",c),s){s.nextElementSibling.classList.contains("pbp-points")&&d?d.insertAdjacentElement("afterend",a):s.insertAdjacentElement("afterend",a)}c.hidden=!1,a.hidden=!1,r&&(n?(n.insertAdjacentElement("afterend",a),c.classList.add("list-version")):(o&&o.insertAdjacentElement("afterbegin",a),c.classList.add("card-version")))}}"true"===t&&c.forEach(t=>{const c=t.classList.contains("empty-state"),r=+t.dataset.productId,n=t.querySelector(".grid-product__meta, .list-product__details-wrapper"),d=t.querySelector(".list-product__price-wrap"),s=e.cloneNode(!0),a=s.querySelectorAll(".ps-group");c||o(a,r,s,n,!0,d)})}ProductSwatches(),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{ProductSwatches()}),document.addEventListener("shopify:section:load",e=>{ProductSwatches()}),$("body").on("afterRecommendationLoad",function(e){ProductSwatches()}); {%- endif -%} } function themeProductSwatchesDestroy() { {%- if settings.dbtfy_product_swatches -%} function destroyProductSwatches(){const e=document.querySelector(".dbtfy-product_swatches");e&&e.remove()}destroyProductSwatches(),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{destroyProductSwatches()}); {%- endif -%} } /* end-dbtfy-product-swatches */

  /* start-dbtfy-product-tabs */ function themeProductTabs() { {%- if settings.dbtfy_product_tabs -%} function ProductTabs(){const e=document.querySelector(".dbtfy-product_tabs");if(!e)return;const t=e.dataset.displayType,o=theme.visibilitySettings.sortVisibilityTypes(e,".product-tab"),r=document.querySelectorAll(".featured-product-section, .product-section"),c="vertical"===t;if(c){document.querySelectorAll(".horizontal-tab").forEach(e=>{e.remove()})}else{document.querySelectorAll(".vertical-tab").forEach(e=>{e.remove()})}document.querySelectorAll(".dbtfy-product-tab-box").forEach(e=>{e.classList.remove("horizontal-tab-box")});for(let[e,t]of o)t.forEach(e=>{const t={visibility:e.dataset.visibilityType,tags:e.dataset.productTags,types:e.dataset.productTypes,productId:e.dataset.product,collection:e.dataset.productCollection,template:e.cloneNode(!0),blockType:e.dataset.blockType};r.forEach(e=>{const o=e.querySelector(".mainProductJson");if(!o)return;const r=JSON.parse(o.innerHTML);theme.visibilitySettings.checkForVisibility(r,t,function(){i(e,t,r)})})});function a(e,t,o,r,c){const a=r,i=c;if("description"===t.blockType&&e.classList.contains("featured-product-section")){const e=document.createElement("div");e.classList.add("tab-content","rte"),e.innerHTML=`${o.description.replace("<p>[split_description]</p>","").replace("[split_description]","")}`,a.replaceChild(e,i)}}function i(t,o,r){const i=o.template,n=t.querySelectorAll(".dbtfy-product-tab-box"),s=t.querySelector(".horizontal-tabs-body");if(c){const e=i.querySelector(".card-body"),c=e.querySelector(".tab-content");a(t,o,r,e,c)}n.forEach(n=>{const l=n.querySelector(`#${CSS.escape(i.id)}`);!!l&&n.contains(l)||n.insertAdjacentHTML("beforeend",i.outerHTML),c?s&&s.remove():(!function(t,o,r,i){const n=o.querySelectorAll(".product-tab"),s=document.createElement("div"),l=t.querySelector(".horizontal-tabs-body");s.classList.add("horizontal-tabs-body"),l||o.insertAdjacentHTML("afterend",s.outerHTML);n.forEach((o,n)=>{const s=o.id,l=e.querySelector(`#ProductTabs [data-id="${s}"]`),d=t.querySelector(".horizontal-tabs-body"),u=d.querySelector(`[data-id="${s}"]`);if(!u){!function(e,t,o,r){if(c)return;const a=r.querySelector(".horizontal-tab-active");a&&a.id!==o.dataset.id&&(o.setAttribute("hidden","hidden"),e.classList.remove("horizontal-tab-active"))}(o,0,l,t);const e=l.querySelector(".card-body"),n=l.querySelector(".tab-content");a(t,r,i,e,n),d.insertAdjacentHTML("beforeend",l.outerHTML)}}),o.classList.add("horizontal-tab-box")}(t,n,o,r),document.querySelectorAll(".horizontal-tab-box .product-tab").forEach(e=>{e.hasAttribute("has-click-event")||(e.addEventListener("click",()=>{const t=e.closest(".dbtfy-product-tab-box"),o=e.parentElement.nextElementSibling,r=o.querySelectorAll(".tab"),c=o.querySelector(`[data-id='${e.id}']`),a=t.querySelectorAll(".product-tab");a.forEach(e=>{e.classList.remove("horizontal-tab-active")}),r.forEach(e=>{e.setAttribute("hidden","hidden")}),c.removeAttribute("hidden"),e.classList.add("horizontal-tab-active")}),e.setAttribute("has-click-event","true"))}))}),theme.tabs.init(),e.querySelectorAll(".product-tab").forEach(e=>{e.remove()})}r.forEach(e=>{e.querySelectorAll(".product-tab").forEach(t=>{const o=t.dataset.blockType,r=t.classList.contains("vertical-tab");"reviews"===o&&function(e,t,o){const r=e.classList.contains("product-section")?document.querySelector(".review-widget"):e.querySelector(".review-widget"),c=e.querySelector(".review-badge"),a=c?c.cloneNode(!0):null;let i,n;r&&r.classList.remove("section-border");if(o)i=t.querySelector(".tab-body .tab-content"),n=t.querySelector("button");else{const e=t.dataset.index;i=t.parentElement.nextElementSibling.querySelector(`[data-index='${e}'] .tab-body .tab-content`)}a&&a.classList.remove("spacer-bottom");const s=n&&n.querySelector(".review-badge");s&&n&&a&&n.replaceChild(a,s);if(i&&r){const e=r.closest(".product-single-reviews-wrapper");i.insertAdjacentElement("afterbegin",r),e.remove()}}(e,t,r)})})}ProductTabs(),document.addEventListener("shopify:section:load",e=>{ProductTabs()}); {%- endif -%} } function themeProductTabsDestroy() { {%- if settings.dbtfy_product_tabs -%} function destroyProductTabs(){const t=document.querySelectorAll(".dbtfy-product_tabs");t.length&&t.forEach(t=>{t.remove()})}destroyProductTabs(); {%- endif -%} } /* end-dbtfy-product-tabs */

  /* start-dbtfy-quantity-breaks */ function themeQuantityBreaks() { {%- if settings.dbtfy_quantity_breaks -%} function QuantityBreaks(){const e=document.querySelector(".dbtfy-quantity_breaks");if(!e)return;const t={singleBreakText:e.dataset.singleBreakText,moreDiscountBeforeQuantityText:e.dataset.moreDiscountBeforeQuantityText,moreDiscountAfterQuantityText:e.dataset.moreDiscountAfterQuantityText,moreDiscountAfterPercentageText:e.dataset.moreDiscountAfterPercentageText,highestDiscountText:e.dataset.highestDiscountText,singleBreakPriceType:e.dataset.singleBreakPriceType,productSectionSelector:"[data-section-type='product-template']",cartBreakSelector:".qb-cart_break",productBreaksContainerSelector:".qb-product_breaks_container",productBreaksSelector:".qb-product_breaks",productBreakSelector:".qb-product_break",quantitySelector:".qb-quantity",moneyFormat:theme.strings.moneyFormat},n={add:function(e){const t=this.getStoredQuantityBreaks();t.length?t.some(t=>t.productId===e.productId)||(t.push(e),sessionStorage.setItem("breaks-discounts",JSON.stringify(t))):sessionStorage.setItem("breaks-discounts",JSON.stringify([e]))},getStoredQuantityBreaks:function(){const e=sessionStorage.getItem("breaks-discounts");if(!e)return[];const t=JSON.parse(e);return"object"!=typeof t?[]:t}};function o(){const n=theme.cart;n&&(r(),function(n){const o=e.querySelectorAll(t.cartBreakSelector);if(!o.length)return;const r=n.total_price;let a=n.item_count,c=document.createElement("div"),i=document.createElement("div"),u=document.createElement("div");c.classList.add("dbtfy","dbtfy-quantity_breaks","qb-cart_break"),i.classList.add("card","card-body-xs","text-center","qb-alert"),u.classList.add("qb-text"),c.appendChild(i),i.appendChild(u);let d=Array.from(o).map(e=>{const t=+e.dataset.range,n=e.dataset.discountCode,o=+e.dataset.discountAmount,r=e.dataset.discountType;return{name:n,type:r,amount:o,range:t}}),l=Array.from(d,e=>e.range).sort((e,t)=>e-t),y=l.reduce((e,t)=>Math.abs(t-a)<Math.abs(e-a)?t:e);function m(e,n){let o;o="$"===e.type?`<span class="money">${theme.Currency.formatMoney(100*e.amount,t.moneyFormat)}</span>`:`${e.amount}%`,(t.moreDiscountBeforeQuantityText||t.moreDiscountAfterQuantityText||t.moreDiscountAfterPercentageText)&&(u.innerHTML=`${t.moreDiscountBeforeQuantityText} <strong class="text-secondary">${n}</strong> ${t.moreDiscountAfterQuantityText} <strong class="text-secondary">${o}</strong> ${t.moreDiscountAfterPercentageText}</div>`)}let p=y-a,f=d.find(e=>e.range===y);if(0===l.indexOf(y)&&a<y)m(f,p);else if(l.indexOf(y)===l.length-1)t.highestDiscountText&&(u.innerHTML=`<div class="qb-highest-discount-text">${t.highestDiscountText}</div>`);else{let e=l.indexOf(y)+1;for(;e;){let t=l[e],o=d.find(e=>e.range===t);if(e++,!t)break;let r=theme.discountCode.getStoredDiscounts(),c=theme.discountCode.getMostValuableDiscount(r,n);const i=s(c,n),u=s(o,n);if(t&&c&&u>i){let e=t-a;m(o,e);break}}}o.forEach((e,t)=>{const o=+e.dataset.range,c=e.dataset.discountCode,i=+e.dataset.discountAmount,u=e.dataset.discountType,d={name:c,type:u,amount:i};0===a?theme.discountCode.removeAllDiscountsByName(c,{role:"cart-break",needUpdate:!1}):theme.discountCode.removeDiscount(c,{role:"cart-break",needUpdate:!1});const l=theme.discountCode.getStoredDiscounts(),y=theme.discountCode.getMostValuableDiscount(l,n),m=s(y,n),p=s(d,n),f=(document.querySelector("#CartDrawer .qb-product_break_remains, #cartForm .qb-product_break_remains"),theme.settings.dbtfyGiftWrap),b=+e.dataset.giftWrapProductId,h=n.items.some(e=>e.product_id===b);if(f&&h&&a--,p>m&&p<=r&&a>=o){theme.discountCode.addDiscount(c,u,i,{role:"cart-break"})}}),function(){const e=document.querySelector("#CartDrawer .cart__total-price-info"),t=document.querySelector("#CartModal .cart__total-price-info"),n="drawer"===theme.settings.cartType?e:t,o=document.querySelector("#cartForm .cart__total-price-info"),r=document.querySelector(".qb-alert-drawer-wrapper");r&&r.remove();if(n&&!n.parentElement.querySelector(".qb-cart_break")){const e=c.querySelector(".qb-text");e&&e.innerHTML&&n.insertAdjacentHTML("afterend",c.outerHTML);const t=document.querySelector("#CartDrawer .qb-cart_break"),o=document.querySelector("#CartModal .qb-cart_break"),r="drawer"===theme.settings.cartType?t:o;if(r){const e=r.querySelector(".qb-alert");e&&""!==e.innerHTML.trim()&&r.classList.add("qb-alert-drawer-wrapper","spacer-top")}}const a=document.querySelector(".qb-alert-wrapper");a&&a.remove();if(o&&!o.parentElement.querySelector(".qb-cart_break")){const e=c.querySelector(".qb-text");e&&e.innerHTML&&o.insertAdjacentHTML("afterend",c.outerHTML);const t=document.querySelector("#cartForm .qb-cart_break");if(t){const e=t.querySelector(".qb-alert");e&&""!==e.innerHTML.trim()&&t.classList.add("qb-alert-wrapper","spacer-top-sm","spacer-bottom")}}}();const b=$("#currency-list-header[name='dbtfy-custom-currencies']"),h=theme.strings.shopCurrency;b.length&&Currency.convertAll(h,Currency.currentCurrency,".qb-alert .money");theme.discountCode.init()}(n),r())}function r(){!function(){const n=e.querySelectorAll(t.productBreaksSelector);if(!n.length)return;const o=`\n            <div class="qb-product_breaks_container">\n              ${Array.from(n).reduce((e,n)=>{const o=n.querySelectorAll(t.productBreakSelector);if(!o.length)return e;const r={showOnProductPage:n.dataset.showOnProductPage,visibilityType:n.dataset.visibilityType,tags:n.dataset.tags,types:n.dataset.types,productId:n.dataset.productId,collection:n.dataset.collection},a=Array.from(o).reduce((e,n)=>{const o=n.dataset.range,r=n.dataset.discountCode,a=n.dataset.discountType,c=n.dataset.discountAmount;return e+`\n                <div class="radio qb-quantity">\n                  <input type="radio"\n                         id="Quantity-break"\n                         name="quantity"\n                         value="${o}"\n                         data-discount-code="${r}"\n                         data-discount-type="${a}"\n                         data-discount-amount="${c}">\n\n                  <label for="Quantity-break">\n                    ${t.singleBreakText}\n                  </label>\n                </div>\n              `},""),c=`\n              <div class="qb-product_breaks"\n                   data-show-on-product-page="${r.showOnProductPage}"\n                   data-visibility-type="${r.visibilityType}"\n                   data-tags="${r.tags}"\n                   data-types="${r.types}"\n                   data-product-id="${r.productId}"\n                   data-collection="${r.collection}">\n\n                <div class="radio qb-quantity">\n                  <input type="radio"\n                         id="Quantity-break"\n                         name="quantity"\n                         value="1">\n\n                  <label for="Quantity-break">\n                    ${t.singleBreakText}\n                  </label>\n                </div>\n\n                ${a}\n              </div>\n            `;return e+c},"")}\n            </div>\n          `;e.insertAdjacentHTML("beforeend",o)}();const o=document.querySelectorAll(t.productSectionSelector);o.length&&(function(n){const o=theme.visibilitySettings.sortVisibilityTypes(e,t.productBreaksSelector);for(let[e,t]of o)t.forEach(e=>{const t={showOnProductPage:e.dataset.showOnProductPage,visibility:e.dataset.visibilityType,tags:e.dataset.tags,types:e.dataset.types,productId:e.dataset.productId,collection:e.dataset.collection,template:e.cloneNode(!0)};n.forEach(e=>{const n=e.querySelector(".product-info-JSON");if(!n)return;const o=JSON.parse(n.innerHTML);theme.visibilitySettings.checkForVisibility(o,t,function(){a(e,t)})})});const r=e.querySelector(t.productBreaksContainerSelector);r&&r.remove()}(o),document.querySelectorAll(t.productBreaksSelector).forEach((e,n)=>{const o=e.querySelectorAll(t.quantitySelector);o.forEach((e,t)=>{const o=e.querySelector("label"),r=e.querySelector("input");o.setAttribute("for",`${r.id}-${n}-${t}`),r.setAttribute("id",`${r.id}-${n}-${t}`),0===t&&r.setAttribute("checked","checked")})}),function(){const e=document.querySelectorAll(".product-form__input, .single-option-radio, .input-color_swatches"),t=document.querySelectorAll(".product-single__form--no-variants");e.length&&e.forEach(e=>{e.addEventListener("change",function(e){c(e)}),c({target:e})}),t.forEach(e=>{c({target:e})})}(),function(e){if(!e.length)return;e.forEach(e=>{const o=e.querySelector(".product-single__form");o&&o.addEventListener("submit",()=>{!function(e,o){if(!e||!o)return;const r=+e.dataset.productId,a=o.querySelectorAll(t.quantitySelector),c=Array.from(a).map(e=>{const t=e.querySelector("input"),n=+t.value,o=t.dataset.discountCode,r=t.dataset.discountType,a=+t.dataset.discountAmount;if(1!==n)return{breakCount:n,discount:{code:o,type:r,amount:a}}}).filter(e=>e),s={productId:r,breaks:c};n.add(s)}(e,o)})})}(o)),function(){const e=theme.cart,o=n.getStoredQuantityBreaks();o.forEach(t=>{const n=t.productId,o=t.breaks,r=e.items.reduce((e,t)=>t.product_id===n?e+t.quantity:e,0),a=o.slice().reverse().find(e=>e.breakCount<=r);a?theme.discountCode.removeAllDiscountsByName("",{productId:n,breakCount:{checkFunction:function(e){return e.breakCount>a.breakCount}}}):theme.discountCode.removeAllDiscountsByName("",{productId:n});const c=a?a.discount:null,i=theme.discountCode.getStoredDiscounts(),u=theme.discountCode.getMostValuableDiscount(i,e),d=s(u,e),l=s(c,e),y=e.total_price,m=o.find(t=>{const n=s(t.discount,e);return t.breakCount>r&&n>d});if(l>d)c&&l<=y&&theme.discountCode.addDiscount(c.code,c.type,c.amount,{role:"quantity-breaks",productId:n,breakCount:a.breakCount});else{const e=c?null:m;e&&theme.discountCode.removeDiscount(e.discount.code,{role:"quantity-breaks",productId:n,breakCount:e.breakCount})}theme.discountCode.init()}),o.forEach(n=>{const o=n.productId,r=n.breaks,a=e.items.reduce((e,t)=>t.product_id===o?e+t.quantity:e,0),c=r.slice().reverse().find(e=>e.breakCount<=a),i=c?c.discount:null,u=theme.discountCode.getStoredDiscounts(),d=theme.discountCode.getMostValuableDiscount(u,e),l=s(d,e),y=s(i,e),m=e.total_price,p=r.find(t=>{const n=s(t.discount,e);return t.breakCount>a&&n>l}),f=p?p.discount:null,b=s(f,e);let h='<div class="dbtfy dbtfy-quantity_breaks qb-product_break"><div class="card card-body-xs text-center qb-alert qb-product_break_remains">';if(y>l)h+=b>y&&b<=m?q():S();else{const t=theme.discountCode.getStoredDiscounts(),n=theme.discountCode.getMostValuableDiscount(t,e),o=s(n,e);h+=b>o&&b<=m?q():S()}function q(){let e="";const n=p.breakCount-a;let o=`${f.amount}%`;return"$"===f.type&&(o=`<span class="money">${theme.Currency.formatMoney(100*f.amount,t.moneyFormat)}</span>`),(t.moreDiscountBeforeQuantityText||t.moreDiscountAfterQuantityText||t.moreDiscountAfterPercentageText)&&(e+=`<div class="qb-text">${t.moreDiscountBeforeQuantityText} <strong class="text-secondary">${n}</strong> ${t.moreDiscountAfterQuantityText} <strong class="text-secondary">${o}</strong> ${t.moreDiscountAfterPercentageText}</div>`),e}function S(){return t.highestDiscountText&&l>0?`<div class="qb-highest-discount-text">${t.highestDiscountText}</div>`:""}h+="</div></div>",e.items.forEach(e=>{const t=e.product_id;if(t!==o)return;const n=document.querySelectorAll(`.cart__row[data-product-id='${t}']`);n.forEach(e=>{const t=e.closest(".ajaxcart-form"),n=e.querySelectorAll(".dbtfy-quantity_breaks");if(n.forEach(e=>{e.remove()}),e.insertAdjacentHTML("afterbegin",h),t){const t=e.querySelector(".qb-product_break");t&&t.classList.add("spacer-bottom")}})});const g=$("#currency-list-header[name='dbtfy-custom-currencies']"),k=theme.strings.shopCurrency;g.length&&Currency.convertAll(k,Currency.currentCurrency,".qb-alert .money"),theme.discountCode.init()})}()}function a(e,n){if(!e)return;const o=e.querySelectorAll(t.productBreaksSelector),r=document.querySelector(".quantity-sticky_addtocart");r&&r.remove(),o.forEach(e=>{e.remove()});const a=e.querySelector(".product-single__quantity"),c=a.querySelector(".qty-container");for(a.querySelector(".inline-label").removeAttribute("hidden");c.firstChild;)c.removeChild(c.lastChild);const s=n.template.cloneNode(!0),i=document.body.classList.contains("template-product");"true"!==s.dataset.showOnProductPage&&i?c.setAttribute("hidden","hidden"):c.removeAttribute("hidden"),c.insertAdjacentElement("beforeend",s)}function c(e){const n=e.target.closest(t.productSectionSelector);if(!n)return;const o=n.querySelector("[id^='MainProductSelect']").querySelector("option:checked"),r=o?+o.value:null,a=n.querySelectorAll(t.quantitySelector),c=n.querySelector(".mainProductJson");if(!c)return;const s=JSON.parse(c.innerHTML).variants.find(e=>e.id===r);if(s){a.forEach(e=>{const n=e.querySelector("label"),o=e.querySelector("input"),r=+o.value,a=o.dataset.discountType,c=+o.dataset.discountAmount,i=!!t.singleBreakPriceType&&t.singleBreakPriceType.includes("single");let u=s.price,d=s.compare_at_price,l=t.singleBreakText,y="";if(l=l.replace("_COUNT_",r),r>1)switch(d=i?u:u*r,a){case"$":i?(y=`<span class="money">${theme.Currency.formatMoney(100*c/r,t.moneyFormat)}</span>`,u=d-100*c/r):(y=`<span class="money">${theme.Currency.formatMoney(100*c,t.moneyFormat)}</span>`,u=d-100*c);break;case"%":u=d-d/100*c,y=`${c}%`}if(r>1&&!c||u<0||d<0?e.setAttribute("data-invalid-value","true"):e.removeAttribute("data-invalid-value"),l=d?l.replace("_PRICE_",`\n                  <span class="qb-price text-money">\n                    <span class="qb-discounted-price on-sale text-sale" data-price="${u}">\n                      <span class="money">\n                        ${theme.Currency.formatMoney(u,t.moneyFormat)}\n                      </span>\n                    </span>\n\n                    <span class="qb-original-price text-strike text-muted" data-compare-price="${d}">\n                      <span class="money">\n                        ${theme.Currency.formatMoney(d,t.moneyFormat)}\n                      </span>\n                    </span>\n                  </span>\n                `):l.replace("_PRICE_",`\n                  <span class="qb-price text-money">\n                    <span class="money">\n                      ${theme.Currency.formatMoney(u,t.moneyFormat)}\n                    <span>\n                  </span>\n                `),r>1){const e=theme.strings.saveLabel.replace("\{\{ saved_amount \}\}",y);l=l.replace("_SAVED_AMOUNT_",`\n                  <span class="badge qb-saved-amount">\n                    ${e}\n                  </span>\n                `)}else l=l.replace("_SAVED_AMOUNT_","");n.innerHTML=l}),function(){theme.cart?e():document.addEventListener("dbtfy:cartLoaded",e);function e(){const e=document.querySelectorAll(t.productBreaksSelector);e.forEach(e=>{const o=e.querySelectorAll(t.quantitySelector),r=e.closest(t.productSectionSelector);if(!r)return;const a=r.querySelector("[id^='MainProductSelect']"),c=a.querySelector("option:checked"),s=+c.value,i=r.querySelector(".mainProductJson");if(!i)return;const u=JSON.parse(i.innerHTML),d=u.variants.find(e=>e.id===s);if(!d)return;const l=theme.cart,y=+c.dataset.inventoryQuantity||0,m=c.dataset.inventoryPolicy,p=l.items.reduce((e,t)=>t.id===s?e+t.quantity:e,0),f=y-p;d.available?"shopify"===d.inventory_management&&"continue"!==m?n(f,o):n(30,o):n(0,o)})}function n(e,t){t.forEach(t=>{const n=t.querySelector("input"),o=+n.value;1===o&&(n.checked=!0),o>e||t.hasAttribute("data-invalid-value")?t.setAttribute("hidden","hidden"):t.removeAttribute("hidden")})}}();var i=$("#currency-list-header[name='dbtfy-custom-currencies']"),u=theme.strings.shopCurrency;i.length&&Currency.convertAll(u,Currency.currentCurrency,".qb-price .money, .qb-saved-amount .money")}}function s(e,t,n){const o=n||t.items_subtotal_price;let r=0;if(e)switch(e.type){case"$":r=100*e.amount;break;case"%":r=o*(e.amount/100)}return r}!function(){function n(){theme.isCartLoaded?o():document.addEventListener("dbtfy:cartLoaded",()=>{o()})}n(),document.addEventListener("dbtfy:upsellPopupLoaded",()=>{n()}),$("body").on("ajaxCart.afterCartLoad",function(e,t){n()}),setTimeout(()=>{const n=document.querySelectorAll("[data-testid]");n.forEach(n=>{const o=n.closest(t.productSectionSelector);if(!o)return;let r=o.querySelector(t.productBreaksSelector);r&&n.addEventListener("click",r=>{r.preventDefault(),r.stopPropagation();const a=o.querySelector(".product-single__form"),c=a.querySelectorAll(t.quantitySelector),i=o.querySelector("[id^='MainProductSelect']"),u=i.querySelector("option:checked"),d=u?+u.value:null;let l="";c.forEach(e=>{const t=e.querySelector("input:checked");t&&(l={variantID:d,quantity:+t.value,discountCode:t.dataset.discountCode,discountType:t.dataset.discountType,discountAmount:t.dataset.discountAmount})}),function(n,o){if(!o)return;let r=`${window.location.origin}/cart/${o.variantID}:${o.quantity}?locale=${Shopify.locale}`;const a=n.dataset.testid.toLowerCase();if(o.discountCode){theme.discountCode.addDiscount(o.discountCode,o.discountType,o.discountAmount),function(n,o){const r=o.closest(".product-single[data-product-handle]").querySelector(`.qb-quantity input[value='${n}']`),a=r?+r.parentElement.querySelector(".qb-discounted-price").dataset.price:0,c=e.querySelectorAll(t.cartBreakSelector),i=Array.from(c).filter(e=>n>=e.dataset.range);let u=null,d=0;if(i.forEach(e=>{const t=s({type:e.dataset.discountType,amount:+e.dataset.discountAmount},theme.cart,a);t>d&&(u=e,d=t)}),!u)return;const l={quantity:+u.dataset.range,discountCode:u.dataset.discountCode,discountType:u.dataset.discountType,discountAmount:u.dataset.discountAmount};n>=l.quantity&&theme.discountCode.addDiscount(l.discountCode,l.discountType,l.discountAmount)}(o.quantity,n);const a=theme.discountCode.getStoredDiscounts(),c=theme.discountCode.getMostValuableDiscount(a,theme.cart);c&&(r=`${r}&discount=${c.name}`),theme.discountCode.removeAllDiscounts()}["amazon","apple","google","paypal","shop","venmo"].forEach(e=>{let t=!1;if(a.includes(e))t=!0;else{const o=n.querySelector("[role='button']");o&&o.dataset.testid.toLowerCase().includes(e)&&(t=!0)}if(t){const t=`${e}_pay`;r=`${r}&payment=${t}`}}),window.location.assign(r)}(n,l)},!0)})},1e3)}(),$(document).on("shopify:section:load",function(e){"dbtfy-quantity-breaks"===e.detail.sectionId&&sessionStorage.removeItem("breaks-discounts")})}QuantityBreaks(),document.addEventListener("shopify:section:load",e=>{QuantityBreaks()}); {%- endif -%} } function themeQuantityBreaksDestroy() { {%- if settings.dbtfy_quantity_breaks -%} function destroyQuantityBreaks(){const t=document.querySelectorAll(".dbtfy-quantity_breaks"),e=document.querySelectorAll(".product-single__quantity");t.length&&t.forEach(t=>{t.remove()}),e.length&&e.forEach(t=>{const e=t.hasAttribute("data-quantity-enabled"),a=t.hasAttribute("data-inventory-quantity-enabled");e||a||t.remove()})}document.body.classList.add("dbtfy-quantity_breaks-destroy"),destroyQuantityBreaks(); {%- endif -%} } /* end-dbtfy-quantity-breaks */

  /* start-dbtfy-quick-compare */ function themeQuickCompare() { {%- if settings.dbtfy_quick_compare -%} function QuickCompare(){if(!document.querySelectorAll(".dbtfy-quick_compare").length)return;const e=document.querySelector("#quickCompareModal"),t=e.querySelector(".modal-body"),o=document.querySelector(".qc-floating-btn"),c=o.querySelectorAll(".material-icons-outlined"),r={localStorageName:"quickCompare",activeClass:"qc-active",addButtons:".qc-add-btn",quickCompareCounts:".qc-count",noItems:document.querySelectorAll(".qc-no-item"),quickCompareTable:document.querySelectorAll(".qc-table"),bubbleIcons:document.querySelectorAll(".qc-icon-bubble"),itemRemoveButton:document.querySelector(".qc-item-remove-btn"),smallIconClass:"qc-icon",quickCompareButtonText:".qc-btn-text"};function a(){var e=document.querySelectorAll("iframe");Array.prototype.forEach.call(e,e=>{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo"}),"*")})}function l(){const e=m();if(!e||!e.length)return s(0),void n(r.bubbleIcons,!1);const t=i(e,!0);theme.fetchProductMarkup({template:"quick-compare",productHandles:t},e=>{s(Object.entries(e).reduce((e,[t,o])=>o.includes("<!doctype html>")?e:e+1,0)),n(r.bubbleIcons,!0,"flex")})}function n(e,t,o){e.length&&e.forEach(e=>{e&&(e.style.display=t?o||"block":"none")})}function i(e,t){const o=e.filter(e=>!!e);if(o&&o.length)o.forEach(e=>{if(t){document.querySelectorAll(`${r.addButtons}[data-product-handle="${e}"]`).forEach(e=>{const t=e.getAttribute("data-remove-from-quick-compare-text");e.classList.add(r.activeClass),e.classList.contains(r.smallIconClass)||(e.querySelector(r.quickCompareButtonText).innerText=t),e.setAttribute("aria-label",t),e.setAttribute("title",t)})}});else{document.querySelectorAll(`${r.addButtons}`).forEach(e=>{const t=e.getAttribute("data-add-to-quick-compare-text");e.classList.remove(r.activeClass),e.setAttribute("aria-label",t),e.setAttribute("title",t)})}return o}function s(e){const t=document.querySelectorAll(r.quickCompareCounts);t.length&&t.forEach(t=>{t.innerHTML=e})}function u(l){const s=m();s&&s.length?(n(r.noItems,!1),n(r.quickCompareTable,!0,"table")):(n(r.noItems,!0),n(r.quickCompareTable,!1));const u=s.filter(e=>!!e),p=new DOMParser;if(!u.length){return l&&theme.modal.open(e),void i(m(),!1)}l&&(n(c,!1),theme.loadingState.init(o)),theme.fetchProductMarkup({template:"quick-compare",productHandles:u},i=>{const s=Object.keys(i).map(e=>{return p.parseFromString(i[e],"text/html").querySelector(".table-column")});t.querySelectorAll(".qc-table tr").forEach(e=>{e.querySelectorAll("[class*='data-cell']").forEach(e=>{e.remove()})}),s.length&&s.forEach(e=>{!function(e,t){const o=document.querySelector(".qc-table tbody"),c=o.querySelector(".images-row"),r=o.querySelector(".title-row"),a=o.querySelector(".price-row"),l=o.querySelector(".type-row"),n=o.querySelector(".vendor-row"),i=o.querySelector(".collections-row"),s=o.querySelector(".tags-row"),u=o.querySelector(".description-row"),d=e&&e.querySelector(".product-images-data-cell"),m=e&&e.querySelector(".product-title-data-cell"),p=e&&e.querySelector(".product-price-data-cell"),q=e&&e.querySelector(".product-type-data-cell"),S=e&&e.querySelector(".product-vendor-data-cell"),f=e&&e.querySelector(".product-collections-data-cell"),y=e&&e.querySelector(".product-tags-data-cell"),b=e&&e.querySelector(".product-description-data-cell");d&&c&&c.append(d),m&&r&&r.append(m),p&&a&&a.append(p),q&&l&&l.append(q),S&&n&&n.append(S),f&&i&&i.append(f),y&&s&&s.append(y),b&&u&&u.append(b)}(e)}),theme.modal.init(),document.dispatchEvent(new CustomEvent("dbtfy:quickCompareLoaded",{detail:{isClickedFromQuickCompareModal:!0}})),l&&(theme.modal.open(e),theme.loadingState.destroy(o),n(c,!0)),e.querySelectorAll(".product-images-data-cell").forEach(e=>{!function(e){if(!e)return;const t=e.querySelector(".qc-slick-image");if(!t)return;const o=e.querySelectorAll(".qc-slick-thumbnails"),c=e.querySelector(".qc-featured-image"),r=c?+c.dataset.index:0,l={slidesToShow:4,slidesToScroll:1,dots:!1,arrows:!0,focusOnSelect:!0,swipeToSlide:!0,infinite:!1,speed:theme.variables.transitionSpeed,asNavFor:$(t),adaptiveHeight:!1},n={slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0,focusOnSelect:!1,swipeToSlide:!1,infinite:!1,speed:theme.variables.transitionSpeed,adaptiveHeight:!0,asNavFor:$(o)};theme.carousel.init({slider:$(o),slickOptions:l}),theme.carousel.init({slider:$(t),slickOptions:n,goToSlide:r}),$(t).on("afterChange",function(e,t,o){a()}),$(o).on("afterChange",function(e,t,o){a()})}(e);const t=e.querySelector(".qc-item-remove-btn");t&&t.addEventListener("click",function(){const e=this.dataset.productHandle;theme.loadingState.init(this),d(!1,e),document.querySelectorAll(`${r.addButtons}[data-product-handle="${e}"]`).forEach(e=>{const t=e.getAttribute("data-add-to-quick-compare-text");e.classList.remove(r.activeClass),e.classList.contains(r.smallIconClass)||(e.querySelector(r.quickCompareButtonText).innerText=t),e.setAttribute("aria-label",t),e.setAttribute("title",t)})})})})}function d(e,t){let o=m();e?o?o.push(t):o=[t]:o=o.filter(e=>e!==t),function(e){localStorage.setItem(r.localStorageName,e)}(o=JSON.stringify(o)),l(),u(!1)}function m(){const e=localStorage.getItem(r.localStorageName);return e?JSON.parse(e):[]}(function(){const e=document.querySelectorAll(r.addButtons);e&&e.length&&e.forEach(e=>{const t=e.hasAttribute("data-has-click-event");t||(e.addEventListener("click",()=>{const t=e.dataset.productHandle,o=e.classList.contains(r.activeClass),c=!o,a=e.getAttribute("data-add-to-quick-compare-text"),l=e.getAttribute("data-remove-from-quick-compare-text");if(!t)return;const n=document.querySelectorAll(`${r.addButtons}[data-product-handle="${t}"]`);n.forEach(e=>{o?(e.classList.remove(r.activeClass),e.setAttribute("aria-label",a),e.setAttribute("title",a),e.classList.contains(r.smallIconClass)||(e.querySelector(r.quickCompareButtonText).innerText=a)):(e.classList.add(r.activeClass),e.setAttribute("aria-label",l),e.setAttribute("title",l),e.classList.contains(r.smallIconClass)||(e.querySelector(r.quickCompareButtonText).innerText=l))}),d(c,t)}),e.setAttribute("data-has-click-event","true"))})})(),l(),o&&!o.hasAttribute("has-click-event")&&(o.addEventListener("click",function(){u(!0)}),o.setAttribute("has-click-event","true"))}QuickCompare(),$("body").on("afterRecommendationLoad",function(e){QuickCompare()}),document.addEventListener("shopify:section:load",e=>{QuickCompare()}),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{QuickCompare()}); {%- endif -%} } function themeQuickCompareDestroy() { {%- if settings.dbtfy_quick_compare -%} function destroyQuickCompare(){const o=document.querySelectorAll(".dbtfy-quick_compare");o.length&&o.forEach(o=>{o.remove()})}document.body.classList.add("dbtfy-quick_compare-destroy"),destroyQuickCompare(),$("body").on("afterRecommendationLoad",function(o){destroyQuickCompare()}),document.addEventListener("shopify:section:load",o=>{destroyQuickCompare()}); {%- endif -%} } /* end-dbtfy-quick-compare */

  /* start-dbtfy-quick-view */ function themeQuickView() { {%- if settings.dbtfy_quick_view -%} function QuickView(){if(!document.querySelector(".dbtfy-quick_view"))return;const e=theme.strings.addToCart,t=theme.strings.unavailable,i=theme.strings.soldOut,a=theme.strings,n=document.getElementById("QuickViewContainer"),r=document.querySelectorAll(".qv-icon");r.length&&r.forEach(r=>{const s=r.hasAttribute("data-has-click-event");s||(r.addEventListener("click",()=>{const s=r.dataset.productHandle;s&&(theme.loadingState.init(r),theme.fetchProductMarkup({template:"quick-view",productHandles:s},c=>{const o=c[s];for(;n.firstChild;)n.removeChild(n.firstChild);n.insertAdjacentHTML("afterbegin",o);const d=document.querySelector(`#QuickView-${s}`);d&&(theme.modal.init(),theme.modal.open(d),theme.loadingState.destroy(r),theme.ajaxCart.init(),theme.loadingState.initForm(),function(e){if(!e)return;const t=e.querySelector(".qv-slick-image");if(!t)return;const i=e.querySelectorAll(".qv-slick-thumbnails"),a=e.querySelector(".qv-featured-image"),n=a?+a.dataset.index:0,r={slidesToShow:5,slidesToScroll:1,dots:!1,arrows:!0,focusOnSelect:!0,swipeToSlide:!0,infinite:!1,speed:theme.variables.transitionSpeed,asNavFor:$(t)},s={slidesToShow:1,slidesToScroll:1,dots:!1,arrows:!0,focusOnSelect:!1,swipeToSlide:!1,infinite:!1,speed:theme.variables.transitionSpeed,adaptiveHeight:!0,asNavFor:$(i)};theme.carousel.init({slider:$(i),slickOptions:r}),theme.carousel.init({slider:$(t),slickOptions:s,goToSlide:n})}(d),function(n){const r=n.querySelectorAll(".qv-select");if(!r.length)return;const s=n.querySelector(".qv-slick"),c=n.querySelector(".qv-master-select"),o=n.querySelector(".qv-price"),d=n.querySelector(".qv-price-compare"),u=n.querySelector(".qv-quantity-wrapper"),l=u?u.querySelector(".qty-input"):null,m=n.querySelector(".qv-addtocart-button"),y=m.querySelector(".btn__add-to-cart-text"),h=n.querySelector(".qv-details");r.forEach(v=>{v.addEventListener("change",()=>{u&&(theme.ProductQuantities.setMaxQuantity(u,c,l),theme.ProductQuantities.checkQuantity(u,c,l));let v=theme.cart;function q(){const u=Array.from(r).map(e=>e.value),q=c.querySelector(`option[data-variant="${CSS.escape(u.join(""))}"]`);if(q){const t=+q.value,r=q.dataset.available,c=+q.dataset.inventoryQuantity||0,u=q.dataset.inventoryPolicy,b=q.dataset.inventoryManagement,S=v.items.reduce((e,i)=>i.id===t?e+i.quantity:e,0),k=q.dataset.imageId,L=+q.dataset.inventoryQuantity,Q=Boolean(q.dataset.inventoryQuantity),g=q.dataset.price,w=q.dataset.priceCompare,C=n.querySelector(`.qv-image-${k}`),A=C?+C.dataset.slickIndex:null;function f(){y.innerHTML=e,m.classList.remove("disabled"),m.removeAttribute("disabled"),h.classList.remove("variant-soldout")}function p(){y.innerHTML=i,m.classList.add("disabled"),m.setAttribute("disabled","disabled"),h.classList.add("variant-soldout")}if(o.innerHTML=`<span class="money">${g}</span>`,h.classList.remove("variant-unavailable"),w?(d.classList.remove("hide"),d.innerHTML=`<span class="money">${w}</span>`,o.setAttribute("aria-label",a.salePrice),o.classList.add("on-sale","text-sale")):(d.classList.add("hide"),d.innerHTML=" ",o.classList.remove("on-sale","text-sale"),o.setAttribute("aria-label",a.regularPrice)),q.selected=!0,q.hasAttribute("disabled")?p():"true"===r?"shopify"===b&&"continue"!==u?S<c?f():p():f():p(),k&&Number.isInteger(A)&&s&&$(s).slick("slickGoTo",A),l){const e=+l.value;Q&&L>=1&&(l.setAttribute("max",L),l.value=Math.min(e,L))}}else y.innerHTML=t,m.classList.add("disabled"),m.setAttribute("disabled","disabled"),h.classList.add("variant-unavailable");var b=$("#currency-list-header[name='dbtfy-custom-currencies']"),S=theme.strings.shopCurrency;b.length&&(Currency.convertAll(S,Currency.currentCurrency,".qv-price .money"),Currency.convertAll(S,Currency.currentCurrency,".qv-price-compare .money"))}v?q():theme.isCartLoaded?(v=theme.cart,q()):document.addEventListener("dbtfy:cartLoaded",()=>{v=theme.cart,q()})}),v.dispatchEvent(new Event("change"))})}(d),function(e){const t=e.querySelector(".qv-quantity-wrapper");if(!t)return;const i=e.querySelector(".qv-master-select"),a=t.querySelector(".qty-input");theme.ProductQuantities.setMaxQuantity(t,i,a),theme.ProductQuantities.setVariantQuantities(t,i,a),theme.ProductQuantities.checkQuantity(t,i,a),t&&t.querySelectorAll("button").forEach(e=>{e.addEventListener("click",e=>{theme.ProductQuantities.checkQuantity(t,i,a)})}),$("body").on("ajaxCart.afterCartLoad",function(){theme.ProductQuantities.setVariantQuantities(t,i,a)}),a&&a.addEventListener("keyup",function(){theme.ProductQuantities.checkQuantity(t,i,a)}),a&&a.addEventListener("keydown",function(){theme.ProductQuantities.checkQuantity(t,i,a)}),a&&a.addEventListener("keypress",function(){theme.ProductQuantities.checkQuantity(t,i,a)})}(d),theme.productMediaZoom(),$("body").on("ajaxCart.afterCartLoad",function(e,t){theme.modal.close(d)}),document.dispatchEvent(new CustomEvent("QuickViewLoaded")))}))}),r.setAttribute("data-has-click-event","true"))})}QuickView(),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{QuickView()}),$("body").on("afterRecommendationLoad",function(e){QuickView()}),$(document).on("shopify:section:load",function(e){QuickView()}); {%- endif -%} } function themeQuickViewDestroy() { {%- if settings.dbtfy_quick_view -%} function destroyQuickView(){const e=document.querySelectorAll(".dbtfy-quick_view");e.length&&e.forEach(e=>{e.remove()})}document.body.classList.add("dbtfy-quick_view-destroy"),destroyQuickView(),$("body").on("afterRecommendationLoad",function(e){destroyQuickView()}); {%- endif -%} } /* end-dbtfy-quick-view */

  /* start-dbtfy-recently-viewed */ function themeRecentlyViewed(){ {%- if settings.dbtfy_recently_viewed -%} async function RecentlyViewed(){const e=document.querySelector(".dbtfy-recently_viewed");if(!e)return;const t=+e.dataset.productsLimit,r=e.dataset.rootUrl,n=r.length>1?r:"",c=e.querySelector(".rv-floating-bar"),o=e.querySelector(".rv-floating-bar-products"),i=e.querySelector(".rv-section"),a=e.querySelector(".rv-section-products"),d=document.querySelector(".product-section [data-section-type='product-template']"),u=d?d.dataset.productHandle:"",l=p().filter(e=>e!==u).slice(0,t),s=await async function(e){if(!e||!e.length)return"";const t=e.map(e=>fetch(`${n}/products/${e}?view=recently-viewed`));return await Promise.all(t).then(async e=>Promise.all(e.map(e=>e.text()))).then(e=>e)}(l),f=function(e){if(!e||!e.length)return[];return e.map(e=>{const t=(new DOMParser).parseFromString(e,"text/html"),r=t.querySelector(".rv-floating-bar-product");return r})}(s);f.length&&(f.forEach(e=>{o&&o.insertAdjacentElement("beforeend",e)}),c&&c.removeAttribute("hidden"));const m=function(e){if(!e||!e.length)return[];return e.map(e=>{const t=(new DOMParser).parseFromString(e,"text/html"),r=t.querySelector(".rv-section-product .grid-product");return r})}(s);function p(){const e=localStorage.getItem("recently-viewed-products");return e?JSON.parse(e):[]}m.length&&(m.forEach(e=>{a&&e&&a.insertAdjacentElement("beforeend",e)}),i&&i.removeAttribute("hidden"),theme.ProductGridSlider(e)),function(e){if(!e)return;const t=p();t.includes(e)||t.unshift(e);localStorage.setItem("recently-viewed-products",JSON.stringify(t))}(u),theme.ajaxCart.init(),document.dispatchEvent(new CustomEvent("dbtfy:addedRecentlyViewedProduct"))}RecentlyViewed(); {%- endif -%} } function themeRecentlyViewedDestroy() { {%- if settings.dbtfy_recently_viewed -%} function destroyRecentlyViewed(){const e=document.querySelectorAll(".dbtfy-recently_viewed");e.length&&e.forEach(e=>{e.remove()})}destroyRecentlyViewed(); {%- endif -%} } /* end-dbtfy-recently-viewed */

  /* start-dbtfy-sales-countdown */ function themeSalesCountdown(){ {%- if settings.dbtfy_sales_countdown -%} function SalesCountdown(){const t=document.querySelector(".dbtfy-sales-countdown-templates");if(!t)return;const e=t.querySelectorAll(".dbtfy-sales_countdown"),o=document.querySelectorAll(".grid-product, .list-product"),n=document.querySelectorAll(".featured-product-section, .product-section"),s=t.dataset.textDays,a=t.dataset.textHours,c=t.dataset.textMinutes,d=t.dataset.textSeconds,r=new Map;r.set("all",[]),r.set("collection",[]),r.set("type",[]),r.set("tag",[]),r.set("product",[]),e.forEach(t=>{const e=t.dataset.visibility;if(r.has(e)){const o=r.get(e);o.push(t),r.set(e,o)}});for(let[t,e]of r)e.forEach(t=>{const e={action:t.dataset.action,visibility:t.dataset.visibility,showInProductGrid:t.dataset.showInProductGrid,tags:t.dataset.tag,types:t.dataset.type,productId:t.dataset.product,collection:t.dataset.collection,template:t.cloneNode(!0),countdownId:t.dataset.countdownId,dataDate:t.dataset.date,timeHours:+t.dataset.hours,timeMins:+t.dataset.minutes,timeSeconds:"59"};n.forEach(t=>{const o=t.querySelector(".mainProductJson");o&&i(JSON.parse(o.innerHTML),t,e)}),"true"===e.showInProductGrid&&o.forEach(t=>{const o=t.querySelector(".productCardJson");if(!o)return;const n=JSON.parse(o.innerHTML);n&&i(n,t,e)}),u(e)});function i(t,e,o){if(t.price<t.compare_at_price){const n=t.collections,s=n.length&&n.some(t=>t.handle===o.collection),a=t.tags.map(t=>t.toLowerCase()),c=o.tags.split(",").filter(t=>t).map(t=>t.trim().toLowerCase()),d=a.some(t=>c.includes(t)),r=t.type.toLowerCase(),i=o.types.split(",").filter(t=>t).map(t=>t.trim().toLowerCase());"all"===o.visibility?l(e,o,t):"product"===o.visibility&&t.id===+o.productId?l(e,o,t):"collection"===o.visibility&&s?l(e,o,t):"tag"===o.visibility&&d?l(e,o,t):"type"===o.visibility&&i.includes(r)&&l(e,o,t)}}function l(t,e,o){const n=e.template,s=+o.first_available_variant_compare_at_price,a=t.classList.contains("grid-product"),c=t.classList.contains("list-product");("reload"!==e.action||e.timeHours||e.timeMins)&&(n.hidden=o.price>s,t.querySelectorAll(".dbtfy-sales_countdown").forEach(t=>t.remove()),t.classList.contains("empty-state")||(a||c?(n.classList.remove("text-small"),e.showInProductGrid&&n.classList.add("text-small"),c&&n.classList.add("spacer-bottom"),t.querySelector(".grid-product__price-wrap, .list-product__price-wrap").insertAdjacentHTML("afterend",n.outerHTML)):t.querySelectorAll(".dbtfy-product-sales-countdown-box").forEach(t=>{n.classList.remove("spacer-bottom-sm"),t.classList.contains("main-product-block")&&n.classList.add("spacer-bottom-sm"),t.insertAdjacentHTML("beforeend",n.outerHTML)})))}function u(t){const e=document.querySelectorAll(".dbtfy-sales_countdown"),o=Array.from(e).filter(e=>e.dataset.countdownId===t.countdownId);let n=Array.from(document.querySelectorAll(".days-sales_countdown")).filter(e=>e.closest(`.${t.countdownId}`)),r=Array.from(document.querySelectorAll(".hours-sales_countdown")).filter(e=>e.closest(`.${t.countdownId}`)),i=Array.from(document.querySelectorAll(".minutes-sales_countdown")).filter(e=>e.closest(`.${t.countdownId}`)),l=Array.from(document.querySelectorAll(".seconds-sales_countdown")).filter(e=>e.closest(`.${t.countdownId}`)),u="",m="";!function(){if(""!==t.dataDate&&"reload"!==t.action)u=`${t.dataDate} ${t.timeHours}:${t.timeMins}:${t.timeSeconds}`;else if(sessionStorage.hasOwnProperty(t.countdownId))u=sessionStorage.getItem(t.countdownId);else{const e=new Date,o=e.getTime(),n=o+36e5*t.timeHours+6e4*t.timeMins;u=new Date(n)}""!==t.dataDate&&"reload"!==t.action||sessionStorage.setItem(t.countdownId,u);m=new Date(u).getTime()}();let f=setInterval(p,1e3);function p(){const e=(new Date).getTime(),u=m-e,p=Math.floor(u/864e5),y=Math.floor(u%864e5/36e5),h=Math.floor(u%36e5/6e4),w=Math.floor(u%6e4/1e3);p<=0?n.forEach(t=>{t.hidden=!0}):n.forEach(t=>{t.textContent=p+s,t.hidden=!1}),p<=0&&y<=0?r.forEach(t=>{t.hidden=!0}):r.forEach(t=>{t.textContent=y+a,t.hidden=!1}),p<=0&&y<=0&&h<=0?i.forEach(t=>{t.hidden=!0}):i.forEach(t=>{t.textContent=h+c,t.hidden=!1}),l.forEach(t=>{t.textContent=w+d}),u<0&&(clearInterval(f),"message"===t.action?o.forEach(t=>{let e=t.querySelector(".dbtfy-sales_countdown_message");e?(e.hidden=!1,t.querySelector(".SalesCountdown").hidden=!0):t.hidden=!0}):o.forEach(t=>{t.hidden=!0}))}p(),document.addEventListener("variantChanged",p)}var m=document.querySelectorAll(".single-option-selector__radio"),f=[];m.forEach(t=>{const e=t.closest("[data-section-type='product-template'], [data-section-type='quick-view-template']"),o=e.dataset.sectionId,n=e.querySelector(`#ProductJson-${o}`);n&&(f[o]=JSON.parse(n.innerHTML),t.addEventListener("change",()=>{let t=0,n=0,s=e.querySelector("[id^='MainProductSelect']"),a=null,c=!1,d=+s.value;(f[o]?f[o].variants:[]).forEach(e=>{d===e.id&&(a=e,t=e.price,n=e.compare_at_price,c=e.available)});const r=e.querySelector(".dbtfy-sales_countdown");r&&(n&&c?r.removeAttribute("hidden"):r.setAttribute("hidden","hidden"),document.dispatchEvent(new CustomEvent("variantChanged")))}))})}document.addEventListener("shopify:section:select",t=>{for(const t in sessionStorage)t.includes("dbtfy-countdown")&&sessionStorage.removeItem(t)}),SalesCountdown(),$("body").on("afterRecommendationLoad",function(t){SalesCountdown()}),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{SalesCountdown()}),$(document).on("shopify:section:load",function(t){SalesCountdown()}); {%- endif -%} } function themeSalesCountdownDestroy() { {%- if settings.dbtfy_sales_countdown -%} function destroySalesCountdown(){const o=document.querySelectorAll(".dbtfy-sales_countdown");o.length&&o.forEach(o=>{o.remove()})}destroySalesCountdown(),$("body").on("afterRecommendationLoad",function(o){destroySalesCountdown()}),$(document).on("shopify:section:load",function(){destroySalesCountdown()}); {%- endif -%} } /* end-dbtfy-sales-countdown */

  /* start-dbtfy-shop-protect */ function themeShopProtect() { {%- if settings.dbtfy_shop_protect -%} function ShopProtect(){var t=theme.settings.dbtfyShopProtectImage,e=theme.settings.dbtfyShopProtectDrag,o=theme.settings.dbtfyShopProtectTextProduct,n=theme.settings.dbtfyShopProtectTextArticle,c=theme.settings.dbtfyShopProtectCollection;function i(){t&&$("img").on("contextmenu",function(t){return!1})}function d(){e&&$("img").mousedown(function(t){t.preventDefault()})}setTimeout(function(){i(),d()},1e3),o&&$(".product-single__description, .qv-description, .tab-content").addClass("dbtfy-shop_protect-text"),n&&$(".article-section, .blog-section").addClass("dbtfy-shop_protect-text"),c&&($("#sortBy option[value='best-selling']").remove(),"?sort_by=best-selling"===window.location.search&&window.location.replace("/collections")),$("body").on("ajaxCart.afterCartLoad",function(t,e){i(),d()})}ShopProtect(),document.addEventListener("QuickViewLoaded",()=>{ShopProtect()}),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{ShopProtect()}); {%- endif -%} } /* end-dbtfy-shop-protect */

  /* start-dbtfy-size-chart */ function themeSizeChart(){ {%- if settings.dbtfy_size_chart -%} function SizeChart(){const e=document.querySelector(".dbtfy-size_chart");if(!e)return;if(!e.querySelectorAll(".sc-container").length)return;const t=theme.visibilitySettings.sortVisibilityTypes(e,".sc-container"),o=document.querySelectorAll(".featured-product-section, .product-section");for(let[e,c]of t)c.forEach(e=>{const t={visibility:e.dataset.visibilityType,tags:e.dataset.productTags,types:e.dataset.productTypes,productId:e.dataset.product,collection:e.dataset.productCollection,template:e.cloneNode(!0)};o.forEach(e=>{const o=e.querySelector(".mainProductJson");if(!o)return;const c=JSON.parse(o.innerHTML);theme.visibilitySettings.checkForVisibility(c,t,function(){r(e,t)})})});function r(t,o){const r=o.template,c=t.querySelectorAll(".sc-container"),n=t.querySelectorAll(".dbtfy-size-chart-box");c.forEach(e=>{e.remove()}),n.forEach(e=>{e.insertAdjacentHTML("beforeend",r.outerHTML);const t=e.querySelector(".sc-link");t&&t.removeAttribute("hidden"),document.querySelectorAll("[id^='sizeChart']").forEach(e=>{const t=e.nextElementSibling;document.body.insertAdjacentElement("beforeend",e),document.body.insertAdjacentElement("beforeend",t)})}),e.querySelectorAll(".sc-container").forEach(e=>{e.remove()}),theme.modal.init()}}SizeChart(); {%- endif -%} } function themeSizeChartDestroy() { {%- if settings.dbtfy_size_chart -%} function destroySizeChart(){const e=document.querySelectorAll(".dbtfy-size_chart");e.length&&e.forEach(e=>{e.remove()})}destroySizeChart(); {%- endif -%} } /* end-dbtfy-size-chart */

  /* start-dbtfy-smart-search */ function themeSmartSearch() { {%- if settings.dbtfy_smart_search -%} class PredictiveSearch extends HTMLElement{constructor(){super(),this.cachedResults={},this.input=this.querySelector("input[type='search']"),this.predictiveSearchResults=this.querySelector(".ss-section-wrapper"),this.smartSearchSection=this.querySelector(".dbtfy-smart_search"),this.limit=this.smartSearchSection.dataset.limit,this.resourcesType=this.smartSearchSection.dataset.resourcesType,this.input.setAttribute("autocomplete","off"),this.setupEventListeners()}setupEventListeners(){this.querySelector("form.search-bar").addEventListener("submit",this.onFormSubmit.bind(this)),this.input.addEventListener("input",theme.debounce(e=>{this.onChange(e)},300).bind(this)),this.input.addEventListener("focus",this.onFocus.bind(this)),this.addEventListener("focusout",this.onFocusOut.bind(this)),this.addEventListener("keyup",this.onKeyup.bind(this)),this.addEventListener("keydown",this.onKeydown.bind(this))}getQuery(){return this.input.value.trim()}onChange(){const e=this.getQuery();e.length?this.getSearchResults(e):this.close(!0)}onFormSubmit(e){this.getQuery().length&&!this.querySelector(".item-selected a")||e.preventDefault()}onFocus(){const e=this.getQuery();e.length&&("true"===this.getAttribute("results")?this.open():this.getSearchResults(e))}onFocusOut(){setTimeout(()=>{this.contains(document.activeElement)||this.close()})}onKeyup(e){switch(this.getQuery().length||this.close(!0),e.preventDefault(),e.code){case"ArrowUp":this.switchOption("up");break;case"ArrowDown":this.switchOption("down");break;case"Enter":this.selectOption()}}onKeydown(e){"ArrowUp"!==e.code&&"ArrowDown"!==e.code||e.preventDefault()}switchOption(e){if(!this.getAttribute("open"))return;const t="up"===e,s=this.querySelector(".item-selected"),i=Array.from(this.querySelectorAll(".ss-item"));let r=i[0];if(t&&!s)return;const n=s?i.indexOf(s):0;!t&&s?r=i[n+1]||i[0]:t&&(r=i[n-1]||i[i.length-1]),r!==s&&(r.classList.add("item-selected"),s&&s.classList.remove("item-selected"),this.input.setAttribute("aria-activedescendant",r.id))}selectOption(){const e=this.querySelector(".item-selected a, .item-selected button");e&&e.click()}getSearchResults(e){const t=e.replace(" ","-").toLowerCase();this.cachedResults[t]?this.renderSearchResults(this.cachedResults[t]):fetch(`${theme.routes.predictive_search_url}?q=${encodeURIComponent(e)}&${encodeURIComponent("resources[type]")}=${this.resourcesType}&${encodeURIComponent("resources[limit]")}=${this.limit}&${encodeURIComponent("resources[options][unavailable_products]")}=last&${encodeURIComponent("resources[options][fields]")}=title,product_type,variants.title,vendor,body&section_id=dbtfy-smart-search`).then(e=>{if(!e.ok){var t=new Error(e.status);throw this.close(),t}return e.text()}).then(e=>{const s=(new DOMParser).parseFromString(e,"text/html").querySelector("#shopify-section-dbtfy-smart-search").innerHTML;this.cachedResults[t]=s,this.renderSearchResults(s)}).catch(e=>{throw this.close(),e})}renderSearchResults(e){this.predictiveSearchResults.innerHTML=e,this.updateCurrencies(),this.setAttribute("results",!0),this.open()}updateCurrencies(){var e=$("#currency-list-header[name='dbtfy-custom-currencies']"),t=theme.strings.shopCurrency;e.length&&t&&Currency.currentCurrency&&Currency.convertAll(t,Currency.currentCurrency)}open(){this.predictiveSearchResults.hidden=!1,this.setAttribute("open",!0),this.input.setAttribute("aria-expanded",!0)}close(e=!1){e&&(this.input.value="",this.removeAttribute("results"));const t=this.querySelector(".item-selected");t&&t.classList.remove("item-selected"),this.input.setAttribute("aria-activedescendant",""),this.predictiveSearchResults.hidden=!0,this.removeAttribute("open"),this.input.setAttribute("aria-expanded",!1)}}customElements.define("predictive-search",PredictiveSearch); {%- endif -%} } function themeSmartSearchDestroy() { {%- if settings.dbtfy_smart_search -%} function destroySmartSearch(){const e=document.querySelectorAll(".dbtfy-smart_search");e.length&&e.forEach(e=>{e.remove()})}destroySmartSearch(); {%- endif -%} } /* end-dbtfy-smart-search */

  /* start-dbtfy-social-discount */ function themeSocialDiscount(){ {%- if settings.dbtfy_social_discount -%} function SocialDiscount(){var o=$(".dbtfy-social_discount"),t=$(".sd-btn"),e=$("#socialDiscountPopup"),i=$(".sd-social-sharing a"),s=$("#socialDiscountRewardPopup"),c=s.find(".sd-reward-apply"),n=$(".sd-loading"),a=$(".sd-body"),d=localStorage.getItem("DebutifySocialDiscount");if(o.length){if("Yes"===d)return t.hide(),void o.addClass("sd-used");i.on("click",function(){a.hide(),n.show(),null==(d=localStorage.getItem("DebutifySocialDiscount"))&&setTimeout(function(){theme.modal.close(e),theme.modal.open(s)},1e4)}),c.on("click",function(){const o=s[0].dataset.discountName,t=s[0].dataset.discountType,e=+s[0].dataset.discountAmount;o&&t&&e&&(theme.discountCode.addDiscount(o,t,e),theme.discountCode.init())}),s.on("modal.close",function(){localStorage.setItem("DebutifySocialDiscount","Yes"),t.hide(),o.addClass("sd-used")})}}$(document).on("shopify:section:load",function(){localStorage.removeItem("DebutifySocialDiscount")}),SocialDiscount(); {%- endif -%} } function themeSocialDiscountDestroy() { {%- if settings.dbtfy_social_discount -%} function destroySocialDiscount(){const o=document.querySelectorAll(".dbtfy-social_discount");o.length&&o.forEach(o=>{o.remove()})}destroySocialDiscount(),$(document).on("shopify:section:load",function(){destroySocialDiscount()}); {%- endif -%} } /* end-dbtfy-social-discount */

  /* start-dbtfy-sticky-addtocart */ function themeStickyAddtocart(){ {%- if settings.dbtfy_sticky_addtocart -%} function StickyAddtocart(){function a(a,b,c){let d=null;if("percentage"===c){let c=Math.floor(100*(b-a)/b);d=`${c}%`}else{d=theme.Currency.formatMoney(b-a,r)}return d}function b(){let b=e.querySelector(".total-sticky-price"),c=e.querySelector(".total-sticky-compare-price"),d=e.querySelector(".discount-sticky-price"),f=e.querySelector(".discount-sticky-price-text"),g=x.options[x.selectedIndex];if(!g)return;let h=+g.dataset.price,i=+g.dataset.compareAtPrice,j=!!e.querySelector(".dbtfy-sticky-price-box").dataset.discountSaved;if(b.innerHTML=`<span class="money">${theme.Currency.formatMoney(h,r)}</span>`,!(h<i))c.style.display="none",b.classList.remove("text-sale"),d&&(d.style.display="none");else if(c.innerHTML=`<span class="money">${theme.Currency.formatMoney(i,r)}</span>`,c.style.display="inline-block",b.classList.add("text-sale"),d&&j){let b=d.dataset.discountVariant,c=a(h,i,b);const e="percentage"===b?c:`<span class="money">${c}</span>`;f.innerHTML=theme.strings.saveFormat.replace(/\{\{ saved_amount \}\}/,e),d.style.display="inline-block"}var k=$("#currency-list-header[name='dbtfy-custom-currencies']"),l=theme.strings.shopCurrency;k.length&&l&&Currency.currentCurrency&&Currency.convertAll(l,Currency.currentCurrency)}function c(){const a=x.selectedOptions[0];if(!a)return;const b=document.querySelector(".product-single__meta--wrapper"),c=a.hasAttribute("data-remain-qty")?+a.dataset.remainQty:+a.dataset.productQty,d=!b||!b.classList.contains("variant-soldout");0<c&&d?(o.removeAttribute("disabled"),p.innerHTML=theme.strings.addToCart):(o.setAttribute("disabled","disabled"),p.innerHTML=theme.strings.soldOut),document.dispatchEvent(new CustomEvent("stickyATCButtonStateChanged"))}function d(a){const b=document.querySelector(".featured-product-section [data-section-type='product-template']");b||a&&!a.includes("no-image")&&(k[1].src=a)}const e=document.querySelector(".dbtfy-sticky_addtocart");if(!e)return;const f=document.querySelectorAll(".single-option-selector__radio"),g=document.querySelector("[id^='MainProductSelect']"),h=document.querySelector(".product-single__meta--wrapper");let i,j=e.dataset.position,k=e.querySelectorAll(".image-sticky_addtocart"),l=document.querySelector(".product-single__add-to-cart .btn--add-to-cart"),m=e.querySelector("#stickyAddToCart"),n=e.querySelector("form"),o=e.querySelector(".btn--sticky_addtocart"),p=o.querySelector(".btn-text-sticky_addtocart"),q=l.offsetTop+l.offsetHeight,r=theme.strings.moneyFormat,s=theme.variables.animationDuration,t="top"===j?null:"scroll-sticky_addtocart",u="sa-visible",v=!1,w=document.querySelector(".quantity-sticky_addtocart"),x=e.querySelector(".select-sticky_addtocart");window.updateStickyAtcVariant=!0,w&&(i=w.querySelector("input")),window.addEventListener("scroll",()=>{window.pageYOffset>q?(m.classList.add(u),t&&document.body.classList.add(t),v=!0):v&&(v=!1,theme.closeTransition({elementToTransition:m,animationSpeed:s},function(){m.classList.remove(u),t&&document.body.classList.remove(t)}))}),n.addEventListener("submit",a=>{l&&l.click();const b=document.querySelector(".dbtfy-list-property-fields");if(b){const c=b.querySelectorAll("[required]");if(c){const b=Array.from(c).find(a=>{const b=a.getAttribute("type");return"checkbox"!==b||a.checked?a.value?void 0:a:a});return a.preventDefault(),a.stopImmediatePropagation(),b&&setTimeout(()=>{theme.loadingState.destroy(o)},0),!1}}}),theme.ProductQuantities.setMaxQuantity(w,x,i),theme.ProductQuantities.setVariantQuantities(w,x,i),theme.ProductQuantities.syncQuantityInputs(i),theme.ProductQuantities.checkQuantity(w,x,i),b(),c(),w&&w.querySelectorAll("button").forEach(a=>{a.addEventListener("click",()=>{theme.ProductQuantities.checkQuantity(w,x,i),theme.ProductQuantities.syncQuantityInputs(i)})}),x&&x.addEventListener("change",async a=>{let f=a.target,g=f.options[f.selectedIndex].dataset.image,h=f.options[f.selectedIndex].dataset.price;d(g),theme.ProductQuantities.setMaxQuantity(w,x,i),theme.ProductQuantities.checkQuantity(w,x,i),theme.ProductQuantities.syncQuantityInputs(i),c(),e.querySelector(".total-sticky-price").innerHTML=`<span class="money">${theme.Currency.formatMoney(h,r)}</span>`,b();let j=document.querySelector("#currency-list-header[name='dbtfy-custom-currencies']"),k=theme.strings.shopCurrency;j&&Currency.convertAll(k,Currency.currentCurrency,".dbtfy-sticky-price-box .money"),window.updateStickyAtcVariant&&theme.syncedProductVariant(f,"sticky")}),f.forEach(a=>a.addEventListener("change",()=>{if(window.updateStickyAtcVariant){let a=x.querySelector(`option[value="${g.value}"]`);!h.classList.contains("variant-unavailable")&&a&&(x.value=g.value,d(g.options[g.selectedIndex].dataset.image),c(),b())}})),$("body").on("hideStickyAtcOnUnavailableButton",function(){m&&m.setAttribute("hidden","hidden")}),$("body").on("productQuantitySync",function(){theme.ProductQuantities.checkQuantity(w,x,i)}),$("body").on("ajaxCart.afterCartLoad",function(){theme.ProductQuantities.setVariantQuantities(w,x,i),b(),c()}),$("body").on("updatedProductRemainingQuantities",function(){c()}),i&&i.addEventListener("keydown",function(a){const b=a.code;("ArrowUp"===b||"ArrowDown"===b||b.includes("Digit"))&&setTimeout(()=>{theme.ProductQuantities.checkQuantity(w,x,i),theme.ProductQuantities.syncQuantityInputs(i)})}),document.addEventListener("productInfoLoaded",()=>{c()})}StickyAddtocart(); {%- endif -%} } function themeStickyAddtocartDestroy() { {%- if settings.dbtfy_sticky_addtocart -%} function destroyStickyAddtocart(){const t=document.querySelectorAll(".dbtfy-sticky_addtocart");t.length&&t.forEach(t=>{t.remove()})}document.body.classList.add("dbtfy-sticky_addtocart-destroy"),destroyStickyAddtocart(); {%- endif -%} } /* end-dbtfy-sticky-addtocart */

  /* start-dbtfy-synced-variant-image */ function themeSyncedVariantImage(){ {%- if settings.dbtfy_synced_variant_image -%} function SyncedVariantImage(){const e=document.querySelectorAll("[data-section-type='product-template'], [data-section-type='quick-view-template']");e.length&&e.forEach(e=>{const t=e.querySelectorAll(".product-single__thumb");if(t.length>1){const n=e.dataset.sectionId,o=e.querySelector("[id^='ProductJson-'], .mainProductJson"),a=o?JSON.parse(o.innerHTML):null;if(!a)return;const i=$(e).find(".product-single__media-group-wrapper .slick");if(a.variants.length>1){let o=null;i.on("beforeChange",function(e,t,n,a){o=a}),i.on("afterChange",function(i,c,r){if(o!==r)return;o=0;const s=function(e,t,n){const o=n.querySelector(".product-single__variants, .qv-master-select"),a=o.options[o.selectedIndex];let i=[];t.variants.forEach(t=>{t.featured_media&&t.featured_media.id&&t.featured_media.id===e&&i.push(t)});let c=3;for(;c>0;){const e=a.dataset[`option-${c}`];if(""!==e){const t=i.filter(t=>Object.values(t).includes(e));i=t.length?t:i}c--}return i.shift()}(+t[r].closest(".product-single__thumbnail").dataset.mediaId.replace(`${n}-`,""),a,e);var l;s&&function(e,t){const n=t.featured_media.id,o=e.querySelector(`.qv-image-${n}`),a=o?+o.dataset.slickIndex:null,i=e.querySelector(".qv-slick");n&&Number.isInteger(a)&&i&&$(i).slick("slickGoTo",a);[t.option1,t.option2,t.option3].forEach((t,n)=>{const o=e.querySelectorAll(`.single-option-selector__radio[name='option${n+1}'][value='${CSS.escape(t)}'], .single-option-selector__radio[name='option${n+1}'] option[value='${CSS.escape(t)}'], .input-color_swatches[data-option-position='option${n+1}'][value='${CSS.escape(t)}']`);o.forEach(e=>{const n=e.closest(".single-option-selector__radio");e.checked=!0,e.value=t,n&&(n.value=t,n.dispatchEvent(new Event("change"))),e.dispatchEvent(new Event("change"))})})}(e,s),l=document.querySelectorAll("iframe"),Array.prototype.forEach.call(l,e=>{e.contentWindow.postMessage(JSON.stringify({event:"command",func:"stopVideo"}),"*")})})}}})}$(document).on("QuickViewLoaded",function(e){SyncedVariantImage()}),SyncedVariantImage(); {%- endif -%} } /* end-dbtfy-synced-variant-image */

  /* start-dbtfy-trust-badge */ function themeTrustBadgeDestroy() { {%- if settings.dbtfy_trust_badge -%} function destroyTrustBadge(){const e=document.querySelectorAll(".dbtfy-trust_badge");e.length&&e.forEach(e=>{e.remove()})}destroyTrustBadge(); {%- endif -%} } /* end-dbtfy-trust-badge */

  /* start-dbtfy-upsell-bundles */function themeUpsellBundles(){ {%- if settings.dbtfy_upsell_bundles -%} function UpsellBundles(){if(Shopify.designMode){const e=document.querySelectorAll(".dbtfy-upsell_bundles");if(e.length>1){const e=document.querySelector(".product-single"),t=e.querySelector(".dbtfy-upsell_bundles");t.remove()}}const dbtfy=document.querySelector(".dbtfy-upsell_bundles");if(!dbtfy)return;const $container=document.querySelector("#UpsellBundles"),sectionId=$container.dataset.sectionId,productId=$container.dataset.productId,limit=+$container.dataset.limit,recommendationsSectionUrl=`/recommendations/products?&section_id=${sectionId}&product_id=${productId}&limit=${limit}`,discountName=$container.dataset.discountName,discountAmount=$container.dataset.discountAmount,discountType=$container.dataset.discountType,position=$container.dataset.position;function upsellBundleLoaded(){const $buttonBundle=document.querySelector(".btn-upsell_bundles"),$bundleSelect=document.querySelectorAll(".select-upsell_bundles"),bundleTotal=document.querySelector(".total-upsell_bundles"),bundleCompareTotal=document.querySelector(".compare-total-upsell_bundles"),discountBox=document.querySelector(".discount-upsell_bundles"),discountBoxText=document.querySelector(".discount-upsell_bundles_text"),discountVariant=document.querySelector(".total-wrapper-upsell_bundles").dataset.discountVariant,moneyFormat=theme.strings.moneyFormat,imageWrapperBox=document.querySelector(".image-wrapper-upsell_bundles"),currentImageUpsell=document.querySelector(".current-image-upsell_bundles"),formWrapperBox=document.querySelector(".form-wrapper-upsell_bundles"),currentFormUpsell=document.querySelector(".current-form-upsell_bundles"),listCheckboxes=document.querySelectorAll(".checkbox-upsell_bundles"),listVariantSelects=document.querySelectorAll(".single-option-selector__radio"),masterSelect=document.querySelector("[id^='MainProductSelect']"),productTemplateMetaContainer=document.querySelector(".product-single__meta--wrapper");if(window.updateBundleVariant=!0,!currentImageUpsell)return void dbtfy.setAttribute("hidden","hidden");function addUpsellToProductSection(){const e=document.querySelector(".dbtfy-trust_badge");if(e)e.insertAdjacentElement("afterend",dbtfy);else{document.querySelector(".btn--add-to-cart").closest("form").insertAdjacentElement("afterend",dbtfy)}}imageWrapperBox.insertAdjacentElement("afterbegin",currentImageUpsell),formWrapperBox.insertAdjacentElement("afterbegin",currentFormUpsell),"button"===position&&addUpsellToProductSection(),listCheckboxes.forEach(e=>e.addEventListener("click",t=>{const n=e.dataset.productId,o=e.dataset.index,s=document.querySelector(`.grid-image-${n}-${o}`),l=document.querySelector(`#upsellBundles-${n}-${o}`);s.classList.toggle("selected-image-upsell_bundles"),l.classList.toggle("active-upsell_bundles"),verifyUnchecked(),checkPrice()})),$bundleSelect.forEach(e=>e.addEventListener("change",t=>{const n=e.value,o=e.dataset.index,s=document.querySelector(`#imageUpsellBundles-${n}-${o}`),l=s.closest(".image-item-upsell_bundles").querySelectorAll(".image-link-upsell_bundles"),r=e.options[e.selectedIndex],c=e.nextElementSibling.querySelector(".dbtfy-upsell-bundle-current-price"),a=e.nextElementSibling.querySelector(".dbtfy-upsell-bundle-compare-price"),u=+r.dataset.price,d=+r.dataset.compareAtPrice;l.forEach(e=>e.style.display="none"),s&&(s.style.display="block"),u>d?(c.classList.remove("text-sale"),a&&(a.style.display="none")):(c.classList.add("text-sale"),a&&(a.style.display="inline-block")),c&&(c.innerHTML=`<span class="money">${theme.Currency.formatMoney(u,moneyFormat)}</span>`,a.innerHTML=`<span class="money">${theme.Currency.formatMoney(d,moneyFormat)}</span>`),checkPrice(),e.closest(".current-form-upsell_bundles")&&window.updateBundleVariant&&theme.syncedProductVariant(e,"bundle")})),listVariantSelects.forEach(e=>e.addEventListener("change",e=>{if(!window.updateBundleVariant)return;const t=currentFormUpsell.querySelector(".select-upsell_bundles"),n=t.querySelector(`option[value="${masterSelect.value}"]`);!productTemplateMetaContainer.classList.contains("variant-unavailable")&&n&&(t.value=masterSelect.value,t.dispatchEvent(new Event("change")))})),checkPrice(),$buttonBundle.addEventListener("click",e=>{const forms=document.querySelectorAll(".form-upsell_bundles.active-upsell_bundles"),cartType=theme.settings.cartType,boxWithErrors=dbtfy.querySelector(".errors");boxWithErrors&&boxWithErrors.remove();const items=[];forms.forEach(e=>{const t=+e.querySelector(".select-upsell_bundles").value,n=items.find(e=>e.id===t);n?n.quantity++:items.push({id:t,quantity:1})}),ShopifyAPI.addItemFromForm({data:{items:items},forms:forms},e=>{if(isDiscountApplicable()){const e=getVariantIds(),t={productId:productId,variantIds:e,discount:{name:discountName,type:discountType,amount:discountAmount}};upsellBundleStorage.remove(productId),upsellBundleStorage.add(t),discountName&&discountType&&discountAmount&&theme.discountCode.addDiscount(discountName,discountType,discountAmount),theme.discountCode.init()}theme.loadingState.init($buttonBundle),theme.settings.dbtfySkipCart?theme.goToCheckoutWithDiscount():"page"===cartType?document.body.classList.contains("template-cart")?theme.ajaxCart.update():window.location.assign("/cart"):"drawer"===cartType?(theme.ajaxCart.update(),$("body").on("ajaxCart.afterCartLoad",function(e,t){theme.loadingState.destroy($buttonBundle)})):(theme.ajaxCart.update(),$("body").on("ajaxCart.afterCartLoad",function(e,t){theme.loadingState.destroy($buttonBundle),theme.settings.enableCartMessage&&window.initNotificationToast||theme.cartModal.init()}))},(XMLHttpRequest,textStatus,form)=>{const data=eval(`(${XMLHttpRequest.responseText})`);theme.loadingState.destroy($buttonBundle),data.message&&422===data.status&&$buttonBundle.insertAdjacentHTML("afterend",`<div class="errors qty-error">${data.description}</div>`)})});const upsellBundleStorage={getAll:function(){const e=JSON.parse(sessionStorage.getItem("upsellBundles"));return e||[]},get:function(e){const t=JSON.parse(sessionStorage.getItem("upsellBundles"));return t?t.find(t=>t.productId===+e):null},add:function(e){const t=this.getAll()||[];t.push(e),sessionStorage.setItem("upsellBundles",JSON.stringify(t))},has:function(e){const t=this.getAll();return!!t&&t.some(t=>t.productId===+e)},remove:function(e){const t=this.getAll();if(!t)return;const n=t.filter(t=>t.productId!==e);return n.length?sessionStorage.setItem("upsellBundles",JSON.stringify(n)):sessionStorage.removeItem("upsellBundles"),!0}};function calculateDiscount(e,t){let n=null;if(discountBox&&(discountBox.style.display="none"),bundleTotal.classList.remove("text-sale"),t>e){if("percentage"===discountVariant){const o=Math.round(100*(t-e)/t);o<=100&&(n=`${o}%`)}else{const o=t-e;o>0&&(n=`<span class="money">${theme.Currency.formatMoney(o,moneyFormat)}</span>`)}n&&(discountBoxText&&(discountBoxText.innerHTML=theme.strings.saveFormat.replace(/\{\{ saved_amount \}\}/,n)),bundleTotal.classList.add("text-sale"),discountBox&&(discountBox.style.display="block"))}}function checkPrice(){const e=$container.querySelectorAll(".form-item-upsell_bundles").length;let t=0,n=0,o=0;if($bundleSelect.forEach(e=>{if(e.closest(".form-item-upsell_bundles").querySelector(".checkbox-upsell_bundles").checked){const s=e.options[e.selectedIndex],l=parseInt(s.dataset.price),r=parseInt(s.dataset.compareAtPrice);o++,t+=l,n+=r>0?r:l}}),e===o&&discountName&&discountAmount&&discountType){const e=t;switch(discountType){case"%":t-=t/100*discountAmount;break;case"$":t-=100*discountAmount}t>0?(n=e,$container.setAttribute("data-discount-applied","true")):(t=e,$container.removeAttribute("data-discount-applied"))}bundleTotal.dataset.total=t,bundleTotal.innerHTML=`<span class="money">${theme.Currency.formatMoney(t,moneyFormat)}</span>`,t<n?(bundleCompareTotal.dataset.total=n,bundleCompareTotal.innerHTML=`<span class="money">${theme.Currency.formatMoney(n,moneyFormat)}</span>`,bundleCompareTotal.style.display="block"):bundleCompareTotal.style.display="none",calculateDiscount(t,n);const s=document.querySelector("#currency-list-header[name='dbtfy-custom-currencies']"),l=theme.strings.shopCurrency;s&&l&&Currency.currentCurrency&&Currency.convertAll(l,Currency.currentCurrency)}function verifyUnchecked(){const e=document.querySelector(".btn-upsell_bundles"),t=document.querySelectorAll(".checkbox-upsell_bundles"),n=[].filter.call(t,function(e){return!e.checked});t.length===n.length?(e.classList.add("disabled"),e.setAttribute("disabled","disabled")):(e.classList.remove("disabled"),e.removeAttribute("disabled","disabled"))}function isDiscountApplicable(){const e=document.querySelectorAll(".checkbox-upsell_bundles"),t=Boolean($container.getAttribute("data-discount-applied"));let n=!1;return Array.from(e).reduce((e,t)=>t.checked?e+1:e,0)===e.length&&t&&(n=!0),n}function getVariantIds(){const e=[];return $bundleSelect.forEach(t=>{const n=t.value;e.push(+n)}),e}function upsellBundleDiscountOnCartUpdate(e){upsellBundleStorage.getAll().forEach(t=>{const n=t.discount,o=t.variantIds.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{});Object.entries(o).every(([t,n])=>e.items.some(e=>e.variant_id===+t&&e.quantity>=n))?theme.discountCode.hasDiscount(n.name)||theme.discountCode.addDiscount(n.name,n.type,n.amount):theme.discountCode.removeDiscount(n.name)}),theme.discountCode.init(),theme.showTheMostValuableDiscountInCart()}$("body").on("ajaxCart.afterCartLoad",function(e,t){upsellBundleDiscountOnCartUpdate(t)})}function getRecommendationsSection(){fetch(recommendationsSectionUrl).then(function(e){return e.text()}).then(function(e){const t=(new DOMParser).parseFromString(e,"text/html").querySelector("#UpsellBundles").innerHTML;t&&""!==t.trim()&&($container.innerHTML=t,upsellBundleLoaded())})}$container.classList.contains("specific-upsell_bundles")?upsellBundleLoaded():getRecommendationsSection()}document.addEventListener("shopify:section:load",e=>{UpsellBundles(),sessionStorage.removeItem("upsellBundles")}),UpsellBundles(); {%- endif -%} } function themeUpsellBundlesDestroy(){ {%- if settings.dbtfy_upsell_bundles -%} function destroyUpsellBundles(){const e=document.querySelectorAll(".dbtfy-upsell_bundles");e.length&&e.forEach(e=>{e.remove()})}destroyUpsellBundles(); {%- endif -%} }/* end-dbtfy-upsell-bundles */

  /* start-dbtfy-upsell-popup */ function themeUpsellPopup() { {%- if settings.dbtfy_upsell_popup -%} let onFormSubmit="";async function UpsellPopup(){const t=document.querySelector(".dbtfy-upsell_popup");async function e(){const e=t.querySelectorAll(".up-modal"),a=t.querySelectorAll(".upsell-popup-item");if(e.length&&e.forEach(t=>{t.remove()}),!a.length)return;const n=Array.from(a).map(t=>{const e=t.dataset.productTrigger,a=t.dataset.productOffer,n=[];return e&&n.push(e),a&&n.push(a),n}).flat(),o=`/search?view=product-info&type=product&q=${[...new Set(n)].map(t=>`handle:${t}`).join(" OR ")}`,s=await fetch(o,{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-Type":"application/json"}}).then(t=>t.text()),i=JSON.parse(s),d=t.dataset.popupWidth,r=t.dataset.popupDescription,l=t.dataset.cartText,c=t.dataset.checkoutText,p=t.dataset.textAlignment,u=t.dataset.range,m=Array.from(a).map(t=>{const e=t.dataset.title,a=t.dataset.text,n=t.dataset.productTrigger,o=t.dataset.collectionTrigger,s=t.dataset.productOffer,m=t.dataset.icons,f=t.dataset.buttonLabel,h=t.dataset.discountName,b=+t.dataset.discountAmount,g=t.dataset.discountType,v=t.dataset.blockId,$=i.find(t=>t.handle===n),y=i.find(t=>t.handle===s),C=y&&y.available;if(!y||!C)return null;let w;w=n||o?o&&!$?o:$?$.id:"":"general";const _=theme.cart.items.some(t=>t.handle===s);let x=0;const L=document.getElementById(`upsellProductOfferJson-${y.id}`),S=L&&JSON.parse(L.innerHTML),T=y.variants.map(t=>{if(x++,t.available){let e;const a=(e=t.featured_image?t.featured_image:y.featured_image.src?y.featured_image:S&&S.media.preview_image)&&e.aspect_ratio?e.aspect_ratio:1,n=e?e.alt:null,o=`\n                <img class="product--image media lazyload"\n                     data-src="${e?e.src:null}"\n                     data-sizes="auto"\n                     data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"\n                     data-aspectratio="${a}"\n                     alt="${n}"\n                     data-image>\n              `,s=theme.variables.productPlaceholderSvg;return`\n                <div class="product--wrapper media-wrapper up-img up-img-${t.id}"\n                     style="${1!==x?"display: none;":""}padding-top: ${e?0!==a?1/a*100:1:0}%${e?"":"!important"};">\n                  ${e?o:s}\n                </div>\n              `}return x--,""}).join(""),k=y.variants.map(t=>t.available?`\n                <option value="${t.id}" data-variant-title="${t.title}" data-variant-price="${t.price}">\n                  ${t.title} - ${theme.Currency.formatMoney(t.price,theme.strings.moneyFormat)}\n                </option>\n              `:`\n              <option disabled="disabled" hidden>\n                ${t.title} - ${theme.strings.soldOut}\n              </option>\n            `).join(""),P=y.description||r?`\n            <div class="card card-full tab">\n              <button id="tab-button-${v}" class="card-header tab-header up-btn-description"\n                      type="button"\n                      role="tab"\n                      aria-controls="tab-content-${v}"\n                      aria-selected="false">\n                <span class="tab-header-title">${r}</span>\n              </button>\n\n              <div id="tab-content-${v}" class="card-body tab-body" role="tabpanel" aria-labelledby="tab-button-${v}">\n                <div class="tab-content rte">\n                  ${y.description.replace("<p>[split_description]</p>","").replace("[split_description]","")}\n                </div>\n              </div>\n            </div>\n          `:"",E=l||c?`\n            <div class="modal-footer">\n                <div class="grid">\n                    <div class="grid__item six-twelfths">\n                        ${l?`\n                            <button type="button" class="up-cart-link"\n                                    data-modal-close="#UpsellPopup-${w}">\n                                <small class="btn__text">\n                                    ${l}\n                                </small>\n                          </button>\n                        `:""}\n                    </div>\n\n                    <div class="grid__item six-twelfths text-right">\n                        ${c?`\n                            <button type="button" class="up-checkout-link">\n                                <small class="btn__text">\n                                    ${c}\n                                </small>\n                            </button>\n                        `:""}\n                    </div>\n                </div>\n            </div>\n          `:"";return`\n            <div id="UpsellPopup-${w}"\n                 class="modal up-modal${_?" up-offer-accepted":""}"\n                 role="dialog"\n                 data-offer="${y.id}"\n                 data-trigger="${w}"\n                 data-collection-trigger="${o}"\n                 ${h&&g&&b?`\n                   data-discount-name="${h}"\n                   data-discount-type="${g}"\n                   data-discount-amount="${b}"\n                 `:""}>\n\n                <div class="modal-dialog ${d}">\n                    <div class="overlay-content modal-content modal-content-upsell_popup" aria-hidden="true" tabindex="-1">\n                        <div class="modal-header">\n                            <h4 class="modal-title">\n                              <a href="${y.url}">${y.title}</a>\n                            </h4>\n\n                            <button type="button"\n                                    class="modal-close btn btn-square-small"\n                                    title="${theme.strings.closeText}"\n                                    aria-label="${theme.strings.closeText}"\n                                    data-modal-close="#UpsellPopup-${w}">\n                              <span class="${theme.settings.icon}" aria-hidden="true">close</span>\n                            </button>\n                        </div>\n\n                        <div class="progress">\n                            <div class="progress-bar up-progress-bar"\n                                 role="progressbar"\n                                 style="width: ${u}%;">\n                            </div>\n                        </div>\n\n                        <div class="modal-body">\n                            <div class="grid grid-small grid-spacer align-center">\n                                <div class="grid__item large--six-twelfths medium--six-twelfths">\n                                    ${T}\n                                </div>\n\n                                <div class="grid__item large--six-twelfths medium--six-twelfths ${p}">\n                                    <div class="rte">\n                                      ${e?`<h3 class="title-upsell_popup">${e}</h3>`:""}\n                                      ${a||""}\n                                    </div>\n\n                                    <form method="post" action="/cart/add" class="up-form" enctype="multipart/form-data">\n                                        <input type="hidden" name="form_type" value="product">\n                                        <input type="hidden" name="utf8" value="">\n\n                                        <select name="id" class="up-select select--small full${y.variants.length<=1?" hide":""}">\n                                            ${k}\n                                        </select>\n\n                                        ${f?`\n                                            <button type="submit" class="btn btn--primary btn--full up-btn-offer spacer-top">\n                                                <span class="btn__text">\n                                                    ${m?`\n                                                        <span class="${theme.settings.icon}" aria-hidden="true">\n                                                            ${m}\n                                                        </span>\n                                                    `:""}\n\n                                                    ${f}\n                                                </span>\n                                            </button>\n                                        `:""}\n                                    </form>\n                                </div>\n                            </div>\n                        </div>\n\n                        ${P}\n\n                        ${E}\n                    </div>\n                </div>\n            </div>\n\n            <div class="overlay-modal overlay-backdrop"></div>\n          `}).join("");t.insertAdjacentHTML("afterbegin",m),theme.openExternalLinksInANewTab(),document.dispatchEvent(new CustomEvent("dbtfy:upsellPopupMarkupLoaded"))}function a(){theme.tabs.init(),theme.modal.init(),theme.discountCode.init(),theme.loadingState.initForm(),theme.ajaxCart.init(),theme.styleTextLinks();var t=$("form[action*='/cart/add']"),e=$(".up-checkout-link"),a=$(".up-progress-bar"),n=theme.settings.cartType,o=$("#UpsellPopup-general");if(o.length)t.attr("data-has-submit-listener","true");else{$(".upsell-popup-item").each(function(){let t=$(this).data("product-trigger-id");$(`[data-product-id="${t}"] form`).attr("data-has-submit-listener","true")})}t.off("submit"),t.attr("data-has-submit-listener","true"),t.on("submit",function(t){onFormSubmit(this,t,!0)}),onFormSubmit=function(s,i,d){var r=$(s),l=r.closest("[data-product-id]").data("product-id"),c=$("#UpsellPopup-"+l),p=theme.cart,u=$(".up-btn-offer");const m=r.closest("[data-product-id]").data("product-collections"),f=m&&m.split(",");let h=f&&f.map(t=>$(`#UpsellPopup-${t}`)).filter(t=>t.length);if(!r.attr("data-has-submit-listener")&&d)return;if(r.hasClass("up-form"))return;if(c.length)i&&i.preventDefault();else if(h&&h.length)i&&i.preventDefault(),c=h[0];else{if(!o.length)return void L(r,!d);i&&i.preventDefault(),c=o}var b=c.find(".up-img"),g=c.find(".up-select"),v=c.find(".up-form"),y=c.data("offer"),C=c.data("discount-name"),w=c.data("discount-type"),_=c.data("discount-amount");const x=Boolean(+l==+y);function L(t,e){const a=t.get(0);t.removeAttr("data-has-submit-listener"),e?theme.ajaxCart.update():a.dispatchEvent(new CustomEvent("form-submit")),t.attr("data-has-submit-listener","true")}p.items.some(t=>t.product_id===+y&&!x)||c.hasClass("up-offer-accepted")?L(r,!d):(u.click(function(t){r.removeAttr("data-has-submit-listener"),c.addClass("up-offer-accepted"),C&&w&&_&&theme.discountCode.addDiscount(C,w,_,{productTriggerId:+l,productOfferId:+y,role:"upsell-popup"}),a.css("width","100%"),ShopifyAPI.addItemFromForm(v,t=>{theme.modal.close(c),theme.settings.enableCartMessage&&window.initNotificationToast||(document.dispatchEvent(new CustomEvent("dbtfy:upsellPopupLoaded")),setTimeout(()=>{a.css("width","75%")},2e3),theme.settings.dbtfySkipCart&&theme.goToCheckoutWithDiscount())})}),d?ShopifyAPI.addItemFromForm(r,()=>{theme.modal.open(c)},()=>{$("body").trigger("ajaxCart.cartAddError",r)}):theme.modal.open(c),c.on("modal.close",function(){u.off("click"),e.off("click"),g.off("change"),c.off("modal.close"),theme.loadingState.destroy(u),theme.settings.dbtfySkipCart?theme.goToCheckoutWithDiscount():"page"===n?document.body.classList.contains("template-cart")||window.location.assign("/cart"):"drawer"===n?(theme.ajaxCart.update(),$("body").on("ajaxCart.afterCartLoad",()=>{t.attr("data-has-submit-listener","true")})):(theme.ajaxCart.update(),$("body").on("ajaxCart.afterCartLoad",()=>{theme.settings.enableCartMessage&&window.initNotificationToast||theme.cartModal.init()}))}),e.on("click",function(){theme.loadingState.init(e),theme.ajaxCart.update(()=>{theme.goToCheckoutWithDiscount()})}),g.change(function(){var t=$(this).val(),e=c.find(`.up-img-${t}`);b.hide(),e.show()}))}}t&&(theme.isCartLoaded?(await e(),a()):document.addEventListener("dbtfy:cartLoaded",async()=>{await e(),a()}),$(document).unbind("click.fb-start"))}function UpsellCouponCode(t){if(!document.querySelector(".dbtfy-upsell_popup")||!t)return;const e=theme.discountCode.getStoredDiscounts();if(!e.length)return;const a=e.filter(t=>!!t.hasOwnProperty("role")&&"upsell-popup"===t.role);a.length&&(a.forEach(e=>{const a=e.productOfferId,n=e.productTriggerId,o=Boolean(a===n);t.items.some(t=>t.product_id===a)||o||theme.discountCode.removeDiscount(e.name),theme.discountCode.init(t)}),document.dispatchEvent(new CustomEvent("dbtfy:upsellPopupLoaded")))}function UpsellNotInCart(t){if(!document.querySelector(".dbtfy-upsell_popup")||!t)return;const e=document.querySelectorAll(".up-modal");e.length&&e.forEach(e=>{const a=parseInt(e.dataset.offer),n=parseInt(e.dataset.trigger),o=Boolean(a===n),s=t.items.some(t=>t.product_id===a);e.classList.contains("up-offer-accepted")&&(o&&!s?e.classList.remove("up-offer-accepted"):s||e.classList.remove("up-offer-accepted")),s||o||e.classList.remove("up-offer-accepted")})}document.addEventListener("dbtfy:formSubmitted",t=>{const e=t.detail.form;e&&onFormSubmit(e,null,!1)}),UpsellPopup(),$("body").on("ajaxCart.afterCartLoad",(t,e)=>{UpsellCouponCode(e),UpsellNotInCart(e)}),$("body").hasClass("template-cart")&&(theme.isCartLoaded?UpsellCouponCode(theme.cart):document.addEventListener("dbtfy:cartLoaded",()=>{UpsellCouponCode(theme.cart)})),$("body").on("afterRecommendationLoad",function(t){UpsellPopup()}),$("body").on("cartUpsellLoad",function(t){UpsellPopup()}),document.addEventListener("QuickViewLoaded",()=>{UpsellPopup()}),document.addEventListener("dbtfy:wishlistLoaded",()=>{UpsellPopup()}); {%- endif -%} } function themeUpsellPopupDestroy() { {%- if settings.dbtfy_upsell_popup -%} function destroyUpsellPopup(){const e=document.querySelectorAll(".dbtfy-upsell_popup");e.length&&e.forEach(e=>{e.remove()})}document.body.classList.add("dbtfy-upsell_popup-destroy"),destroyUpsellPopup(),$("body").on("afterRecommendationLoad",function(e){destroyUpsellPopup()}),document.addEventListener("QuickViewLoaded",()=>{destroyUpsellPopup()}); {%- endif -%} } /* end-dbtfy-upsell-popup */

  /* start-dbtfy-wish-list */ function themeWishList(){ {%- if settings.dbtfy_wish_list -%} function Wishlist(){if(!document.querySelector(".dbtfy-wish_list"))return;const t={localStorageName:"wishlist",activeClass:"wl-active",addButtons:".wl-add",removeButtons:".wl-remove",wlCounts:".wl-count",wishlistSocial:document.querySelector(".wl-social-sharing"),noItems:document.querySelectorAll(".wl-no-item"),bubbleIcons:document.querySelectorAll(".wl-bubble"),pageTemplate:document.getElementById("WishlistTemplate"),productPageBtn:"wl-product-page-btn",wishListButtonText:".wl-btn-text"};function e(){i(),s(),l()}function i(){const e=c();if(!e||!e.length)return void r(0);const i=e.filter(t=>!!t);i.forEach(e=>{const i=document.querySelectorAll(`${t.addButtons}[data-product-handle="${e}"]`);i&&i.forEach(e=>{let i=e.getAttribute("data-remove-wish-list-text");e.classList.add(t.activeClass),e.setAttribute("aria-label",i),e.setAttribute("title",i),e.classList.contains(t.productPageBtn)&&(e.querySelector(t.wishListButtonText).innerText=i)})}),o(t.bubbleIcons,!0),theme.fetchProductMarkup({template:"wish-list",productHandles:i},t=>{r(Object.entries(t).reduce((t,[e,i])=>i.includes("<!doctype html>")?t:t+1,0))})}function s(){const e=document.querySelectorAll(t.addButtons);e&&e.length&&e.forEach(e=>{e.hasAttribute("data-has-click-event")||(e.addEventListener("click",()=>{const i=e.dataset.productHandle,s=e.classList.contains(t.activeClass),l=!s,a=e.getAttribute("data-add-wish-list-text"),o=e.getAttribute("data-remove-wish-list-text");i&&(document.querySelectorAll(`${t.addButtons}[data-product-handle="${i}"]`).forEach(e=>{s?(e.classList.remove(t.activeClass),e.setAttribute("aria-label",a),e.setAttribute("title",a),e.classList.contains(t.productPageBtn)&&(e.querySelector(t.wishListButtonText).innerText=a)):(e.classList.add(t.activeClass),e.setAttribute("aria-label",o),e.setAttribute("title",o),e.classList.contains(t.productPageBtn)&&(e.querySelector(t.wishListButtonText).innerText=o))}),n(l,i))}),e.setAttribute("data-has-click-event","true"))})}function l(){const e=document.querySelectorAll(t.removeButtons);e&&e.length&&e.forEach(t=>{t.hasAttribute("data-has-click-event")||(t.addEventListener("click",e=>{e.preventDefault();const i=t.dataset.productHandle;i&&!t.hasAttribute("data-has-remove-event")&&n(!1,i)}),t.setAttribute("data-has-click-event","true"))})}function a(){let e=c();if(window.location.href.indexOf("?wishlist")>-1){const t=window.location.href.split("?");new URLSearchParams(t[1]).get("wishlist").split(",").forEach(function(t){e&&e.length?(e=e.filter(e=>e!==t)).push(t):e=[t]}),u(e=JSON.stringify(e)),i(),e=c()}if(!e||!e.length)return o(t.noItems,!0),void o([t.wishlistSocial],!1);const a=e.filter(t=>!!t);o(t.noItems,!1),o([t.wishlistSocial],!0),theme.fetchProductMarkup({template:"wish-list",productHandles:a},e=>{let i=0;const a=Object.entries(e).reduce((t,[e,s])=>s.includes("<!doctype html>")?t:(i++,t+`<div id="WishlistCard-${e}" class="card fadeInUp"><div class="card-body">${s}</div></div>`),"");r(i),a?(t.pageTemplate.insertAdjacentHTML("afterbegin",a),s(),l(),"drawer"===theme.settings.cartType&&theme.ajaxCart.init(),document.dispatchEvent(new CustomEvent("dbtfy:wishlistLoaded"))):(o(t.noItems,!0),o([t.wishlistSocial],!1),r(0))});const n=`${window.location.href}%3Fwishlist=${a}`,d=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-facebook"):null,h=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-twitter"):null,w=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-pinterest"):null,m=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-whatsapp"):null,b=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-linkedin"):null,f=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-reddit"):null,S=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-email"):null,p=t.wishlistSocial?t.wishlistSocial.querySelector(".btn-messenger"):null;if(d){let t=d.dataset.shareContent;d.setAttribute("href",`//www.facebook.com/sharer/sharer.php?u=${n}&quote=${t}`)}if(h){let t=h.dataset.shareContent;h.setAttribute("href",`//twitter.com/intent/tweet?source=${n}&text=${n}%20${t}`)}if(w){let t=w.dataset.shareContent,e=encodeURIComponent(w.dataset.shareMedia);w.setAttribute("href",`//pinterest.com/pin/create/button/?url=${n}&media=${e}&description=${t}`)}if(m&&m.setAttribute("href",`//api.whatsapp.com/send?text=${n}`),b){let t=b.dataset.shareTitle,e=b.dataset.shareDescription;b.setAttribute("href",`//www.linkedin.com/shareArticle?mini=true&url=${n}&title=${t}&summary=${e}&source=${n}`)}if(f){let t=f.dataset.shareContent;f.setAttribute("href",`//www.reddit.com/submit?url=${n}&title=${t}`)}if(S){let t=S.dataset.shareContent,e=S.dataset.shareTitle;S.setAttribute("href",`mailto:?subject=${e}&body=${n}%0D%0D${t}%0D`)}p&&p.setAttribute("href",`fb-messenger://share/?link=${n}&app_id=${theme.settings.facebookPageId}`)}function n(e,s){const l=document.getElementById(`WishlistCard-${s}`);let a=c();e?a?a.push(s):a=[s]:(l&&l.remove(),a=a.filter(t=>t!==s)),a&&a.length?(o(t.bubbleIcons,!0),o(t.noItems,!1),o([t.wishlistSocial],!0)):(o(t.bubbleIcons,!1),o(t.noItems,!0),o([t.wishlistSocial],!1)),u(a=JSON.stringify(a)),i()}function o(t,e){t.length&&t.forEach(t=>{t&&(t.style.display=e?"block":"none")})}function r(e){const i=document.querySelectorAll(t.wlCounts);i.length&&i.forEach(t=>{t.innerHTML=e})}function c(){const e=localStorage.getItem(t.localStorageName);return JSON.parse(e)}function u(e){localStorage.setItem(t.localStorageName,e)}(new theme.Sections).register("wish-list-page",a),e(),$("body").on("afterRecommendationLoad",function(t){e()}),$(document).on("shopify:section:load",function(t){e()}),document.addEventListener("dbtfy:addedRecentlyViewedProduct",()=>{e()})}Wishlist(); {%- endif -%} } function themeWishListDestroy() { {%- if settings.dbtfy_wish_list -%} function destroyWishlist(){const t=document.querySelectorAll(".dbtfy-wish_list");t.length&&t.forEach(t=>{t.remove()})}document.body.classList.add("dbtfy-wish_list-destroy"),destroyWishlist(),$("body").on("afterRecommendationLoad",function(t){destroyWishlist()}),$("body").on("ajaxCart.afterCartLoad",function(t){destroyWishlist()}); {%- endif -%} } /* end-dbtfy-wish-list */

  let addonsLoaded=!1;document.addEventListener("dbtfy:loaded",function(e){if(addonsLoaded)return;addonsLoaded=!0;var t=new theme.Sections;const r={dbtfy_addtocart_animation:{init:()=>{t.register("product-template",themeAddtocartAnimation)},destroy:()=>{}},dbtfy_age_check:{init:themeAgeCheck,destroy:themeAgeCheckDestroy},dbtfy_agree_to_terms:{init:themeAgreeToTerms,destroy:themeAgreeToTermsDestroy},dbtfy_automatic_geolocation:{init:themeAutomaticGeolocation,destroy:()=>{}},dbtfy_back_in_stock:{init:themeBackInStock,destroy:themeBackInStockDestroy},dbtfy_cart_discount:{init:themeCartDiscount,destroy:themeCartDiscountDestroy},dbtfy_cart_favicon:{init:themeCartFavicon,destroy:()=>{}},dbtfy_cart_goal:{init:themeCartGoal,destroy:themeCartGoalDestroy},dbtfy_cart_reminder:{init:themeCartReminder,destroy:themeCartReminderDestroy},dbtfy_cart_savings:{init:themeCartSavings,destroy:themeCartSavingsDestroy},dbtfy_cart_upsell:{init:themeCartUpsell,destroy:themeCartUpsellDestroy},dbtfy_collection_addtocart:{init:themeCollectionAddtocart,destroy:themeCollectionAddtocartDestroy},dbtfy_collection_filters:{init:themeCollectionFilters,destroy:themeCollectionFiltersDestroy},dbtfy_color_swatches:{init:themeColorSwatches,destroy:themeColorSwatchesDestroy},dbtfy_cookie_box:{init:themeCookieBox,destroy:themeCookieBoxDestroy},dbtfy_custom_currencies:{init:themeCustomCurrencies,destroy:themeCustomCurrenciesDestroy},dbtfy_customizable_products:{init:themeCustomizableProducts,destroy:themeCustomizableProductsDestroy},dbtfy_delivery_date:{init:themeDeliveryDate,destroy:themeDeliveryDateDestroy},dbtfy_delivery_time:{init:themeDeliveryTime,destroy:themeDeliveryTimeDestroy},dbtfy_discount_saved:{init:themeDiscountSaved,destroy:themeDiscountSavedDestroy},dbtfy_faq_page:{init:()=>{t.register("faq-page",themeFaqPage)},destroy:themeFaqPageDestroy},dbtfy_facebook_messenger:{init:()=>{},destroy:themeFacebookMessengerDestroy},dbtfy_gift_wrap:{init:themeGiftWrap,destroy:themeGiftWrapDestroy},dbtfy_inactive_tab_message:{init:themeInactiveTabMessage,destroy:()=>{}},dbtfy_infinite_scroll:{init:themeInfiniteScroll,destroy:themeInfiniteScrollDestroy},dbtfy_instagram_feed:{init:()=>{t.register("instagram-feed",themeInstagramFeed)},destroy:themeInstagramFeedDestroy},dbtfy_inventory_quantity:{init:themeInventoryQuantity,destroy:themeInventoryQuantityDestroy},dbtfy_linked_options:{init:themeLinkedOptions,destroy:()=>{}},dbtfy_mega_menu:{init:()=>{t.register("header-section",themeMegaMenu)},destroy:themeMegaMenuDestroy},dbtfy_menu_bar:{init:()=>{},destroy:themeMenuBarDestroy},dbtfy_minimum_order:{init:()=>{},destroy:themeMinimumOrderDestroy},dbtfy_newsletter_popup:{init:themeNewsletterPopup,destroy:themeNewsletterPopupDestroy},dbtfy_order_feedback:{init:themeOrderFeedback,destroy:themeOrderFeedbackDestroy},dbtfy_order_tracking:{init:themeOrderTracking,destroy:themeOrderTrackingDestroy},dbtfy_page_speed_booster:{init:themePageSpeedBooster,destroy:()=>{}},dbtfy_page_transition:{init:themePageTransition,destroy:themePageTransitionDestroy},dbtfy_pricing_table:{init:()=>{},destroy:themePricingTableDestroy},dbtfy_product_bullet_points:{init:themeProductBulletPoints,destroy:themeProductBulletPointsDestroy},dbtfy_product_image_crop:{init:()=>{},destroy:themeProductImageCropDestroy},dbtfy_product_swatches:{init:themeProductSwatches,destroy:themeProductSwatchesDestroy},dbtfy_product_tabs:{init:themeProductTabs,destroy:themeProductTabsDestroy},dbtfy_quantity_breaks:{init:themeQuantityBreaks,destroy:themeQuantityBreaksDestroy},dbtfy_quick_compare:{init:themeQuickCompare,destroy:themeQuickCompareDestroy},dbtfy_quick_view:{init:themeQuickView,destroy:themeQuickViewDestroy},dbtfy_recently_viewed:{init:themeRecentlyViewed,destroy:themeRecentlyViewedDestroy},dbtfy_sales_countdown:{init:themeSalesCountdown,destroy:themeSalesCountdownDestroy},dbtfy_shop_protect:{init:themeShopProtect,destroy:()=>{}},dbtfy_size_chart:{init:themeSizeChart,destroy:themeSizeChartDestroy},dbtfy_smart_search:{init:themeSmartSearch,destroy:themeSmartSearchDestroy},dbtfy_social_discount:{init:()=>{t.register("product-template",themeSocialDiscount)},destroy:themeSocialDiscountDestroy},dbtfy_sticky_addtocart:{init:()=>{t.register("product-template",themeStickyAddtocart)},destroy:themeStickyAddtocartDestroy},dbtfy_synced_variant_image:{init:themeSyncedVariantImage,destroy:()=>{}},dbtfy_trust_badge:{init:()=>{},destroy:themeTrustBadgeDestroy},dbtfy_upsell_bundles:{init:themeUpsellBundles,destroy:themeUpsellBundlesDestroy},dbtfy_upsell_popup:{init:()=>{t.register("upsell-popup",themeUpsellPopup)},destroy:themeUpsellPopupDestroy},dbtfy_wish_list:{init:themeWishList,destroy:themeWishListDestroy}},o=e.detail.enabledAddons;for(const[e,t]of Object.entries(r)){o.some(t=>t.name===e)?t.init():t.destroy()}Shopify.designMode&&function(){if(sessionStorage.getItem("addonsLimitPopupClosed"))return;const e=theme.addons.addons,t=Object.entries(e),r=t.filter(e=>e[1]);if(o.length>=r.length)return;const i={5:{name:"Starter Plan",maxAddons:5,link:"https://theme.debutify.com/plans/starter?billing=yearly",nextAddon:"30"},30:{name:"Pro Plan",maxAddons:30,link:"https://theme.debutify.com/plans/pro?billing=yearly",nextAddon:"master"},master:{name:"Enterprise Plan",maxAddons:t.length,link:"https://theme.debutify.com/plans/enterprise?billing=yearly"}},s=document.querySelector("#AddonsLimitReachedPopup");if(!s)return;const d=s.querySelectorAll(".to-link-btn, [data-toast-close]"),n=s.querySelector(".addons-limit-popup-text"),a=s.querySelector(".addons-limit-popup-note"),y=s.querySelector(".addons-limit-popup-button"),m=i[o.length],c=i[m.nextAddon];n.innerHTML=n.innerHTML.replace("[plan_name]",m.name).replace("[current_limit]",m.maxAddons).replace("[upgraded_plan]",`<a class="text-link" href="${c.link}">${c.name}</a>`).replace("[upgraded_limit]",c.maxAddons),a.innerHTML=a.innerHTML.replace(/&lt;/g,"<").replace(/&gt;/g,">").replaceAll("[current_limit]",m.maxAddons),y.href=c.link,theme.toast.show(s),d.forEach(e=>{e.addEventListener("click",e=>{sessionStorage.setItem("addonsLimitPopupClosed","true"),theme.toast.hide(s)})})}()});
})();
